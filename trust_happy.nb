(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 13.2' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[    253370,       6586]
NotebookOptionsPosition[    242918,       6410]
NotebookOutlinePosition[    243418,       6428]
CellTagsIndexPosition[    243375,       6425]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{"run", " ", "macros", " ", "first"}], " ", "*)"}], 
  RowBox[{
   RowBox[{
    RowBox[{"path", "=", 
     RowBox[{"NotebookDirectory", "[", "]"}]}], ";"}], "\[IndentingNewLine]", 
   " ", 
   RowBox[{
    RowBox[{"p1", "=", 
     SubscriptBox[
      RowBox[{
      "Import", "[", 
       "\"\<~/Documents/Social Choice/Happiness/Data/Kameny.xlsx\>\"", "]"}], 
      
      RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]]}], ";", 
    " ", 
    RowBox[{"pais", "=", 
     RowBox[{"Select", "[", 
      RowBox[{
       RowBox[{"Rest", "@", 
        SubscriptBox["p1", 
         RowBox[{"\[LeftDoubleBracket]", 
          RowBox[{"All", ",", 
           RowBox[{"{", 
            RowBox[{"1", ",", "2", ",", "4"}], "}"}]}], 
          "\[RightDoubleBracket]"}]]}], ",", 
       RowBox[{
        RowBox[{
         RowBox[{"StringLength", "@", 
          RowBox[{"First", "@", "#"}]}], ">", "1"}], "&"}]}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"pata", "=", 
     RowBox[{"path", "<>", "\"\<../../Definitions/\>\""}]}], ";", " ", 
    RowBox[{"gni1", "=", 
     RowBox[{"Import", "[", 
      RowBox[{"pata", "<>", "\"\<myGNI.csv.bz2\>\""}], "]"}]}], ";", 
    RowBox[{"popu", "=", 
     RowBox[{"Import", "[", 
      RowBox[{"pata", "<>", "\"\<unpop.csv.bz2\>\""}], "]"}]}], ";", " ", 
    RowBox[{"longe", "=", 
     RowBox[{"Import", "[", 
      RowBox[{"pata", "<>", "\"\<unpop2.csv.bz2\>\""}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Export", "[", 
     RowBox[{
     "\"\<bcn.sh\>\"", ",", 
      "\"\<hdiutil attach '/Applications/Trucs/Buro/Stata14.dmg' -noautofsck \
\\n\nhdiutil attach '/Users/nboccard/Movies/Amazon Drive/Data/barometer.dmg' \
-noautofsck\>\"", ",", "\"\<Text\>\""}], "]"}], ";", "  ", 
    RowBox[{"Run", "[", "\"\<sh bcn.sh\>\"", "]"}], ";"}]}]}]], "Input",
 CellChangeTimes->{{3.8653905301184797`*^9, 3.865390539813573*^9}, {
   3.865390602535222*^9, 3.865390604127624*^9}, {3.865390793880625*^9, 
   3.8653908027421494`*^9}, {3.865391124469803*^9, 3.865391141533072*^9}, {
   3.865391638165063*^9, 3.8653916383793917`*^9}, {3.8653966639251842`*^9, 
   3.865396665964233*^9}, {3.865397399155897*^9, 3.86539741094858*^9}, {
   3.8653977472630053`*^9, 3.8653977559909763`*^9}, {3.865421210889535*^9, 
   3.865421249086318*^9}, 3.8654213192769327`*^9, 3.865438171258108*^9, {
   3.8654396207796497`*^9, 3.865439626612009*^9}, 3.8664593600520678`*^9, 
   3.866472793577232*^9, {3.8667776929182987`*^9, 3.866777698317293*^9}, {
   3.866777829711863*^9, 3.8667778330621853`*^9}, 3.866778278004848*^9, {
   3.866778402631709*^9, 3.866778414239731*^9}, {3.866778581952693*^9, 
   3.8667785895925837`*^9}, {3.866791728415305*^9, 3.866791729077784*^9}, {
   3.866791764648213*^9, 3.8667917667739067`*^9}, {3.867032044091701*^9, 
   3.8670320450240793`*^9}, {3.871611597706653*^9, 3.871611604818863*^9}, 
   3.889707917048732*^9, 3.8897083064223433`*^9, {3.8900428554240217`*^9, 
   3.890042856980341*^9}, {3.8901384462347507`*^9, 3.890138446758864*^9}, {
   3.890211845983375*^9, 3.890211878152705*^9}, {3.89021967076764*^9, 
   3.890219672451377*^9}, {3.8902209243479433`*^9, 3.890220936013953*^9}, {
   3.905969201931769*^9, 3.905969210009988*^9}, {3.905999638687393*^9, 
   3.905999660606885*^9}, 3.906103856479031*^9, {3.906177604775329*^9, 
   3.9061776051453943`*^9}},
 CellLabel->"In[66]:=",ExpressionUUID->"89034262-cb7d-483a-b5fc-bc39b0eaeeda"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"each", " ", 
     RowBox[{"tab", "[", "]"}], " ", "must", " ", "hold", " ", "the", " ", 
     "relevant", " ", "variables", " ", "for", " ", "one", " ", "year"}], ",",
     " ", 
    RowBox[{
    "we", " ", "put", " ", "all", " ", "together", " ", "by", " ", "rank", 
     " ", "not", " ", "decimal"}]}], " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"bojo", "[", 
     RowBox[{"tab_", ",", "sens_", ",", "back_"}], "]"}], ":=", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
       "liz", ",", "n", ",", "A", ",", "m", ",", "B", ",", "bor", ",", "cop", 
        ",", "a", ",", "b", ",", "d"}], "}"}], 
      RowBox[{"(*", "*)"}], ",", 
      RowBox[{
       RowBox[{"liz", "=", 
        SubscriptBox[
         RowBox[{"Tally", "[", 
          RowBox[{"Flatten", "@", 
           RowBox[{"Table", "[", 
            RowBox[{
             SubscriptBox[
              RowBox[{"tab", "[", "k", "]"}], 
              RowBox[{"\[LeftDoubleBracket]", 
               RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]], ",", 
             RowBox[{"{", 
              RowBox[{"k", ",", "back"}], "}"}]}], "]"}]}], "]"}], 
         RowBox[{"\[LeftDoubleBracket]", 
          RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]]}], ";", " ", 
       RowBox[{"n", "=", 
        RowBox[{"Length", "@", "liz"}]}], ";", "  ", 
       RowBox[{"A", "=", 
        RowBox[{"Table", "[", " ", 
         RowBox[{
          RowBox[{"Prepend", "[", 
           RowBox[{
            RowBox[{"Flatten", "@", 
             RowBox[{"Table", "[", 
              RowBox[{
               RowBox[{
                RowBox[{"a", "=", 
                 RowBox[{"Select", "[", 
                  RowBox[{
                   RowBox[{"tab", "[", "k", "]"}], ",", 
                   RowBox[{
                    RowBox[{
                    RowBox[{"First", "@", "#"}], "==", 
                    SubscriptBox["liz", 
                    RowBox[{
                    "\[LeftDoubleBracket]", "i", "\[RightDoubleBracket]"}]]}],
                     "&"}]}], "]"}]}], ";", 
                RowBox[{"m", "=", 
                 RowBox[{
                  RowBox[{"Last", "@", 
                   RowBox[{"Dimensions", "@", 
                    RowBox[{"tab", "[", "k", "]"}]}]}], "-", "1"}]}], ";", 
                " ", 
                RowBox[{"If", "[", 
                 RowBox[{
                  RowBox[{
                   RowBox[{"Length", "@", "a"}], ">", "0"}], ",", 
                  RowBox[{"sens", " ", 
                   RowBox[{"Rest", "@", 
                    SubscriptBox["a", 
                    RowBox[{
                    "\[LeftDoubleBracket]", "1", 
                    "\[RightDoubleBracket]"}]]}]}], ",", 
                  RowBox[{"ConstantArray", "[", 
                   RowBox[{"\"\<@\>\"", ",", "m"}], "]"}]}], "]"}]}], ",", 
               RowBox[{"{", 
                RowBox[{"k", ",", "back"}], "}"}]}], "]"}]}], ",", 
            SubscriptBox["liz", 
             RowBox[{
             "\[LeftDoubleBracket]", "i", "\[RightDoubleBracket]"}]]}], "]"}],
           ",", 
          RowBox[{"{", 
           RowBox[{"i", ",", 
            RowBox[{"Length", "@", "liz"}]}], "}"}]}], "]"}]}], ";", " ", 
       RowBox[{"liz", "=", 
        SubscriptBox["A", 
         RowBox[{"\[LeftDoubleBracket]", 
          RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]]}], ";", "  ", 
       
       RowBox[{"n", "=", 
        RowBox[{"Length", "@", "liz"}]}], ";", " ", 
       RowBox[{"B", "=", 
        RowBox[{"DeleteCases", "[", 
         RowBox[{
          RowBox[{"Flatten", "[", 
           RowBox[{
            RowBox[{"Table", "[", 
             RowBox[{
              RowBox[{
               RowBox[{"b", "=", 
                RowBox[{"Select", "[", 
                 RowBox[{
                  RowBox[{
                   SubscriptBox["A", 
                    RowBox[{"\[LeftDoubleBracket]", 
                    RowBox[{"{", 
                    RowBox[{"j", ",", "i"}], "}"}], 
                    "\[RightDoubleBracket]"}]], "\[Transpose]"}], ",", 
                  RowBox[{
                   RowBox[{"NumberQ", "@", 
                    RowBox[{"Total", "@", "#"}]}], "&"}]}], "]"}]}], ";", " ",
                "\[IndentingNewLine]", 
               RowBox[{"If", "[", 
                RowBox[{
                 RowBox[{
                  RowBox[{"Length", "@", "b"}], ">", "0"}], ",", 
                 RowBox[{
                  RowBox[{"a", "=", 
                   RowBox[{"Total", "@", 
                    RowBox[{"Sign", "@", 
                    RowBox[{"First", "@", 
                    RowBox[{"Differences", "[", 
                    RowBox[{"b", "\[Transpose]"}], "]"}]}]}]}]}], ";", " ", 
                  RowBox[{"{", 
                   RowBox[{
                    SubscriptBox["liz", 
                    RowBox[{"\[LeftDoubleBracket]", 
                    RowBox[{"{", 
                    RowBox[{"i", ",", "j"}], "}"}], 
                    "\[RightDoubleBracket]"}]], ",", 
                    RowBox[{
                    FractionBox["1.", "2"], "+", 
                    FractionBox[
                    RowBox[{"{", 
                    RowBox[{"a", ",", 
                    RowBox[{"-", "a"}]}], "}"}], 
                    RowBox[{"2", " ", "back", " ", "m"}]]}], ",", 
                    RowBox[{"liz", "[", 
                    RowBox[{"[", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"Sign", "@", "a"}], ">", "0"}], ",", "i", ",", 
                    "j"}], "]"}], "]"}], "]"}]}], "}"}]}]}], "]"}]}], " ", 
              ",", 
              RowBox[{"{", 
               RowBox[{"i", ",", "2", ",", "n"}], "}"}], ",", 
              RowBox[{"{", 
               RowBox[{"j", ",", 
                RowBox[{"i", "-", "1"}]}], "}"}]}], "]"}], ",", "1"}], "]"}], 
          ",", "Null"}], "]"}]}], ";", " ", 
       RowBox[{"bor", "=", 
        RowBox[{
         RowBox[{
          RowBox[{"{", 
           RowBox[{
            RowBox[{"First", "@", "#"}], ",", 
            FractionBox[
             RowBox[{"Last", "@", "#"}], 
             RowBox[{"n", "-", "1"}]]}], "}"}], "&"}], "/@", 
         RowBox[{"proctot", "[", 
          RowBox[{
           RowBox[{"Flatten", "[", 
            RowBox[{
             RowBox[{
              RowBox[{
               RowBox[{
                SubscriptBox["#", 
                 RowBox[{"\[LeftDoubleBracket]", 
                  RowBox[{"{", 
                   RowBox[{"1", ",", "2"}], "}"}], "\[RightDoubleBracket]"}]],
                 "\[Transpose]"}], "&"}], "/@", "B"}], ",", "1"}], "]"}], ",",
            "1", ",", "2"}], "]"}]}]}], ";", " ", 
       RowBox[{"cop", "=", 
        RowBox[{"Tally", "@", 
         SubscriptBox["B", 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"All", ",", "3"}], "\[RightDoubleBracket]"}]]}]}], ";", 
       " ", 
       RowBox[{"d", "=", 
        RowBox[{"SortBy", "[", 
         RowBox[{
          RowBox[{
           RowBox[{
            RowBox[{"{", 
             RowBox[{
              SubscriptBox["#", 
               RowBox[{
               "\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], ",", 
              RowBox[{
               SubscriptBox["#", 
                RowBox[{
                "\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], "+", 
               
               SubscriptBox["#", 
                RowBox[{
                "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]]}]}], 
             "}"}], "&"}], "/@", 
           RowBox[{"merge", "[", 
            RowBox[{"bor", ",", "cop"}], "]"}]}], ",", 
          RowBox[{
           RowBox[{"-", 
            RowBox[{"Last", "@", "#"}]}], "&"}]}], "]"}]}], ";", " ", 
       RowBox[{
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{"First", "@", "#"}], ",", 
           RowBox[{"Round", "[", 
            RowBox[{
             RowBox[{"9998", " ", 
              FractionBox[
               RowBox[{
                RowBox[{"Last", "@", "#"}], "-", 
                SubscriptBox["d", 
                 RowBox[{"\[LeftDoubleBracket]", 
                  RowBox[{
                   RowBox[{"-", "1"}], ",", "2"}], 
                  "\[RightDoubleBracket]"}]]}], 
               RowBox[{
                SubscriptBox["d", 
                 RowBox[{"\[LeftDoubleBracket]", 
                  RowBox[{"1", ",", "2"}], "\[RightDoubleBracket]"}]], "-", 
                SubscriptBox["d", 
                 RowBox[{"\[LeftDoubleBracket]", 
                  RowBox[{
                   RowBox[{"-", "1"}], ",", "2"}], 
                  "\[RightDoubleBracket]"}]]}]]}], "+", "1"}], "]"}]}], "}"}],
          "&"}], "/@", "d"}]}]}], "]"}]}], ";"}]}]], "Input",
 CellChangeTimes->{{3.8654013638347273`*^9, 3.865401486151458*^9}, {
   3.865401557634988*^9, 3.865401615436082*^9}, {3.865401939923674*^9, 
   3.865401958051758*^9}, {3.865410393082877*^9, 3.865410503553935*^9}, {
   3.865410727414187*^9, 3.865410735021851*^9}, {3.865411405497796*^9, 
   3.865411436931633*^9}, 3.865411496126052*^9, {3.865442968470975*^9, 
   3.865443000871868*^9}, 3.865443066687614*^9, {3.865443112970977*^9, 
   3.865443115563303*^9}, {3.86549978761777*^9, 3.8654997942560663`*^9}, {
   3.865499838708496*^9, 3.8654998426861477`*^9}, {3.865499939282207*^9, 
   3.865499988487604*^9}, {3.865505215852345*^9, 3.865505229833199*^9}, {
   3.865505718769472*^9, 3.865505722989478*^9}, {3.865514113691427*^9, 
   3.865514170106525*^9}, {3.865514201384968*^9, 3.865514294275223*^9}, {
   3.8660815246406813`*^9, 3.866081578297241*^9}, {3.866081616749202*^9, 
   3.866081636369215*^9}, {3.86608319382644*^9, 3.8660831972797823`*^9}, {
   3.866083380672804*^9, 3.866083394985413*^9}, {3.866083425751215*^9, 
   3.866083428825573*^9}, {3.866083469479218*^9, 3.866083569429534*^9}, {
   3.866083650220014*^9, 3.866083687976478*^9}, {3.866083720159425*^9, 
   3.866083722275613*^9}, {3.866083762367379*^9, 3.866083780524544*^9}, {
   3.8660839310654984`*^9, 3.866083942965757*^9}, {3.866084048597528*^9, 
   3.866084049197453*^9}, {3.866084801973077*^9, 3.8660848421853113`*^9}, 
   3.8660850088166924`*^9, {3.8660850448975677`*^9, 3.866085065915113*^9}, {
   3.866085248795122*^9, 3.866085262492798*^9}, {3.866085321839259*^9, 
   3.8660853231434937`*^9}, {3.8660853598917837`*^9, 3.866085372952817*^9}, {
   3.866085467141407*^9, 3.866085492919744*^9}, {3.8664268891211853`*^9, 
   3.866426890733933*^9}, {3.866427104032509*^9, 3.866427105344327*^9}, {
   3.8664276090412292`*^9, 3.866427615797779*^9}, {3.867043341826768*^9, 
   3.867043343260459*^9}, {3.867043521692354*^9, 3.8670435228429956`*^9}, {
   3.871611599071258*^9, 3.871611606974156*^9}, {3.871990792064837*^9, 
   3.87199081952717*^9}, {3.871992480825532*^9, 3.871992481937785*^9}},
 CellLabel->"In[70]:=",ExpressionUUID->"f37333ec-05b1-4f81-ae11-fb86c6660cb2"],

Cell[CellGroupData[{

Cell["World Happiness Report & WB", "Subsection",
 CellChangeTimes->{
  3.865391437995376*^9, {3.865391614914773*^9, 3.865391623290903*^9}, {
   3.866023827470522*^9, 3.8660238296295557`*^9}, {3.866437051201089*^9, 
   3.8664370563036003`*^9}, {3.866721997797151*^9, 3.866722024328422*^9}, {
   3.871708549784474*^9, 3.8717085505965853`*^9}, {3.871787125312439*^9, 
   3.871787126350203*^9}, {3.871787368697701*^9, 3.871787369547535*^9}, {
   3.872737405381714*^9, 3.872737407718148*^9}, {3.8727468574183693`*^9, 
   3.872746860528627*^9}, {3.90600360648637*^9, 
   3.9060036082713127`*^9}},ExpressionUUID->"d98d3770-6975-4af9-9a23-\
f6e1d54bb267"],

Cell[BoxData[
 RowBox[{
  RowBox[{"deb", "=", "2018"}], ";", 
  RowBox[{"fin", "=", "2022"}], ";"}]], "Input",
 CellChangeTimes->{{3.906003823384358*^9, 3.906003835511532*^9}},
 CellLabel->
  "In[101]:=",ExpressionUUID->"ea74affc-55d0-449d-8104-f74ca114a351"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"URLSave", "[", 
     RowBox[{
     "\"\<https://happiness-report.s3.amazonaws.com/2023/DataForTable2.\
1WHR2023.xls\>\"", ",", "\"\<WHR2023.xls\>\""}], "]"}], ";", " ", 
    RowBox[{"w9", "=", 
     SubscriptBox[
      RowBox[{"Import", "[", "\"\<WHR2023.xls\>\"", "]"}], 
      RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]]}], ";", 
    " ", 
    RowBox[{"liz", "=", 
     RowBox[{
      RowBox[{
       SubscriptBox[
        RowBox[{"Position", "[", 
         RowBox[{
          RowBox[{"First", "@", "w9"}], ",", "#"}], "]"}], 
        RowBox[{"\[LeftDoubleBracket]", 
         RowBox[{"1", ",", "1"}], "\[RightDoubleBracket]"}]], "&"}], "/@", 
      "\[IndentingNewLine]", 
      RowBox[{"{", 
       RowBox[{
       "\"\<Country name\>\"", ",", "\"\<year\>\"", ",", 
        "\"\<Life Ladder\>\"", ",", "\"\<Social support\>\"", ",", 
        "\"\<Freedom to make life choices\>\"", ",", "\"\<Generosity\>\"", 
        ",", "\"\<Positive affect\>\"", ",", "\"\<Negative affect\>\""}], 
       "}"}]}]}], ";", " ", 
    RowBox[{"w1", "=", 
     SubscriptBox["w9", 
      RowBox[{"\[LeftDoubleBracket]", 
       RowBox[{"All", ",", "liz"}], "\[RightDoubleBracket]"}]]}], ";", " ", 
    RowBox[{"Export", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\<data/whr.csv.bz2\>\""}], ",", "w1"}], "]"}], 
    ";"}], " ", "*)"}], "\[IndentingNewLine]", " ", 
  RowBox[{
   RowBox[{"w1", "=", 
    RowBox[{"Import", "[", 
     RowBox[{"path", "<>", "\"\<data/whr.csv.bz2\>\""}], "]"}]}], ";", "  ", 
   RowBox[{"swap", "=", "\[IndentingNewLine]", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"\"\<Taiwan Province of China\>\"", "->", "\"\<Taiwan\>\""}], 
      ",", 
      RowBox[{
      "\"\<Central African Republic\>\"", "->", "\"\<Central Afr. Rep.\>\""}],
       ",", "\[IndentingNewLine]", 
      RowBox[{"\"\<State of Palestine\>\"", "->", "\"\<Palestine\>\""}], ",", 
      
      RowBox[{"\"\<Dominican Republic\>\"", "->", "\"\<Dominican Rep.\>\""}], 
      ",", 
      RowBox[{"\"\<Bosnia and Herzegovina\>\"", "->", "\"\<Bosnia\>\""}], ",", 
      RowBox[{"\"\<South Korea\>\"", "->", "\"\<Korea\>\""}], ",", 
      RowBox[{
      "\"\<Hong Kong S.A.R. of China\>\"", "->", "\"\<Hong Kong\>\""}], ",", 
      RowBox[{"\"\<Ivory Coast\>\"", "->", "\"\<C\[OHat]te d'Ivoire\>\""}], 
      ",", 
      RowBox[{
      "\"\<Congo (Brazzaville)\>\"", "->", "\"\<Congo-Brazzaville\>\""}], ",", 
      RowBox[{"\"\<Congo (Kinshasa)\>\"", "->", "\"\<Congo-Kinshasa\>\""}], 
      ",", 
      RowBox[{"\"\<Turkiye\>\"", "->", "\"\<Turkey\>\""}]}], "}"}]}], ";", 
   " ", 
   RowBox[{"w2", "=", 
    RowBox[{
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        SubscriptBox["#", 
         RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], ",", 
        SubscriptBox["#", 
         RowBox[{"\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]]}], 
       "}"}], "&"}], "/@", 
     RowBox[{"Select", "[", 
      RowBox[{"w1", ",", 
       RowBox[{
        RowBox[{"deb", "\[LessEqual]", 
         SubscriptBox["#", 
          RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], 
         "\[LessEqual]", "fin"}], "&"}]}], "]"}]}]}], ";", " ", 
   RowBox[{"w3", "=", 
    SubscriptBox[
     RowBox[{"merge", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"procmean", "[", 
         RowBox[{"w2", ",", "1", ",", "2"}], "]"}], "/.", "swap"}], ",", 
       SubscriptBox["pais", 
        RowBox[{"\[LeftDoubleBracket]", 
         RowBox[{"All", ",", 
          RowBox[{"{", 
           RowBox[{"2", ",", "1"}], "}"}]}], "\[RightDoubleBracket]"}]]}], 
      "]"}], 
     RowBox[{"\[LeftDoubleBracket]", 
      RowBox[{"All", ",", 
       RowBox[{"{", 
        RowBox[{"3", ",", "2"}], "}"}]}], "\[RightDoubleBracket]"}]]}], " ", 
   RowBox[{"(*", " ", 
    RowBox[{"happy", " ", "score"}], " ", "*)"}], ";", 
   RowBox[{"Print", "[", 
    RowBox[{
     RowBox[{"Length", "@", "w3"}], ",", "\"\< available countries\>\""}], 
    "]"}], ";", " ", 
   RowBox[{"m9", "=", 
    RowBox[{"SortBy", "[", 
     RowBox[{"w3", ",", 
      RowBox[{
       RowBox[{"Last", "@", "#"}], "&"}]}], "]"}]}], ";", 
   RowBox[{"m0", "=", 
    RowBox[{
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        RowBox[{"First", "@", "#"}], ",", 
        RowBox[{"100", 
         FractionBox[
          RowBox[{
           RowBox[{"Last", "@", "#"}], "-", 
           SubscriptBox["m9", 
            RowBox[{"\[LeftDoubleBracket]", 
             RowBox[{"1", ",", "2"}], "\[RightDoubleBracket]"}]]}], 
          RowBox[{
           SubscriptBox["m9", 
            RowBox[{"\[LeftDoubleBracket]", 
             RowBox[{
              RowBox[{"-", "1"}], ",", "2"}], "\[RightDoubleBracket]"}]], "-", 
           SubscriptBox["m9", 
            RowBox[{"\[LeftDoubleBracket]", 
             RowBox[{"1", ",", "2"}], "\[RightDoubleBracket]"}]]}]]}]}], 
       "}"}], "&"}], "/@", "m9"}]}], ";"}], 
  RowBox[{"(*", " ", 
   RowBox[{"{", 
    RowBox[{
    "\"\<ISO3_code\>\"", ",", "\"\<Time\>\"", ",", "\"\<TPopulation1July\>\"",
      ",", "\"\<Births\>\"", ",", "\"\<Deaths\>\"", ",", 
     "\"\<PopGrowthRate\>\"", ",", "\"\<Q5\>\"", ",", "\"\<Q1560\>\"", ",", 
     "\"\<LE65\>\"", ",", "\"\<LEx\>\""}], "}"}], " ", "*)"}]}]], "Input",
 CellChangeTimes->{{3.906003878313077*^9, 3.906003880400416*^9}, {
   3.906004021067086*^9, 3.906004026758995*^9}, {3.9061041387296333`*^9, 
   3.906104140148478*^9}, 3.906104240744796*^9, {3.9061046934980173`*^9, 
   3.906104697607785*^9}, {3.906129603801886*^9, 3.906129653046727*^9}, 
   3.90612969519986*^9, {3.906129766332102*^9, 3.9061298784072742`*^9}, {
   3.906131387369814*^9, 3.906131395710228*^9}, 3.906131430932952*^9, 
   3.906131837975913*^9, {3.9062656439267673`*^9, 3.906265645283044*^9}},
 CellLabel->
  "In[102]:=",ExpressionUUID->"8de415d0-8287-476c-8df0-f2400b56a019"],

Cell[BoxData[
 InterpretationBox[
  RowBox[{"149", "\[InvisibleSpace]", "\<\" available countries\"\>"}],
  SequenceForm[149, " available countries"],
  Editable->False]], "Print",
 CellChangeTimes->{{3.906183285240324*^9, 3.906183296725115*^9}, 
   3.906184513548562*^9, 3.906189745709133*^9, 3.906190404687312*^9, 
   3.906264124829547*^9, 3.906264265431933*^9, 3.906265645991292*^9, 
   3.906289449419224*^9, 3.906289489325122*^9},
 CellLabel->
  "During evaluation of \
In[102]:=",ExpressionUUID->"8cfd1c06-3e30-4c1e-a78b-1b03ec6eda47"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{"pooled", " ", "years", " ", "version"}], " ", "*)"}], 
  RowBox[{
   RowBox[{
    RowBox[{"gni2", "=", 
     RowBox[{"procmean", "[", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           SubscriptBox["#", 
            RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], 
           ",", 
           RowBox[{"10", "^", 
            SubscriptBox["#", 
             RowBox[{
             "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]]}]}], 
          "}"}], "&"}], "/@", 
        RowBox[{"Select", "[", 
         RowBox[{"gni1", ",", 
          RowBox[{
           RowBox[{"deb", "\[LessEqual]", 
            SubscriptBox["#", 
             RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], 
            "\[LessEqual]", "fin"}], "&"}]}], "]"}]}], ",", "1", ",", "2"}], 
      "]"}]}], ";", 
    RowBox[{"popo", "=", 
     RowBox[{"procmean", "[", 
      RowBox[{
       RowBox[{"Select", "[", 
        RowBox[{"popu", ",", 
         RowBox[{
          RowBox[{"deb", "\[LessEqual]", 
           SubscriptBox["#", 
            RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], 
           "\[LessEqual]", "fin"}], "&"}]}], "]"}], ",", "1", ",", "3"}], 
      "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"inko", "=", 
     RowBox[{
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         SubscriptBox["#", 
          RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], 
         ",", 
         RowBox[{"Log", "[", 
          RowBox[{"2", ",", 
           RowBox[{
            SubscriptBox["#", 
             RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], 
            "/", 
            SubscriptBox["#", 
             RowBox[{
             "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]]}]}], 
          "]"}]}], "}"}], "&"}], "/@", 
      RowBox[{"merge", "[", 
       RowBox[{"gni2", ",", "popo"}], "]"}]}]}], 
    RowBox[{"(*", " ", 
     RowBox[{"per", " ", "capita", " ", "income"}], "  ", "*)"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"tab", "[", "1", "]"}], "=", 
     RowBox[{"SortBy", "[", 
      RowBox[{"m0", ",", 
       RowBox[{
        RowBox[{"-", 
         RowBox[{"Last", "@", "#"}]}], "&"}]}], "]"}]}], ";", 
    RowBox[{
     RowBox[{"tab", "[", "5", "]"}], "=", 
     RowBox[{"SortBy", "[", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           SubscriptBox["#", 
            RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], 
           ",", 
           RowBox[{"1", "/", 
            SubscriptBox["#", 
             RowBox[{
             "\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]]}]}], 
          "}"}], "&"}], "/@", 
        RowBox[{"procmean", "[", 
         RowBox[{
          RowBox[{"Select", "[", 
           RowBox[{"longe", ",", "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{
              RowBox[{"MemberQ", "[", 
               RowBox[{
                SubscriptBox["m0", 
                 RowBox[{"\[LeftDoubleBracket]", 
                  RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]], ",", 
                
                RowBox[{"First", "@", "#"}]}], "]"}], "&&", 
              RowBox[{"deb", "\[LessEqual]", 
               SubscriptBox["#", 
                RowBox[{
                "\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], 
               "\[LessEqual]", "fin"}]}], "&"}]}], "]"}], ",", "1", ",", 
          "7"}], "]"}]}], ",", 
       RowBox[{
        RowBox[{"-", 
         RowBox[{"Last", "@", "#"}]}], "&"}]}], "]"}]}], ";", 
    RowBox[{
     RowBox[{"tab", "[", "4", "]"}], "=", 
     RowBox[{"SortBy", "[", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           SubscriptBox["#", 
            RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], 
           ",", 
           RowBox[{"1", "/", 
            SubscriptBox["#", 
             RowBox[{
             "\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]]}]}], 
          "}"}], "&"}], "/@", 
        RowBox[{"procmean", "[", 
         RowBox[{
          RowBox[{"Select", "[", 
           RowBox[{"longe", ",", "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{
              RowBox[{"MemberQ", "[", 
               RowBox[{
                SubscriptBox["m0", 
                 RowBox[{"\[LeftDoubleBracket]", 
                  RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]], ",", 
                
                RowBox[{"First", "@", "#"}]}], "]"}], "&&", 
              RowBox[{"deb", "\[LessEqual]", 
               SubscriptBox["#", 
                RowBox[{
                "\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], 
               "\[LessEqual]", "fin"}]}], "&"}]}], "]"}], ",", "1", ",", 
          "8"}], "]"}]}], ",", 
       RowBox[{
        RowBox[{"-", 
         RowBox[{"Last", "@", "#"}]}], "&"}]}], "]"}]}], ";", 
    RowBox[{
     RowBox[{"tab", "[", "3", "]"}], "=", 
     RowBox[{"SortBy", "[", 
      RowBox[{
       RowBox[{"procmean", "[", 
        RowBox[{
         RowBox[{"Select", "[", 
          RowBox[{"longe", ",", 
           RowBox[{
            RowBox[{
             RowBox[{"MemberQ", "[", 
              RowBox[{
               SubscriptBox["m0", 
                RowBox[{"\[LeftDoubleBracket]", 
                 RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]], ",", 
               RowBox[{"First", "@", "#"}]}], "]"}], "&&", 
             "\[IndentingNewLine]", 
             RowBox[{"deb", "\[LessEqual]", 
              SubscriptBox["#", 
               RowBox[{
               "\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], 
              "\[LessEqual]", "fin"}]}], "&"}]}], "]"}], ",", "1", ",", "9"}],
         "]"}], ",", 
       RowBox[{
        RowBox[{"-", 
         RowBox[{"Last", "@", "#"}]}], "&"}]}], "]"}]}], ";", 
    RowBox[{
     RowBox[{"tab", "[", "2", "]"}], "=", 
     RowBox[{"SortBy", "[", 
      RowBox[{
       RowBox[{"procmean", "[", 
        RowBox[{
         RowBox[{"Select", "[", 
          RowBox[{"longe", ",", 
           RowBox[{
            RowBox[{
             RowBox[{"MemberQ", "[", 
              RowBox[{
               SubscriptBox["m0", 
                RowBox[{"\[LeftDoubleBracket]", 
                 RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]], ",", 
               RowBox[{"First", "@", "#"}]}], "]"}], "&&", 
             "\[IndentingNewLine]", 
             RowBox[{"deb", "\[LessEqual]", 
              SubscriptBox["#", 
               RowBox[{
               "\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], 
              "\[LessEqual]", "fin"}]}], "&"}]}], "]"}], ",", "1", ",", 
         "10"}], "]"}], ",", 
       RowBox[{
        RowBox[{"-", 
         RowBox[{"Last", "@", "#"}]}], "&"}]}], "]"}]}], ";", " ", 
    RowBox[{"hapi", "=", 
     RowBox[{"bojo", "[", 
      RowBox[{"tab", ",", "1", ",", "3"}], "]"}]}], ";"}], "  ", 
   RowBox[{"(*", " ", 
    RowBox[{
     RowBox[{"using", " ", "happy"}], ",", " ", 
     RowBox[{
     "expectancy", " ", "at", " ", "birth", " ", "and", " ", "at", " ", 
      "65"}]}], " ", "*)"}]}]}]], "Input",
 CellChangeTimes->{{3.890220102697019*^9, 3.890220239995336*^9}, {
   3.890220329331732*^9, 3.890220351968679*^9}, {3.890220585742523*^9, 
   3.8902206367876062`*^9}, {3.8902210901181707`*^9, 
   3.8902211421287518`*^9}, {3.890221209097126*^9, 3.890221248974193*^9}, {
   3.89022128857944*^9, 3.8902212887407827`*^9}, {3.890221363148415*^9, 
   3.89022136328962*^9}, {3.8902217002215548`*^9, 3.890221712264666*^9}, {
   3.8902219358316803`*^9, 3.8902219362072697`*^9}, {3.8902221242247543`*^9, 
   3.890222126440632*^9}, {3.890222343658058*^9, 3.89022237379935*^9}, {
   3.8902224491414013`*^9, 3.890222449593364*^9}, {3.890222500316304*^9, 
   3.890222503530653*^9}, {3.890222673554697*^9, 3.890222676550398*^9}, {
   3.890222914820539*^9, 3.890222916734961*^9}, {3.89022295560131*^9, 
   3.890223020828883*^9}, {3.890282986430129*^9, 3.8902830187267647`*^9}, {
   3.890295119097805*^9, 3.89029513444524*^9}, {3.890306279340418*^9, 
   3.890306281321165*^9}, {3.89071281695481*^9, 3.890712870987351*^9}, 
   3.890713544898076*^9, {3.890827140602055*^9, 3.8908271416022987`*^9}, {
   3.890827575095126*^9, 3.890827596991539*^9}, {3.891487450682005*^9, 
   3.89148745227837*^9}, {3.9060042533569307`*^9, 3.906004259483081*^9}, 
   3.9061041623261642`*^9, 3.90610425202116*^9, {3.9061046742919207`*^9, 
   3.906104686890353*^9}, {3.906104927949482*^9, 3.9061049366950417`*^9}, {
   3.9061050000022717`*^9, 3.9061050098305273`*^9}, {3.906129870982987*^9, 
   3.906129891598419*^9}, {3.906133385426639*^9, 3.906133418269857*^9}, {
   3.9061340400893183`*^9, 3.906134049034732*^9}, {3.9061835061411047`*^9, 
   3.906183506753642*^9}, {3.90618432571242*^9, 3.906184326051408*^9}, 
   3.9061845936127787`*^9, {3.9061900487950478`*^9, 3.906190053612444*^9}, 
   3.906190107237156*^9, {3.906193550926312*^9, 3.906193558702549*^9}, {
   3.906193864144771*^9, 3.906193883853366*^9}, {3.906194168164413*^9, 
   3.90619417133447*^9}},
 CellLabel->
  "In[103]:=",ExpressionUUID->"49902e36-01f1-478c-a4e5-9872b62ec499"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"dispo", "=", 
   RowBox[{"Intersection", "[", 
    RowBox[{
     SubscriptBox["inko", 
      RowBox[{"\[LeftDoubleBracket]", 
       RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]], ",", 
     SubscriptBox["hapi", 
      RowBox[{"\[LeftDoubleBracket]", 
       RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]]}], "]"}]}], ";", 
  
  RowBox[{"Length", "@", "dispo"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"a", "=", 
   RowBox[{"SortBy", "[", 
    RowBox[{
     RowBox[{"Select", "[", 
      RowBox[{"inko", ",", 
       RowBox[{
        RowBox[{"MemberQ", "[", 
         RowBox[{"dispo", ",", 
          RowBox[{"First", "@", "#"}]}], "]"}], "&"}]}], "]"}], ",", 
     RowBox[{
      RowBox[{"-", 
       RowBox[{"Last", "@", "#"}]}], "&"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"mony", "=", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      SubscriptBox["a", 
       RowBox[{"\[LeftDoubleBracket]", 
        RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]], ",", 
      RowBox[{"Range", "@", 
       RowBox[{"Length", "@", "a"}]}]}], "}"}], "\[Transpose]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"a", "=", 
   RowBox[{"SortBy", "[", 
    RowBox[{
     RowBox[{"Select", "[", 
      RowBox[{"hapi", ",", 
       RowBox[{
        RowBox[{"MemberQ", "[", 
         RowBox[{"dispo", ",", 
          RowBox[{"First", "@", "#"}]}], "]"}], "&"}]}], "]"}], ",", 
     RowBox[{
      RowBox[{"-", 
       RowBox[{"Last", "@", "#"}]}], "&"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"welf", "=", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      SubscriptBox["a", 
       RowBox[{"\[LeftDoubleBracket]", 
        RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]], ",", 
      RowBox[{"Range", "@", 
       RowBox[{"Length", "@", "a"}]}]}], "}"}], "\[Transpose]"}]}], ";", 
  RowBox[{"final", "=", 
   RowBox[{"SortBy", "[", 
    RowBox[{
     RowBox[{"merge", "[", 
      RowBox[{"welf", ",", "mony"}], "]"}], ",", 
     RowBox[{
      SubscriptBox["#", 
       RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], 
      "&"}]}], "]"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.906193705002153*^9, 3.906193841390967*^9}, {
   3.906193874592009*^9, 3.906193901245243*^9}, 3.906264145967555*^9},
 CellLabel->
  "In[106]:=",ExpressionUUID->"6aaa8514-80e8-4291-b8da-8ec92508d35f"],

Cell[BoxData["149"], "Output",
 CellChangeTimes->{
  3.906193902387425*^9, 3.90619417392138*^9, {3.906264125848466*^9, 
   3.90626414862003*^9}, 3.906264267113225*^9, 3.906265648498229*^9, 
   3.9062894504519997`*^9, 3.906289491096435*^9},
 CellLabel->
  "Out[106]=",ExpressionUUID->"ae087f0d-871a-4730-a0b6-ba3a39b970d7"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"\[Theta]", "=", 
   RowBox[{"Last", "@", 
    RowBox[{"Mean", "@", 
     RowBox[{"Select", "[", 
      RowBox[{"popu", ",", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"First", "@", "#"}], "==", "\"\<WLD\>\""}], "&&", 
         RowBox[{"deb", "\[LessEqual]", 
          SubscriptBox["#", 
           RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], 
          "\[LessEqual]", "fin"}]}], "&"}]}], "]"}]}]}]}], ";", 
  RowBox[{"Print", "[", 
   RowBox[{"\"\<Wold population coverage = \>\"", ",", 
    RowBox[{"100", " ", 
     RowBox[{
      RowBox[{"Total", "@", 
       SubscriptBox[
        RowBox[{"Select", "[", 
         RowBox[{"p1", ",", 
          RowBox[{
           RowBox[{"MemberQ", "[", 
            RowBox[{
             SubscriptBox["final", 
              RowBox[{"\[LeftDoubleBracket]", 
               RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]], ",", 
             RowBox[{"First", "@", "#"}]}], "]"}], "&"}]}], "]"}], 
        RowBox[{"\[LeftDoubleBracket]", 
         RowBox[{"All", ",", "3"}], "\[RightDoubleBracket]"}]]}], "/", 
      "\[Theta]"}]}], ",", "\"\<%\>\""}], "]"}], ";", " ", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"a", ",", "b"}], "}"}], "=", 
   RowBox[{
    SubscriptBox[
     RowBox[{"merge", "[", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           SubscriptBox["#", 
            RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], 
           ",", "\[IndentingNewLine]", 
           RowBox[{"N", "@", 
            RowBox[{"Abs", "[", 
             RowBox[{
              SubscriptBox["#", 
               RowBox[{
               "\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], "-", 
              SubscriptBox["#", 
               RowBox[{
               "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]]}], 
             "]"}]}]}], "}"}], "&"}], "/@", "final"}], ",", 
       SubscriptBox[
        RowBox[{"Select", "[", 
         RowBox[{"p1", ",", 
          RowBox[{
           RowBox[{"MemberQ", "[", 
            RowBox[{
             SubscriptBox["final", 
              RowBox[{"\[LeftDoubleBracket]", 
               RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]], ",", 
             RowBox[{"First", "@", "#"}]}], "]"}], "&"}]}], "]"}], 
        RowBox[{"\[LeftDoubleBracket]", 
         RowBox[{"All", ",", 
          RowBox[{"{", 
           RowBox[{"1", ",", "3"}], "}"}]}], "\[RightDoubleBracket]"}]]}], 
      "]"}], 
     RowBox[{"\[LeftDoubleBracket]", 
      RowBox[{"All", ",", 
       RowBox[{"{", 
        RowBox[{"2", ",", "3"}], "}"}]}], "\[RightDoubleBracket]"}]], 
    "\[Transpose]"}]}], ";", 
  RowBox[{"Print", "[", 
   RowBox[{"\"\<population weighted absolute rank difference \>\"", ",", 
    RowBox[{
     RowBox[{"Total", "[", 
      RowBox[{"a", ".", "b"}], "]"}], "/", 
     RowBox[{"Total", "[", "b", "]"}]}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"lm", "=", 
   RowBox[{"LinearModelFit", "[", 
    RowBox[{
     SubscriptBox["final", 
      RowBox[{"\[LeftDoubleBracket]", 
       RowBox[{"All", ",", 
        RowBox[{"{", 
         RowBox[{"2", ",", "3"}], "}"}]}], "\[RightDoubleBracket]"}]], ",", 
     "x", ",", "x"}], "]"}]}], ";", " ", 
  RowBox[{"g1", "=", 
   RowBox[{"ListPlot", "[", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"Tooltip", "[", 
        RowBox[{
         SubscriptBox["#", 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"{", 
            RowBox[{"3", ",", "2"}], "}"}], "\[RightDoubleBracket]"}]], ",", 
         SubscriptBox["#", 
          RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]]}], 
        "]"}], "&"}], "/@", "final"}], ",", 
     RowBox[{"PlotStyle", "->", "Gray"}], ",", "\[IndentingNewLine]", 
     RowBox[{"AxesLabel", "->", 
      RowBox[{"{", 
       RowBox[{"\"\<Income rank\>\"", ",", "\"\<Wellbeing rank\>\""}], 
       "}"}]}]}], "]"}]}], ";", " ", 
  RowBox[{"g2", "=", 
   RowBox[{"Plot", "[", 
    RowBox[{
     RowBox[{"lm", "[", "x", "]"}], ",", 
     RowBox[{"{", 
      RowBox[{"x", ",", "1", ",", 
       RowBox[{"Max", "@", 
        SubscriptBox["final", 
         RowBox[{"\[LeftDoubleBracket]", 
          RowBox[{"All", ",", 
           RowBox[{"{", 
            RowBox[{"2", ",", "3"}], "}"}]}], "\[RightDoubleBracket]"}]]}]}], 
      "}"}], ",", 
     RowBox[{"PlotStyle", "->", "Red"}]}], "]"}]}], ";", " ", 
  RowBox[{"g3", "=", 
   RowBox[{"Show", "[", 
    RowBox[{"g1", ",", "g2", ",", 
     RowBox[{"PlotLabel", "->", 
      RowBox[{"\"\<\!\(\*SuperscriptBox[\(R\), \(2\)]\) = \>\"", "<>", 
       RowBox[{"ToString", "@", 
        RowBox[{"Round", "[", 
         RowBox[{"100", " ", 
          RowBox[{"lm", "[", "\"\<RSquared\>\"", "]"}]}], "]"}]}], "<>", 
       "\"\<%\>\""}]}], ",", 
     RowBox[{"option2", "[", 
      RowBox[{"12", ",", "4"}], "]"}]}], "]"}]}], ";", " ", 
  RowBox[{"Export", "[", 
   RowBox[{
    RowBox[{"path", "<>", "\"\<fig1.pdf\>\""}], ",", "g3"}], "]"}], 
  ";"}]}], "Input",
 CellChangeTimes->{{3.906194016769758*^9, 3.906194022858047*^9}, {
  3.906194061708778*^9, 3.9061940704587383`*^9}, {3.906264170500124*^9, 
  3.906264176350417*^9}},
 CellLabel->
  "In[111]:=",ExpressionUUID->"1903d55b-9d13-4285-b0e1-b3d3af6d7b14"],

Cell[CellGroupData[{

Cell[BoxData[
 InterpretationBox[
  RowBox[{"\<\"Wold population coverage = \"\>", "\[InvisibleSpace]", 
   "97.92977374798075`", "\[InvisibleSpace]", "\<\"%\"\>"}],
  SequenceForm["Wold population coverage = ", 97.92977374798075, "%"],
  Editable->False]], "Print",
 CellChangeTimes->{
  3.906193909045013*^9, 3.906194025693677*^9, 3.906194071154475*^9, 
   3.906194177737445*^9, {3.906264126062085*^9, 3.906264152386065*^9}, 
   3.906264187664878*^9, 3.906264267675949*^9, 3.906265649603853*^9, 
   3.906289450490568*^9, 3.9062894917491302`*^9},
 CellLabel->
  "During evaluation of \
In[111]:=",ExpressionUUID->"b59d9cb2-324c-4475-b1f0-5f930f76f300"],

Cell[BoxData[
 InterpretationBox[
  RowBox[{"\<\"population weighted absolute rank difference \"\>", 
   "\[InvisibleSpace]", "13.949237711719045`"}],
  SequenceForm[
  "population weighted absolute rank difference ", 13.949237711719045`],
  Editable->False]], "Print",
 CellChangeTimes->{
  3.906193909045013*^9, 3.906194025693677*^9, 3.906194071154475*^9, 
   3.906194177737445*^9, {3.906264126062085*^9, 3.906264152386065*^9}, 
   3.906264187664878*^9, 3.906264267675949*^9, 3.906265649603853*^9, 
   3.906289450490568*^9, 3.90628949175988*^9},
 CellLabel->
  "During evaluation of \
In[111]:=",ExpressionUUID->"71ddc7b3-341b-42ff-a602-5fd3a7fc44c3"]
}, Open  ]]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"a", "=", 
    RowBox[{
     RowBox[{"Table", "[", 
      RowBox[{
       SubscriptBox[
        RowBox[{"Sort", "[", 
         SubscriptBox[
          RowBox[{"Take", "[", 
           RowBox[{"final", ",", 
            RowBox[{"{", 
             RowBox[{"i", ",", 
              RowBox[{"i", "+", "10"}]}], "}"}]}], "]"}], 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"All", ",", "3"}], "\[RightDoubleBracket]"}]], "]"}], 
        RowBox[{"\[LeftDoubleBracket]", 
         RowBox[{"{", 
          RowBox[{"1", ",", 
           RowBox[{"-", "1"}]}], "}"}], "\[RightDoubleBracket]"}]], ",", 
       RowBox[{"{", 
        RowBox[{"i", ",", "139"}], "}"}]}], "]"}], "\[Transpose]"}]}], ";", 
   RowBox[{"b", "=", 
    RowBox[{
     RowBox[{
      RowBox[{"LinearModelFit", "[", 
       RowBox[{"#", ",", "x", ",", "x"}], "]"}], "&"}], "/@", "a"}]}], ";"}], 
  
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"d", "=", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"{", 
          RowBox[{"#", ",", 
           RowBox[{
            SubscriptBox["b", 
             RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], 
            "@", "#"}]}], "}"}], "&"}], "/@", 
        RowBox[{"Range", "@", "150"}]}], ",", 
       RowBox[{
        RowBox[{
         RowBox[{"{", 
          RowBox[{"#", ",", 
           RowBox[{
            SubscriptBox["b", 
             RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], 
            "@", "#"}]}], "}"}], "&"}], "/@", 
        RowBox[{"Range", "@", "150"}]}]}], "}"}]}], ";", 
    RowBox[{"ListPlot", "[", 
     RowBox[{"Append", "[", 
      RowBox[{"d", ",", 
       SubscriptBox["final", 
        RowBox[{"\[LeftDoubleBracket]", 
         RowBox[{"All", ",", 
          RowBox[{"{", 
           RowBox[{"2", ",", "3"}], "}"}]}], "\[RightDoubleBracket]"}]]}], 
      "]"}], "]"}]}], "*)"}]}]], "Input",
 CellChangeTimes->{{3.906305841762657*^9, 3.9063060989931927`*^9}, {
  3.906306230700116*^9, 3.906306237367824*^9}, {3.9063064665398903`*^9, 
  3.906306522432232*^9}, {3.906306625686947*^9, 3.906306666939283*^9}},
 CellLabel->
  "In[252]:=",ExpressionUUID->"08050419-06ba-44bc-98f9-75c25128fd1c"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"test", "=", 
   RowBox[{"SortBy", "[", 
    RowBox[{"final", ",", 
     RowBox[{
      SubscriptBox["#", 
       RowBox[{"\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]], 
      "&"}]}], "]"}]}], ";", " ", 
  RowBox[{"d", "=", 
   RowBox[{
    RowBox[{"Table", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"a", "=", 
        SubscriptBox[
         RowBox[{"SortBy", "[", 
          RowBox[{
           RowBox[{"Take", "[", 
            RowBox[{"test", ",", 
             RowBox[{"{", 
              RowBox[{"i", ",", 
               RowBox[{"i", "+", "10"}]}], "}"}]}], "]"}], ",", 
           RowBox[{
            SubscriptBox["#", 
             RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], 
            "&"}]}], "]"}], 
         RowBox[{"\[LeftDoubleBracket]", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{"1", ",", "2"}], "}"}], ",", "1"}], 
          "\[RightDoubleBracket]"}]]}], ";", 
       RowBox[{"b", "=", 
        RowBox[{
         RowBox[{
          RowBox[{"Mean", "@", 
           SubscriptBox[
            RowBox[{"Select", "[", 
             RowBox[{
              RowBox[{"tab", "@", "#"}], ",", 
              RowBox[{
               RowBox[{"MemberQ", "[", 
                RowBox[{"a", ",", 
                 RowBox[{"First", "@", "#"}]}], "]"}], " ", "&"}]}], "]"}], 
            RowBox[{"\[LeftDoubleBracket]", 
             RowBox[{"All", ",", "2"}], "\[RightDoubleBracket]"}]]}], "&"}], "/@", 
         RowBox[{"{", 
          RowBox[{"1", ",", "2", ",", "3"}], "}"}]}]}], ";", " ", 
       RowBox[{"Prepend", "[", 
        RowBox[{"b", ",", 
         RowBox[{"Mean", "@", 
          SubscriptBox[
           RowBox[{"Select", "[", 
            RowBox[{"inko", ",", 
             RowBox[{
              RowBox[{"MemberQ", "[", 
               RowBox[{"a", ",", 
                RowBox[{"First", "@", "#"}]}], "]"}], "&"}]}], "]"}], 
           RowBox[{"\[LeftDoubleBracket]", 
            RowBox[{"All", ",", "2"}], "\[RightDoubleBracket]"}]]}]}], 
        "]"}]}], ",", 
      RowBox[{"{", 
       RowBox[{"i", ",", "139"}], "}"}]}], "]"}], "\[Transpose]"}]}], ";", 
  RowBox[{"b1", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"Prepend", "[", 
      RowBox[{
       RowBox[{"Round", "@", 
        RowBox[{"Rest", "@", "#"}]}], ",", 
       RowBox[{"100", " ", 
        RowBox[{"Round", "[", 
         RowBox[{
          SuperscriptBox["10", 
           RowBox[{"-", "5"}]], " ", 
          RowBox[{"2", "^", 
           RowBox[{"First", "@", "#"}]}]}], "]"}]}]}], "]"}], "&"}], "/@", 
    RowBox[{"Reverse", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"N", "[", 
        RowBox[{
         RowBox[{"a", "=", 
          RowBox[{"1", "+", 
           RowBox[{"14", 
            RowBox[{"(", " ", 
             RowBox[{"#", "-", "1"}], ")"}]}]}]}], ";", 
         RowBox[{
          RowBox[{
           RowBox[{
            RowBox[{"LinearModelFit", "[", 
             RowBox[{"#", ",", "x", ",", "x"}], "]"}], "@", "a"}], "&"}], "/@",
           "d"}]}], "]"}], "&"}], "/@", 
      RowBox[{"Range", "@", "10"}]}], "]"}]}]}], ";", 
  RowBox[{"d", "=", 
   RowBox[{
    RowBox[{"Table", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"a", "=", 
        SubscriptBox[
         RowBox[{"SortBy", "[", 
          RowBox[{
           RowBox[{"Take", "[", 
            RowBox[{"test", ",", 
             RowBox[{"{", 
              RowBox[{"i", ",", 
               RowBox[{"i", "+", "10"}]}], "}"}]}], "]"}], ",", 
           RowBox[{
            SubscriptBox["#", 
             RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], 
            "&"}]}], "]"}], 
         RowBox[{"\[LeftDoubleBracket]", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{
             RowBox[{"-", "1"}], ",", 
             RowBox[{"-", "2"}]}], "}"}], ",", "1"}], 
          "\[RightDoubleBracket]"}]]}], ";", 
       RowBox[{"b", "=", 
        RowBox[{
         RowBox[{
          RowBox[{"Mean", "@", 
           SubscriptBox[
            RowBox[{"Select", "[", 
             RowBox[{
              RowBox[{"tab", "@", "#"}], ",", 
              RowBox[{
               RowBox[{"MemberQ", "[", 
                RowBox[{"a", ",", 
                 RowBox[{"First", "@", "#"}]}], "]"}], " ", "&"}]}], "]"}], 
            RowBox[{"\[LeftDoubleBracket]", 
             RowBox[{"All", ",", "2"}], "\[RightDoubleBracket]"}]]}], "&"}], "/@", 
         RowBox[{"{", 
          RowBox[{"1", ",", "2", ",", "3"}], "}"}]}]}], ";", " ", 
       RowBox[{"Prepend", "[", 
        RowBox[{"b", ",", 
         RowBox[{"Mean", "@", 
          SubscriptBox[
           RowBox[{"Select", "[", 
            RowBox[{"inko", ",", 
             RowBox[{
              RowBox[{"MemberQ", "[", 
               RowBox[{"a", ",", 
                RowBox[{"First", "@", "#"}]}], "]"}], "&"}]}], "]"}], 
           RowBox[{"\[LeftDoubleBracket]", 
            RowBox[{"All", ",", "2"}], "\[RightDoubleBracket]"}]]}]}], 
        "]"}]}], ",", 
      RowBox[{"{", 
       RowBox[{"i", ",", "139"}], "}"}]}], "]"}], "\[Transpose]"}]}], ";", 
  RowBox[{"b2", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"Prepend", "[", 
      RowBox[{
       RowBox[{"Round", "@", 
        RowBox[{"Rest", "@", "#"}]}], ",", 
       RowBox[{"100", " ", 
        RowBox[{"Round", "[", 
         RowBox[{
          SuperscriptBox["10", 
           RowBox[{"-", "5"}]], " ", 
          RowBox[{"2", "^", 
           RowBox[{"First", "@", "#"}]}]}], "]"}]}]}], "]"}], "&"}], "/@", 
    RowBox[{"Reverse", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"N", "[", 
        RowBox[{
         RowBox[{"a", "=", 
          RowBox[{"1", "+", 
           RowBox[{"14", 
            RowBox[{"(", " ", 
             RowBox[{"#", "-", "1"}], ")"}]}]}]}], ";", 
         RowBox[{
          RowBox[{
           RowBox[{
            RowBox[{"LinearModelFit", "[", 
             RowBox[{"#", ",", "x", ",", "x"}], "]"}], "@", "a"}], "&"}], "/@",
           "d"}]}], "]"}], "&"}], "/@", 
      RowBox[{"Range", "@", "10"}]}], "]"}]}]}], ";", " ", 
  RowBox[{"b3", "=", 
   RowBox[{"Table", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       FractionBox[
        RowBox[{
         SubscriptBox["b1", 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"i", ",", "1"}], "\[RightDoubleBracket]"}]], "+", 
         SubscriptBox["b2", 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"i", ",", "1"}], "\[RightDoubleBracket]"}]]}], "2"], ",", 
       RowBox[{
        RowBox[{"ToString", "@", 
         SubscriptBox["b2", 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"i", ",", "2"}], "\[RightDoubleBracket]"}]]}], "<>", 
        "\"\<--\>\"", "<>", 
        RowBox[{"ToString", "@", 
         SubscriptBox["b1", 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"i", ",", "2"}], "\[RightDoubleBracket]"}]]}]}], ",", 
       RowBox[{
        RowBox[{"ToString", "@", 
         SubscriptBox["b2", 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"i", ",", "3"}], "\[RightDoubleBracket]"}]]}], "<>", 
        "\"\<--\>\"", "<>", 
        RowBox[{"ToString", "@", 
         SubscriptBox["b1", 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"i", ",", "3"}], "\[RightDoubleBracket]"}]]}]}], ",", 
       RowBox[{
        RowBox[{"ToString", "@", 
         SubscriptBox["b2", 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"i", ",", "4"}], "\[RightDoubleBracket]"}]]}], "<>", 
        "\"\<--\>\"", "<>", 
        RowBox[{"ToString", "@", 
         SubscriptBox["b1", 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"i", ",", "4"}], "\[RightDoubleBracket]"}]]}]}]}], "}"}], 
     ",", 
     RowBox[{"{", 
      RowBox[{"i", ",", "10"}], "}"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"b4", "=", 
   RowBox[{"Prepend", "[", 
    RowBox[{"b3", ",", 
     RowBox[{"{", 
      RowBox[{
      "\"\<Income\>\"", ",", "\"\<Happy(\\%)\>\"", ",", "\"\<Years@0\>\"", 
       ",", "\"\<Years@65\>\""}], "}"}]}], "]"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.906307058485363*^9, 3.906307086669834*^9}, 
   3.906307359631467*^9, {3.9063075005970163`*^9, 3.9063075545526047`*^9}, {
   3.906307774821103*^9, 3.9063078001944304`*^9}, {3.9063080322711887`*^9, 
   3.906308042030903*^9}, {3.906308563437416*^9, 3.906308569366087*^9}, {
   3.906308644437367*^9, 3.906308650709495*^9}, {3.906308762362187*^9, 
   3.906308769928035*^9}, {3.9063095133839607`*^9, 3.906309547694111*^9}, {
   3.906310328232183*^9, 3.906310337987495*^9}},
 CellLabel->
  "In[421]:=",ExpressionUUID->"3a62be79-cdfc-4b43-b618-cea8906a70e4"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"error", "=", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"0", ",", "1"}], "}"}], "+", 
    RowBox[{
     FractionBox["2.5", "100"], 
     RowBox[{"{", 
      RowBox[{"1", ",", 
       RowBox[{"-", "1"}]}], "}"}]}]}]}], ";", 
  RowBox[{"a", "=", 
   RowBox[{"First", "@", 
    RowBox[{"Differences", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"Quantile", "[", 
        RowBox[{
         SubscriptBox["inko", 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"All", ",", "2"}], "\[RightDoubleBracket]"}]], ",", "#"}], 
        "]"}], "&"}], "/@", "error"}], "]"}]}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Print", "[", 
   RowBox[{"\"\<income doubles \>\"", "<>", 
    RowBox[{"ToString", "@", 
     RowBox[{"Round", "@", "a"}]}], "<>", 
    "\"\< times from bottom to top country\\nwhen income doubles, a citizen \
gains \>\"", "<>", " ", 
    RowBox[{"ToString", "@", 
     RowBox[{"Round", "[", 
      RowBox[{
       RowBox[{"First", "@", 
        RowBox[{"Differences", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"Quantile", "[", 
            RowBox[{
             SubscriptBox[
              RowBox[{"tab", "[", "2", "]"}], 
              RowBox[{"\[LeftDoubleBracket]", 
               RowBox[{"All", ",", "2"}], "\[RightDoubleBracket]"}]], ",", 
             "#"}], "]"}], "&"}], "/@", "error"}], "]"}]}], "/", "a"}], 
      "]"}]}], "<>", "\"\< years of expected life at birth,\\n\>\"", "<>", 
    RowBox[{"ToString", "@", 
     RowBox[{"Round", "[", 
      RowBox[{"12", " ", 
       RowBox[{
        RowBox[{"First", "@", 
         RowBox[{"Differences", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"Quantile", "[", 
             RowBox[{
              SubscriptBox[
               RowBox[{"tab", "[", "3", "]"}], 
               RowBox[{"\[LeftDoubleBracket]", 
                RowBox[{"All", ",", "2"}], "\[RightDoubleBracket]"}]], ",", 
              "#"}], "]"}], "&"}], "/@", "error"}], "]"}]}], "/", "a"}]}], 
      "]"}]}], "<>", 
    "\"\< months of expected life at 65 and moves up one happiness level \
among \>\"", "<>", 
    RowBox[{"ToString", "@", 
     RowBox[{"Round", "[", 
      RowBox[{"1", "+", "a"}], "]"}]}], "<>", "\"\< possible\>\""}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"i", ".", "e", "."}], ",", " ", 
    RowBox[{
    "goes", " ", "up", " ", "one", " ", "notch", " ", "on", " ", "a", " ", 
     "1", " ", "to", " ", "10", " ", "happiness", " ", "scale"}]}], " ", 
   "*)"}]}]}], "Input",
 CellChangeTimes->{{3.8908264956442137`*^9, 3.8908265457723083`*^9}, {
   3.890826714578658*^9, 3.890826718315439*^9}, {3.8908268766968603`*^9, 
   3.8908269016867447`*^9}, {3.890826977108591*^9, 3.890827027643567*^9}, {
   3.8908272396931973`*^9, 3.8908272769316597`*^9}, {3.8908273300594187`*^9, 
   3.890827368082047*^9}, {3.890827678168688*^9, 3.8908276823884287`*^9}, {
   3.890827714984992*^9, 3.8908278557539186`*^9}, {3.890828074457799*^9, 
   3.890828227106415*^9}, {3.890828314442609*^9, 3.8908283633080378`*^9}, {
   3.89088147688855*^9, 3.8908814992396803`*^9}, 3.890881556594865*^9, {
   3.89088802601298*^9, 3.890888044323835*^9}, {3.9061306455036583`*^9, 
   3.906130647372979*^9}, {3.906130771750992*^9, 3.906130775665926*^9}, {
   3.9061317701324377`*^9, 3.906131773749851*^9}, 3.906131931859593*^9, 
   3.9061324841478157`*^9, {3.906132583327169*^9, 3.906132600730957*^9}, {
   3.906132639986785*^9, 3.906132654192506*^9}, {3.9061327548670177`*^9, 
   3.906132759502624*^9}, {3.906132913722508*^9, 3.906132999528219*^9}},
 CellLabel->
  "In[113]:=",ExpressionUUID->"aeb4a254-107f-4d61-bbbc-dfc6a037fd60"],

Cell[BoxData["\<\"income doubles 6 times from bottom to top country\\nwhen \
income doubles, a citizen gains 4 years of expected life at birth,\\n20 \
months of expected life at 65 and moves up one happiness level among 7 \
possible\"\>"], "Print",
 CellChangeTimes->{3.906184521930319*^9, 3.906184600335639*^9, 
  3.9061897475727663`*^9, 3.906190406106653*^9, 3.906190592993103*^9, 
  3.906193913372829*^9, 3.906194074231598*^9, 3.906194180790513*^9, 
  3.906264126829454*^9, 3.906264190825914*^9, 3.906264269382164*^9, 
  3.9062656514327087`*^9, 3.9062894511848783`*^9, 3.9062894929463987`*^9},
 CellLabel->
  "During evaluation of \
In[113]:=",ExpressionUUID->"2d98a788-e4c3-4d2b-b2f1-38925785ba00"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"wid1", "=", 
   RowBox[{"ToExpression", "@", 
    RowBox[{"Import", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\<data/wid.txt.bz2\>\""}], ",", 
      "\"\<Lines\>\""}], "]"}]}]}], ";", 
  RowBox[{"wid2", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       SubscriptBox["#", 
        RowBox[{"\[LeftDoubleBracket]", 
         RowBox[{"1", ",", "1"}], "\[RightDoubleBracket]"}]], ",", 
       RowBox[{
        RowBox[{"a", "=", 
         RowBox[{
          SuperscriptBox["10", 
           RowBox[{"-", "14"}]], " ", 
          SubscriptBox["#", 
           RowBox[{"\[LeftDoubleBracket]", 
            RowBox[{"1", ",", "2"}], "\[RightDoubleBracket]"}]], " ", 
          SubscriptBox["#", 
           RowBox[{
           "\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]]}]}], ";", 
        " ", 
        RowBox[{"Median", "@", "a"}]}], ",", 
       RowBox[{"Mean", "@", "a"}]}], " ", "}"}], "&"}], "/@", 
    RowBox[{"Select", "[", 
     RowBox[{"wid1", ",", 
      RowBox[{
       RowBox[{"NumberQ", "@", 
        SubscriptBox["#", 
         RowBox[{"\[LeftDoubleBracket]", 
          RowBox[{"1", ",", "2"}], "\[RightDoubleBracket]"}]]}], "&"}]}], 
     "]"}]}]}], ";", 
  RowBox[{"wid3", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       SubscriptBox["#", 
        RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], ",", 
       
       RowBox[{
        SubscriptBox["#", 
         RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], "/", 
        SubscriptBox["#", 
         RowBox[{"\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]]}]}], 
      "}"}], "&"}], "/@", "wid2"}]}], ";", " ", 
  RowBox[{"Print", "[", 
   RowBox[{
   "\"\<correlation for mean vs median \>\"", ",", "\[IndentingNewLine]", 
    RowBox[{"First", "@", 
     RowBox[{"Last", "@", 
      RowBox[{"Correlation", "@", 
       RowBox[{"Select", "[", 
        RowBox[{
         SubscriptBox["wid2", 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"All", ",", 
            RowBox[{"{", 
             RowBox[{"2", ",", "3"}], "}"}]}], "\[RightDoubleBracket]"}]], 
         ",", 
         RowBox[{
          RowBox[{
           RowBox[{"Total", "@", "#"}], ">", "0"}], "&"}]}], "]"}]}]}]}]}], 
   "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"wid4", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       SubscriptBox["#", 
        RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], ",", 
       
       RowBox[{".001", " ", 
        RowBox[{
         SubscriptBox["#", 
          RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], 
         "/", 
         SubscriptBox["#", 
          RowBox[{
          "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]]}]}]}], 
      "}"}], "&"}], "/@", 
    RowBox[{"merger", "[", 
     RowBox[{"gni2", ",", "popo"}], "]"}]}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"inka", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       SubscriptBox["#", 
        RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], ",", 
       
       RowBox[{"Log", "[", 
        RowBox[{"2.", ",", 
         RowBox[{
          SubscriptBox["#", 
           RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], 
          " ", 
          SubscriptBox["#", 
           RowBox[{
           "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]]}]}], 
        "]"}]}], " ", "}"}], "&"}], "/@", 
    RowBox[{"Select", "[", 
     RowBox[{
      RowBox[{"merge", "[", 
       RowBox[{"wid4", ",", "wid3"}], "]"}], ",", 
      RowBox[{
       RowBox[{
        RowBox[{"Last", "@", "#"}], ">", "0"}], "&"}]}], "]"}]}]}], ";", " ", 
  
  RowBox[{"dispo", "=", 
   RowBox[{"Intersection", "[", 
    RowBox[{
     SubscriptBox["inka", 
      RowBox[{"\[LeftDoubleBracket]", 
       RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]], ",", 
     SubscriptBox["hapi", 
      RowBox[{"\[LeftDoubleBracket]", 
       RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]]}], "]"}]}], ";", 
  " ", 
  RowBox[{"(*", " ", 
   RowBox[{"fewer", " ", "countries"}], " ", "*)"}], 
  RowBox[{"Length", "@", "dispo"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"a", "=", 
   RowBox[{"SortBy", "[", 
    RowBox[{
     RowBox[{"Select", "[", 
      RowBox[{"inka", ",", 
       RowBox[{
        RowBox[{"MemberQ", "[", 
         RowBox[{"dispo", ",", 
          RowBox[{"First", "@", "#"}]}], "]"}], "&"}]}], "]"}], ",", 
     RowBox[{
      RowBox[{"-", 
       RowBox[{"Last", "@", "#"}]}], "&"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"mony", "=", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      SubscriptBox["a", 
       RowBox[{"\[LeftDoubleBracket]", 
        RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]], ",", 
      RowBox[{"Range", "@", 
       RowBox[{"Length", "@", "a"}]}]}], "}"}], "\[Transpose]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"a", "=", 
   RowBox[{"SortBy", "[", 
    RowBox[{
     RowBox[{"Select", "[", 
      RowBox[{"hapi", ",", 
       RowBox[{
        RowBox[{"MemberQ", "[", 
         RowBox[{"dispo", ",", 
          RowBox[{"First", "@", "#"}]}], "]"}], "&"}]}], "]"}], ",", 
     RowBox[{
      RowBox[{"-", 
       RowBox[{"Last", "@", "#"}]}], "&"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"welf", "=", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      SubscriptBox["a", 
       RowBox[{"\[LeftDoubleBracket]", 
        RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]], ",", 
      RowBox[{"Range", "@", 
       RowBox[{"Length", "@", "a"}]}]}], "}"}], "\[Transpose]"}]}], ";", 
  RowBox[{"finul", "=", 
   RowBox[{"SortBy", "[", 
    RowBox[{
     RowBox[{"merge", "[", 
      RowBox[{"welf", ",", "mony"}], "]"}], ",", 
     RowBox[{
      SubscriptBox["#", 
       RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], 
      "&"}]}], "]"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.9061334542113323`*^9, 3.906133472467894*^9}, {
   3.906133577140341*^9, 3.906133602017708*^9}, {3.9061336710237017`*^9, 
   3.906133679441166*^9}, {3.906133744648512*^9, 3.906133769136126*^9}, {
   3.906133804215762*^9, 3.906133875970813*^9}, {3.9061339177017527`*^9, 
   3.906133925545992*^9}, {3.906133969593233*^9, 3.906133998982985*^9}, {
   3.906184340877687*^9, 3.906184341242044*^9}, {3.906190387056015*^9, 
   3.906190393305519*^9}, {3.906190889092311*^9, 3.906190911650137*^9}, 
   3.9061909756879177`*^9, 3.9061910121842613`*^9, {3.906191057104176*^9, 
   3.9061911007996893`*^9}, {3.9061911841348333`*^9, 
   3.9061912037130613`*^9}, {3.906191275765444*^9, 3.9061912902583723`*^9}, 
   3.9061935763432693`*^9, {3.906193716360279*^9, 3.906193746306457*^9}, 
   3.9061938497635937`*^9, {3.906193931992256*^9, 3.906193942821869*^9}, {
   3.9062673802168007`*^9, 3.906267386142901*^9}, {3.9062896381799173`*^9, 
   3.9062896416184893`*^9}, {3.906289972865675*^9, 3.9062899778873167`*^9}},
 CellLabel->
  "In[140]:=",ExpressionUUID->"5bd6550a-4da6-4ebb-a959-9b58ad74943b"],

Cell[BoxData[
 InterpretationBox[
  RowBox[{"\<\"correlation for mean vs median \"\>", "\[InvisibleSpace]", 
   "0.9426173939926272`"}],
  SequenceForm["correlation for mean vs median ", 0.9426173939926272],
  Editable->False]], "Print",
 CellChangeTimes->{{3.906289633901147*^9, 3.906289643913254*^9}, 
   3.9062899850250893`*^9},
 CellLabel->
  "During evaluation of \
In[140]:=",ExpressionUUID->"ba42fc7c-1c5a-4d60-94bb-e80d5e8dc6a9"],

Cell[BoxData["145"], "Output",
 CellChangeTimes->{3.906264271643681*^9, 3.906265653969914*^9, 
  3.906267388149086*^9, 3.9062894524565897`*^9, 3.906289497177109*^9, 
  3.9062896439745703`*^9, 3.906289985098057*^9},
 CellLabel->
  "Out[142]=",ExpressionUUID->"579de38e-5072-4d3f-81a5-548961ccbacc"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"b", "=", 
   RowBox[{"Select", "[", 
    RowBox[{"wid2", ",", 
     RowBox[{
      RowBox[{
       RowBox[{"Total", "@", 
        RowBox[{"Rest", "@", "#"}]}], ">", "0"}], "&"}]}], "]"}]}], ";", " ", 
  
  RowBox[{"a", "=", 
   RowBox[{"SortBy", "[", 
    RowBox[{"b", ",", 
     RowBox[{
      RowBox[{"-", 
       SubscriptBox["#", 
        RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]]}], 
      "&"}]}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"b1", "=", 
   RowBox[{"(*", 
    RowBox[{"median", " ", "rank"}], "*)"}], 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      SubscriptBox["a", 
       RowBox[{"\[LeftDoubleBracket]", 
        RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]], ",", 
      RowBox[{"Range", "@", 
       RowBox[{"Length", "@", "a"}]}]}], "}"}], "\[Transpose]"}]}], ";", 
  RowBox[{"a", "=", 
   RowBox[{"SortBy", "[", 
    RowBox[{"b", ",", 
     RowBox[{
      RowBox[{"-", 
       SubscriptBox["#", 
        RowBox[{"\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]]}], 
      "&"}]}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"b2", "=", 
   RowBox[{"(*", 
    RowBox[{"mean", " ", "rank"}], "*)"}], 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      SubscriptBox["a", 
       RowBox[{"\[LeftDoubleBracket]", 
        RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]], ",", 
      RowBox[{"Range", "@", 
       RowBox[{"Length", "@", "a"}]}]}], "}"}], "\[Transpose]"}]}], ";", " ", 
  
  RowBox[{"b3", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       SubscriptBox["#", 
        RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], ",", 
       
       RowBox[{"N", "@", 
        RowBox[{"Abs", "[", 
         RowBox[{
          SubscriptBox["#", 
           RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], 
          "-", 
          SubscriptBox["#", 
           RowBox[{"\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]]}], 
         "]"}]}]}], "}"}], "&"}], "/@", 
    RowBox[{"merge", "[", 
     RowBox[{"b2", ",", "b1"}], "]"}]}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"popa", "=", 
   SubscriptBox[
    RowBox[{"Select", "[", 
     RowBox[{"p1", ",", 
      RowBox[{
       RowBox[{"MemberQ", "[", 
        RowBox[{
         SubscriptBox["b3", 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]], ",", 
         RowBox[{"First", "@", "#"}]}], "]"}], "&"}]}], "]"}], 
    RowBox[{"\[LeftDoubleBracket]", 
     RowBox[{"All", ",", 
      RowBox[{"{", 
       RowBox[{"1", ",", "3"}], "}"}]}], "\[RightDoubleBracket]"}]]}], ";", 
  " ", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"a", ",", "b"}], "}"}], "=", 
   RowBox[{
    SubscriptBox[
     RowBox[{"merge", "[", 
      RowBox[{"b3", ",", "popa"}], "]"}], 
     RowBox[{"\[LeftDoubleBracket]", 
      RowBox[{"All", ",", 
       RowBox[{"{", 
        RowBox[{"2", ",", "3"}], "}"}]}], "\[RightDoubleBracket]"}]], 
    "\[Transpose]"}]}], ";", 
  RowBox[{"Print", "[", 
   RowBox[{
   "\"\<mean vs median population weighted absolute rank difference \>\"", 
    ",", 
    RowBox[{
     RowBox[{"Total", "[", 
      RowBox[{"a", ".", "b"}], "]"}], "/", 
     RowBox[{"Total", "[", "b", "]"}]}]}], "]"}]}]}], "Input",
 CellChangeTimes->{{3.906290034083123*^9, 3.9062901345662537`*^9}, {
  3.906290181306738*^9, 3.906290181973157*^9}, {3.90629021725453*^9, 
  3.906290245979252*^9}, {3.906305644187071*^9, 3.906305655706688*^9}, {
  3.9063057021129208`*^9, 3.906305712868738*^9}},
 CellLabel->
  "In[187]:=",ExpressionUUID->"6569ad35-4fa9-47e4-b6d0-f86dce238bbc"],

Cell[BoxData[
 InterpretationBox[
  RowBox[{"\<\"mean vs median population weighted absolute rank difference \"\
\>", "\[InvisibleSpace]", "4.664563983435397`"}],
  SequenceForm[
  "mean vs median population weighted absolute rank difference ", 
   4.664563983435397],
  Editable->False]], "Print",
 CellChangeTimes->{{3.906290242120328*^9, 3.9062902467009363`*^9}, 
   3.906305716419887*^9},
 CellLabel->
  "During evaluation of \
In[187]:=",ExpressionUUID->"6ce5abf4-7d3c-4ce1-88e9-eb7eee61475a"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"Print", "[", 
   RowBox[{"\"\<Wold population coverage = \>\"", ",", 
    RowBox[{"100", " ", 
     RowBox[{
      RowBox[{"Total", "@", 
       SubscriptBox[
        RowBox[{"Select", "[", 
         RowBox[{"p1", ",", 
          RowBox[{
           RowBox[{"MemberQ", "[", 
            RowBox[{
             SubscriptBox["finul", 
              RowBox[{"\[LeftDoubleBracket]", 
               RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]], ",", 
             RowBox[{"First", "@", "#"}]}], "]"}], "&"}]}], "]"}], 
        RowBox[{"\[LeftDoubleBracket]", 
         RowBox[{"All", ",", "3"}], "\[RightDoubleBracket]"}]]}], "/", 
      "\[Theta]"}]}], ",", "\"\<%\>\""}], "]"}], ";", " ", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"a", ",", "b"}], "}"}], "=", 
   RowBox[{
    SubscriptBox[
     RowBox[{"merge", "[", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           SubscriptBox["#", 
            RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], 
           ",", 
           RowBox[{"N", "@", 
            RowBox[{"Abs", "[", 
             RowBox[{
              SubscriptBox["#", 
               RowBox[{
               "\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], "-", 
              SubscriptBox["#", 
               RowBox[{
               "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]]}], 
             "]"}]}]}], "}"}], "&"}], "/@", "finul"}], ",", 
       "\[IndentingNewLine]", 
       SubscriptBox[
        RowBox[{"Select", "[", 
         RowBox[{"p1", ",", 
          RowBox[{
           RowBox[{"MemberQ", "[", 
            RowBox[{
             SubscriptBox["finul", 
              RowBox[{"\[LeftDoubleBracket]", 
               RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]], ",", 
             RowBox[{"First", "@", "#"}]}], "]"}], "&"}]}], "]"}], 
        RowBox[{"\[LeftDoubleBracket]", 
         RowBox[{"All", ",", 
          RowBox[{"{", 
           RowBox[{"1", ",", "3"}], "}"}]}], "\[RightDoubleBracket]"}]]}], 
      "]"}], 
     RowBox[{"\[LeftDoubleBracket]", 
      RowBox[{"All", ",", 
       RowBox[{"{", 
        RowBox[{"2", ",", "3"}], "}"}]}], "\[RightDoubleBracket]"}]], 
    "\[Transpose]"}]}], ";", 
  RowBox[{"Print", "[", 
   RowBox[{"\"\<population weighted absolute rank difference \>\"", ",", 
    RowBox[{
     RowBox[{"Total", "[", 
      RowBox[{"a", ".", "b"}], "]"}], "/", 
     RowBox[{"Total", "[", "b", "]"}]}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"lm", "=", 
   RowBox[{"LinearModelFit", "[", 
    RowBox[{
     SubscriptBox["finul", 
      RowBox[{"\[LeftDoubleBracket]", 
       RowBox[{"All", ",", 
        RowBox[{"{", 
         RowBox[{"2", ",", "3"}], "}"}]}], "\[RightDoubleBracket]"}]], ",", 
     "x", ",", "x"}], "]"}]}], ";", " ", 
  RowBox[{"Print", "[", 
   RowBox[{"\"\<\!\(\*SuperscriptBox[\(R\), \(2\)]\) = \>\"", ",", 
    RowBox[{"lm", "[", "\"\<RSquared\>\"", "]"}]}], "]"}], ";", " ", 
  RowBox[{"error", "=", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"0", ",", "1"}], "}"}], "+", 
    RowBox[{
     FractionBox["2.5", "100"], 
     RowBox[{"{", 
      RowBox[{"1", ",", 
       RowBox[{"-", "1"}]}], "}"}]}]}]}], ";", 
  RowBox[{"a", "=", 
   RowBox[{"First", "@", 
    RowBox[{"Differences", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"Quantile", "[", 
        RowBox[{
         SubscriptBox["inka", 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"All", ",", "2"}], "\[RightDoubleBracket]"}]], ",", "#"}], 
        "]"}], "&"}], "/@", "error"}], "]"}]}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Print", "[", 
   RowBox[{"\"\<income doubles \>\"", "<>", 
    RowBox[{"ToString", "@", 
     RowBox[{"Round", "@", "a"}]}], "<>", 
    "\"\< times from bottom to top country\\nwhen income doubles, a citizen \
gains \>\"", "<>", " ", 
    RowBox[{"ToString", "@", 
     RowBox[{"Round", "[", 
      RowBox[{
       RowBox[{"First", "@", 
        RowBox[{"Differences", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"Quantile", "[", 
            RowBox[{
             SubscriptBox[
              RowBox[{"tab", "[", "2", "]"}], 
              RowBox[{"\[LeftDoubleBracket]", 
               RowBox[{"All", ",", "2"}], "\[RightDoubleBracket]"}]], ",", 
             "#"}], "]"}], "&"}], "/@", "error"}], "]"}]}], "/", "a"}], 
      "]"}]}], "<>", "\"\< years of expected life at birth,\\n\>\"", "<>", 
    RowBox[{"ToString", "@", 
     RowBox[{"Round", "[", 
      RowBox[{"12", " ", 
       RowBox[{
        RowBox[{"First", "@", 
         RowBox[{"Differences", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"Quantile", "[", 
             RowBox[{
              SubscriptBox[
               RowBox[{"tab", "[", "3", "]"}], 
               RowBox[{"\[LeftDoubleBracket]", 
                RowBox[{"All", ",", "2"}], "\[RightDoubleBracket]"}]], ",", 
              "#"}], "]"}], "&"}], "/@", "error"}], "]"}]}], "/", "a"}]}], 
      "]"}]}], "<>", 
    "\"\< months of expected life at 65 and moves up one happiness level \
among \>\"", "<>", 
    RowBox[{"ToString", "@", 
     RowBox[{"Round", "[", 
      RowBox[{"1", "+", "a"}], "]"}]}], "<>", "\"\< possible\>\""}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"i", ".", "e", "."}], ",", " ", 
    RowBox[{
    "goes", " ", "up", " ", "one", " ", "notch", " ", "on", " ", "a", " ", 
     "1", " ", "to", " ", "10", " ", "happiness", " ", "scale"}]}], " ", 
   "*)"}]}]}], "Input",
 CellChangeTimes->{
  3.906191054355548*^9, {3.9061910931111593`*^9, 3.9061910967476473`*^9}, 
   3.90619119308322*^9, 3.906191333209908*^9, {3.9061913734298487`*^9, 
   3.906191385143763*^9}, {3.906193974694953*^9, 3.906194005960547*^9}, {
   3.906194036435628*^9, 3.906194047427305*^9}, {3.906194078671253*^9, 
   3.906194096750264*^9}, {3.906194133941545*^9, 3.906194134353567*^9}, {
   3.906267335381194*^9, 3.906267347942135*^9}, {3.9063056735824003`*^9, 
   3.906305680025509*^9}, {3.906305737347229*^9, 
   3.9063057664659147`*^9}},ExpressionUUID->"23c57506-8a66-4265-b9fc-\
1499453dfdb2"],

Cell[CellGroupData[{

Cell[BoxData[
 InterpretationBox[
  RowBox[{"\<\"Wold population coverage = \"\>", "\[InvisibleSpace]", 
   "97.79838281250869`", "\[InvisibleSpace]", "\<\"%\"\>"}],
  SequenceForm["Wold population coverage = ", 97.79838281250869, "%"],
  Editable->False]], "Print",
 CellChangeTimes->{{3.9061339909979897`*^9, 3.906134001402644*^9}, {
   3.906183287738398*^9, 3.906183299432269*^9}, 3.906184346313011*^9, 
   3.906189748842348*^9, 3.906189906635777*^9, {3.9061903971368437`*^9, 
   3.906190407387515*^9}, 3.906190595845961*^9, {3.9061907538257027`*^9, 
   3.9061907741384583`*^9}, 3.906190841017425*^9, 3.906191334229578*^9, 
   3.9061913861108828`*^9, 3.906193975969091*^9, 3.9061940373853197`*^9, {
   3.906194079305066*^9, 3.9061940974502897`*^9}, 3.906194135564334*^9, 
   3.906194186698141*^9, 3.906264128347323*^9, 3.9062642728471813`*^9, 
   3.906265654151701*^9, 3.906267357978632*^9, 3.9062673893704433`*^9, 
   3.906289452581353*^9, 3.9063057565273333`*^9},
 CellLabel->
  "During evaluation of \
In[191]:=",ExpressionUUID->"61088d7d-53c3-47cb-b0fc-7e0e6b1e414b"],

Cell[BoxData[
 InterpretationBox[
  RowBox[{"\<\"population weighted absolute rank difference \"\>", 
   "\[InvisibleSpace]", "14.818897694367326`"}],
  SequenceForm[
  "population weighted absolute rank difference ", 14.818897694367326`],
  Editable->False]], "Print",
 CellChangeTimes->{{3.9061339909979897`*^9, 3.906134001402644*^9}, {
   3.906183287738398*^9, 3.906183299432269*^9}, 3.906184346313011*^9, 
   3.906189748842348*^9, 3.906189906635777*^9, {3.9061903971368437`*^9, 
   3.906190407387515*^9}, 3.906190595845961*^9, {3.9061907538257027`*^9, 
   3.9061907741384583`*^9}, 3.906190841017425*^9, 3.906191334229578*^9, 
   3.9061913861108828`*^9, 3.906193975969091*^9, 3.9061940373853197`*^9, {
   3.906194079305066*^9, 3.9061940974502897`*^9}, 3.906194135564334*^9, 
   3.906194186698141*^9, 3.906264128347323*^9, 3.9062642728471813`*^9, 
   3.906265654151701*^9, 3.906267357978632*^9, 3.9062673893704433`*^9, 
   3.906289452581353*^9, 3.9063057565474777`*^9},
 CellLabel->
  "During evaluation of \
In[191]:=",ExpressionUUID->"e935b419-9b8d-49e4-bd63-e24b15163f61"],

Cell[BoxData[
 InterpretationBox[
  RowBox[{"\<\"\\!\\(\\*SuperscriptBox[\\(R\\), \\(2\\)]\\) \"\>", 
   "\[InvisibleSpace]", "0.8239185182193588`"}],
  SequenceForm["\!\(\*SuperscriptBox[\(R\), \(2\)]\) ", 0.8239185182193588],
  Editable->False]], "Print",
 CellChangeTimes->{{3.9061339909979897`*^9, 3.906134001402644*^9}, {
   3.906183287738398*^9, 3.906183299432269*^9}, 3.906184346313011*^9, 
   3.906189748842348*^9, 3.906189906635777*^9, {3.9061903971368437`*^9, 
   3.906190407387515*^9}, 3.906190595845961*^9, {3.9061907538257027`*^9, 
   3.9061907741384583`*^9}, 3.906190841017425*^9, 3.906191334229578*^9, 
   3.9061913861108828`*^9, 3.906193975969091*^9, 3.9061940373853197`*^9, {
   3.906194079305066*^9, 3.9061940974502897`*^9}, 3.906194135564334*^9, 
   3.906194186698141*^9, 3.906264128347323*^9, 3.9062642728471813`*^9, 
   3.906265654151701*^9, 3.906267357978632*^9, 3.9062673893704433`*^9, 
   3.906289452581353*^9, 3.906305756550956*^9},
 CellLabel->
  "During evaluation of \
In[191]:=",ExpressionUUID->"f8e5b6f8-b5e8-4b73-8d97-f8e68f9e4e5a"],

Cell[BoxData["\<\"income doubles 7 times from bottom to top country\\nwhen \
income doubles, a citizen gains 4 years of expected life at birth,\\n18 \
months of expected life at 65 and moves up one happiness level among 8 \
possible\"\>"], "Print",
 CellChangeTimes->{{3.9061339909979897`*^9, 3.906134001402644*^9}, {
   3.906183287738398*^9, 3.906183299432269*^9}, 3.906184346313011*^9, 
   3.906189748842348*^9, 3.906189906635777*^9, {3.9061903971368437`*^9, 
   3.906190407387515*^9}, 3.906190595845961*^9, {3.9061907538257027`*^9, 
   3.9061907741384583`*^9}, 3.906190841017425*^9, 3.906191334229578*^9, 
   3.9061913861108828`*^9, 3.906193975969091*^9, 3.9061940373853197`*^9, {
   3.906194079305066*^9, 3.9061940974502897`*^9}, 3.906194135564334*^9, 
   3.906194186698141*^9, 3.906264128347323*^9, 3.9062642728471813`*^9, 
   3.906265654151701*^9, 3.906267357978632*^9, 3.9062673893704433`*^9, 
   3.906289452581353*^9, 3.9063057565533867`*^9},
 CellLabel->
  "During evaluation of \
In[191]:=",ExpressionUUID->"cc2d54e5-b061-4797-b7b8-a595d6aabbd0"]
}, Open  ]]
}, Open  ]],

Cell[BoxData[{
 RowBox[{
  RowBox[{"tito", "=", 
   RowBox[{"{", 
    RowBox[{
    "\"\<Underachiever\>\"", ",", "\"\<Ranks\>\"", ",", "\"\<Income\>\"", 
     ",", "\"\<Happy(\\%)\>\"", ",", "\"\<Years@0\>\"", ",", 
     "\"\<Years@65\>\""}], "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"tita", "=", 
   RowBox[{"{", 
    RowBox[{
    "\"\<Overachiever\>\"", ",", "\"\<Ranks\>\"", ",", "\"\<Income\>\"", ",", 
     "\"\<Happy(\\%)\>\"", ",", "\"\<Years@0\>\"", ",", "\"\<Years@65\>\""}], 
    "}"}]}], ";", 
  RowBox[{"a", "=", 
   RowBox[{"SortBy", "[", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         SubscriptBox["#", 
          RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], 
         ",", 
         RowBox[{
          SubscriptBox["#", 
           RowBox[{"\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]], 
          "-", 
          SubscriptBox["#", 
           RowBox[{
           "\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]]}]}], "}"}],
        "&"}], "/@", "final"}], ",", 
     RowBox[{
      RowBox[{"Last", "@", "#"}], "&"}]}], "]"}]}], ";", 
  RowBox[{"b", "=", 
   RowBox[{"Table", "[", 
    RowBox[{
     RowBox[{"Join", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         SubscriptBox[
          RowBox[{"Select", "[", 
           RowBox[{"p1", ",", 
            RowBox[{
             RowBox[{
              SubscriptBox["a", 
               RowBox[{"\[LeftDoubleBracket]", 
                RowBox[{"i", ",", "1"}], "\[RightDoubleBracket]"}]], "==", 
              RowBox[{"First", "@", "#"}]}], "&"}]}], "]"}], 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"1", ",", "2"}], "\[RightDoubleBracket]"}]], ",", 
         RowBox[{"ToString", "@", 
          SubscriptBox["a", 
           RowBox[{"\[LeftDoubleBracket]", 
            RowBox[{"i", ",", "2"}], "\[RightDoubleBracket]"}]]}], ",", 
         RowBox[{"ToString", "@", 
          RowBox[{"Round", "[", 
           RowBox[{
            SuperscriptBox["10", 
             RowBox[{"-", "3"}]], 
            RowBox[{"2", "^", 
             SubscriptBox[
              RowBox[{"Select", "[", 
               RowBox[{"inko", ",", "\[IndentingNewLine]", 
                RowBox[{
                 RowBox[{
                  SubscriptBox["a", 
                   RowBox[{"\[LeftDoubleBracket]", 
                    RowBox[{"i", ",", "1"}], "\[RightDoubleBracket]"}]], "==", 
                  RowBox[{"First", "@", "#"}]}], "&"}]}], "]"}], 
              RowBox[{"\[LeftDoubleBracket]", 
               RowBox[{"1", ",", 
                RowBox[{"-", "1"}]}], "\[RightDoubleBracket]"}]]}]}], 
           "]"}]}]}], "}"}], ",", 
       RowBox[{
        RowBox[{
         SubscriptBox[
          RowBox[{"Select", "[", 
           RowBox[{
            RowBox[{"tab", "@", "#"}], ",", 
            RowBox[{
             RowBox[{
              SubscriptBox["a", 
               RowBox[{"\[LeftDoubleBracket]", 
                RowBox[{"i", ",", "1"}], "\[RightDoubleBracket]"}]], "==", 
              RowBox[{"First", "@", "#"}]}], "&"}]}], "]"}], 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"1", ",", 
            RowBox[{"-", "1"}]}], "\[RightDoubleBracket]"}]], "&"}], "/@", 
        RowBox[{"{", 
         RowBox[{"1", ",", "2", ",", "3"}], "}"}]}]}], "]"}], ",", 
     RowBox[{"{", 
      RowBox[{"i", ",", "5"}], "}"}]}], "]"}]}], ";", 
  RowBox[{"x1", "=", 
   RowBox[{"Prepend", "[", 
    RowBox[{
     RowBox[{"virgil", "[", 
      RowBox[{"b", ",", "1"}], "]"}], ",", "tito"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"b", "=", 
   RowBox[{"Table", "[", 
    RowBox[{
     RowBox[{"Join", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         SubscriptBox[
          RowBox[{"Select", "[", 
           RowBox[{"p1", ",", 
            RowBox[{
             RowBox[{
              SubscriptBox["a", 
               RowBox[{"\[LeftDoubleBracket]", 
                RowBox[{
                 RowBox[{"-", "i"}], ",", "1"}], "\[RightDoubleBracket]"}]], "==", 
              RowBox[{"First", "@", "#"}]}], "&"}]}], "]"}], 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"1", ",", "2"}], "\[RightDoubleBracket]"}]], ",", 
         RowBox[{"ToString", "@", 
          SubscriptBox["a", 
           RowBox[{"\[LeftDoubleBracket]", 
            RowBox[{
             RowBox[{"-", "i"}], ",", "2"}], "\[RightDoubleBracket]"}]]}], 
         ",", 
         RowBox[{"ToString", "@", 
          RowBox[{"Round", "[", 
           RowBox[{
            SuperscriptBox["10", 
             RowBox[{"-", "3"}]], 
            RowBox[{"2", "^", 
             SubscriptBox[
              RowBox[{"Select", "[", 
               RowBox[{"inko", ",", "\[IndentingNewLine]", 
                RowBox[{
                 RowBox[{
                  SubscriptBox["a", 
                   RowBox[{"\[LeftDoubleBracket]", 
                    RowBox[{
                    RowBox[{"-", "i"}], ",", "1"}], 
                    "\[RightDoubleBracket]"}]], "==", 
                  RowBox[{"First", "@", "#"}]}], "&"}]}], "]"}], 
              RowBox[{"\[LeftDoubleBracket]", 
               RowBox[{"1", ",", 
                RowBox[{"-", "1"}]}], "\[RightDoubleBracket]"}]]}]}], 
           "]"}]}]}], "}"}], ",", 
       RowBox[{
        RowBox[{
         SubscriptBox[
          RowBox[{"Select", "[", 
           RowBox[{
            RowBox[{"tab", "@", "#"}], ",", 
            RowBox[{
             RowBox[{
              SubscriptBox["a", 
               RowBox[{"\[LeftDoubleBracket]", 
                RowBox[{
                 RowBox[{"-", "i"}], ",", "1"}], "\[RightDoubleBracket]"}]], "==", 
              RowBox[{"First", "@", "#"}]}], "&"}]}], "]"}], 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"1", ",", 
            RowBox[{"-", "1"}]}], "\[RightDoubleBracket]"}]], "&"}], "/@", 
        RowBox[{"{", 
         RowBox[{"1", ",", "2", ",", "3"}], "}"}]}]}], "]"}], ",", 
     RowBox[{"{", 
      RowBox[{"i", ",", "5"}], "}"}]}], "]"}]}], ";", 
  RowBox[{"x2", "=", 
   RowBox[{"Prepend", "[", 
    RowBox[{
     RowBox[{"virgil", "[", 
      RowBox[{"b", ",", "1"}], "]"}], ",", "tita"}], "]"}]}], ";", " ", 
  RowBox[{"x3", "=", 
   RowBox[{"Join", "[", 
    RowBox[{"x1", ",", "x2"}], "]"}]}], ";", " ", 
  RowBox[{"a", "=", 
   RowBox[{"SortBy", "[", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         SubscriptBox["#", 
          RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], 
         ",", 
         RowBox[{
          SubscriptBox["#", 
           RowBox[{"\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]], 
          "-", 
          SubscriptBox["#", 
           RowBox[{
           "\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]]}]}], "}"}],
        "&"}], "/@", "finul"}], ",", 
     RowBox[{
      RowBox[{"Last", "@", "#"}], "&"}]}], "]"}]}], ";", 
  RowBox[{"b", "=", 
   RowBox[{"Table", "[", 
    RowBox[{
     RowBox[{"Join", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         SubscriptBox[
          RowBox[{"Select", "[", 
           RowBox[{"p1", ",", 
            RowBox[{
             RowBox[{
              SubscriptBox["a", 
               RowBox[{"\[LeftDoubleBracket]", 
                RowBox[{"i", ",", "1"}], "\[RightDoubleBracket]"}]], "==", 
              RowBox[{"First", "@", "#"}]}], "&"}]}], "]"}], 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"1", ",", "2"}], "\[RightDoubleBracket]"}]], ",", 
         RowBox[{"ToString", "@", 
          SubscriptBox["a", 
           RowBox[{"\[LeftDoubleBracket]", 
            RowBox[{"i", ",", "2"}], "\[RightDoubleBracket]"}]]}], ",", 
         RowBox[{"ToString", "@", 
          RowBox[{"Round", "[", 
           RowBox[{
            SuperscriptBox["10", 
             RowBox[{"-", "3"}]], 
            RowBox[{"2", "^", 
             SubscriptBox[
              RowBox[{"Select", "[", 
               RowBox[{"inko", ",", "\[IndentingNewLine]", 
                RowBox[{
                 RowBox[{
                  SubscriptBox["a", 
                   RowBox[{"\[LeftDoubleBracket]", 
                    RowBox[{"i", ",", "1"}], "\[RightDoubleBracket]"}]], "==", 
                  RowBox[{"First", "@", "#"}]}], "&"}]}], "]"}], 
              RowBox[{"\[LeftDoubleBracket]", 
               RowBox[{"1", ",", 
                RowBox[{"-", "1"}]}], "\[RightDoubleBracket]"}]]}]}], 
           "]"}]}]}], "}"}], ",", 
       RowBox[{
        RowBox[{
         SubscriptBox[
          RowBox[{"Select", "[", 
           RowBox[{
            RowBox[{"tab", "@", "#"}], ",", 
            RowBox[{
             RowBox[{
              SubscriptBox["a", 
               RowBox[{"\[LeftDoubleBracket]", 
                RowBox[{"i", ",", "1"}], "\[RightDoubleBracket]"}]], "==", 
              RowBox[{"First", "@", "#"}]}], "&"}]}], "]"}], 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"1", ",", 
            RowBox[{"-", "1"}]}], "\[RightDoubleBracket]"}]], "&"}], "/@", 
        RowBox[{"{", 
         RowBox[{"1", ",", "2", ",", "3"}], "}"}]}]}], "]"}], ",", 
     RowBox[{"{", 
      RowBox[{"i", ",", "15"}], "}"}]}], "]"}]}], ";", 
  RowBox[{"x1", "=", 
   RowBox[{"virgil", "[", 
    RowBox[{"b", ",", "1"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"b", "=", 
   RowBox[{"Table", "[", 
    RowBox[{
     RowBox[{"Join", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         SubscriptBox[
          RowBox[{"Select", "[", 
           RowBox[{"p1", ",", 
            RowBox[{
             RowBox[{
              SubscriptBox["a", 
               RowBox[{"\[LeftDoubleBracket]", 
                RowBox[{
                 RowBox[{"-", "i"}], ",", "1"}], "\[RightDoubleBracket]"}]], "==", 
              RowBox[{"First", "@", "#"}]}], "&"}]}], "]"}], 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"1", ",", "2"}], "\[RightDoubleBracket]"}]], ",", 
         RowBox[{"ToString", "@", 
          SubscriptBox["a", 
           RowBox[{"\[LeftDoubleBracket]", 
            RowBox[{
             RowBox[{"-", "i"}], ",", "2"}], "\[RightDoubleBracket]"}]]}], 
         ",", 
         RowBox[{"ToString", "@", 
          RowBox[{"Round", "[", 
           RowBox[{
            SuperscriptBox["10", 
             RowBox[{"-", "3"}]], 
            RowBox[{"2", "^", 
             SubscriptBox[
              RowBox[{"Select", "[", 
               RowBox[{"inko", ",", "\[IndentingNewLine]", 
                RowBox[{
                 RowBox[{
                  SubscriptBox["a", 
                   RowBox[{"\[LeftDoubleBracket]", 
                    RowBox[{
                    RowBox[{"-", "i"}], ",", "1"}], 
                    "\[RightDoubleBracket]"}]], "==", 
                  RowBox[{"First", "@", "#"}]}], "&"}]}], "]"}], 
              RowBox[{"\[LeftDoubleBracket]", 
               RowBox[{"1", ",", 
                RowBox[{"-", "1"}]}], "\[RightDoubleBracket]"}]]}]}], 
           "]"}]}]}], "}"}], ",", 
       RowBox[{
        RowBox[{
         SubscriptBox[
          RowBox[{"Select", "[", 
           RowBox[{
            RowBox[{"tab", "@", "#"}], ",", 
            RowBox[{
             RowBox[{
              SubscriptBox["a", 
               RowBox[{"\[LeftDoubleBracket]", 
                RowBox[{
                 RowBox[{"-", "i"}], ",", "1"}], "\[RightDoubleBracket]"}]], "==", 
              RowBox[{"First", "@", "#"}]}], "&"}]}], "]"}], 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"1", ",", 
            RowBox[{"-", "1"}]}], "\[RightDoubleBracket]"}]], "&"}], "/@", 
        RowBox[{"{", 
         RowBox[{"1", ",", "2", ",", "3"}], "}"}]}]}], "]"}], ",", 
     RowBox[{"{", 
      RowBox[{"i", ",", "15"}], "}"}]}], "]"}]}], ";", 
  RowBox[{"x2", "=", 
   RowBox[{"virgil", "[", 
    RowBox[{"b", ",", "1"}], "]"}]}], ";", " ", 
  RowBox[{"x4", "=", 
   RowBox[{"Join", "[", 
    RowBox[{
     RowBox[{"Prepend", "[", 
      RowBox[{
       RowBox[{"Take", "[", 
        RowBox[{
         RowBox[{"Select", "[", 
          RowBox[{"x1", ",", 
           RowBox[{
            RowBox[{"Not", "@", 
             RowBox[{"MemberQ", "[", 
              RowBox[{
               SubscriptBox["x3", 
                RowBox[{"\[LeftDoubleBracket]", 
                 RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]], ",", 
               RowBox[{"First", "@", "#"}]}], "]"}]}], "&"}]}], "]"}], ",", 
         "5"}], "]"}], ",", "tito"}], "]"}], ",", 
     RowBox[{"Prepend", "[", 
      RowBox[{
       RowBox[{"Take", "[", 
        RowBox[{
         RowBox[{"Select", "[", 
          RowBox[{"x2", ",", 
           RowBox[{
            RowBox[{"Not", "@", 
             RowBox[{"MemberQ", "[", 
              RowBox[{
               SubscriptBox["x3", 
                RowBox[{"\[LeftDoubleBracket]", 
                 RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]], ",", 
               RowBox[{"First", "@", "#"}]}], "]"}]}], "&"}]}], "]"}], ",", 
         "5"}], "]"}], ",", "tita"}], "]"}]}], "]"}]}], ";", " ", 
  RowBox[{"LaTex2", "[", 
   RowBox[{"\"\<napi\>\"", ",", 
    RowBox[{"{", 
     RowBox[{"x3", ",", "x4", ",", "b4"}], "}"}], ",", "\"\<napi\>\""}], 
   "]"}], ";"}]}], "Input",
 CellChangeTimes->{{3.906189775860958*^9, 3.906189837901369*^9}, {
   3.906189869516243*^9, 3.906189891997899*^9}, {3.906190436358664*^9, 
   3.906190442881524*^9}, {3.906191833390683*^9, 3.906191844811316*^9}, {
   3.9061919273692703`*^9, 3.906191933909539*^9}, {3.906192042872406*^9, 
   3.9061921139107018`*^9}, 3.906192394040535*^9, {3.906264416276949*^9, 
   3.906264423113392*^9}, 3.906264500909073*^9, {3.906264533362829*^9, 
   3.906264534307642*^9}, {3.906264583758934*^9, 3.906264585007244*^9}, 
   3.9062648544612513`*^9, 3.9062656606134377`*^9, 3.9062657501543617`*^9, {
   3.9062658349477654`*^9, 3.9062659930003853`*^9}, {3.906266045740924*^9, 
   3.906266046174366*^9}, {3.906266118009239*^9, 3.906266123161192*^9}, {
   3.906266306540629*^9, 3.906266317560684*^9}, {3.906266588948503*^9, 
   3.906266596063079*^9}, {3.906266947857379*^9, 3.906266962124213*^9}, {
   3.906266995882869*^9, 3.906266997818838*^9}, {3.906308780021071*^9, 
   3.906308780751906*^9}},
 CellLabel->
  "In[396]:=",ExpressionUUID->"f6ab6507-f47e-4692-8247-b35bd87f7127"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{"many", " ", "years", " ", "version"}], " ", "*)"}], 
  RowBox[{
   RowBox[{"a", "=", 
    SubscriptBox[
     RowBox[{"merge", "[", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{
          SubscriptBox["#", 
           RowBox[{"\[LeftDoubleBracket]", 
            RowBox[{"{", 
             RowBox[{"1", ",", "2", ",", "3"}], "}"}], 
            "\[RightDoubleBracket]"}]], "&"}], "/@", 
         RowBox[{"Select", "[", 
          RowBox[{"w1", ",", 
           RowBox[{
            RowBox[{"deb", "\[LessEqual]", 
             SubscriptBox["#", 
              RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]],
              "\[LessEqual]", "fin"}], "&"}]}], "]"}]}], "/.", "swap"}], ",", 
       
       SubscriptBox["pais", 
        RowBox[{"\[LeftDoubleBracket]", 
         RowBox[{"All", ",", 
          RowBox[{"{", 
           RowBox[{"2", ",", "1"}], "}"}]}], "\[RightDoubleBracket]"}]]}], 
      "]"}], 
     RowBox[{"\[LeftDoubleBracket]", 
      RowBox[{"All", ",", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"-", "1"}], ",", "2", ",", "3"}], "}"}]}], 
      "\[RightDoubleBracket]"}]]}], ";", " ", 
   RowBox[{"quissa", "=", 
    RowBox[{"Sort", "@", 
     SubscriptBox[
      RowBox[{"Tally", "[", 
       SubscriptBox["a", 
        RowBox[{"\[LeftDoubleBracket]", 
         RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]], "]"}], 
      RowBox[{"\[LeftDoubleBracket]", 
       RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]]}]}], ";", 
   RowBox[{
    RowBox[{"tab", "[", "1", "]"}], "=", 
    RowBox[{"SortBy", "[", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          RowBox[{
           SubscriptBox["#", 
            RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], 
           "<>", "\"\<_\>\"", "<>", 
           RowBox[{"ToString", "@", 
            RowBox[{"Round", "@", 
             SubscriptBox["#", 
              RowBox[{
              "\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]]}]}]}], 
          ",", 
          SubscriptBox["#", 
           RowBox[{"\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]]}], 
         "}"}], "&"}], "/@", "a"}], ",", 
      RowBox[{
       RowBox[{"-", 
        RowBox[{"Last", "@", "#"}]}], "&"}]}], "]"}]}], ";", 
   RowBox[{
    RowBox[{"tab", "[", "2", "]"}], "=", 
    RowBox[{"SortBy", "[", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          RowBox[{
           SubscriptBox["#", 
            RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], 
           "<>", "\"\<_\>\"", "<>", 
           RowBox[{"ToString", "@", 
            RowBox[{"Round", "@", 
             SubscriptBox["#", 
              RowBox[{
              "\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]]}]}]}], 
          ",", 
          SubscriptBox["#", 
           RowBox[{"\[LeftDoubleBracket]", "10", "\[RightDoubleBracket]"}]]}],
          "}"}], "&"}], "/@", 
       RowBox[{"Select", "[", 
        RowBox[{"longe", ",", 
         RowBox[{
          RowBox[{
           RowBox[{"MemberQ", "[", 
            RowBox[{"quissa", ",", 
             RowBox[{"First", "@", "#"}]}], "]"}], "&&", 
           "\[IndentingNewLine]", 
           RowBox[{"deb", "\[LessEqual]", 
            SubscriptBox["#", 
             RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], 
            "\[LessEqual]", "fin"}]}], "&"}]}], "]"}]}], ",", 
      RowBox[{
       RowBox[{"-", 
        RowBox[{"Last", "@", "#"}]}], "&"}]}], "]"}]}], ";", " ", 
   RowBox[{
    RowBox[{"tab", "[", "3", "]"}], "=", 
    RowBox[{"SortBy", "[", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          RowBox[{
           SubscriptBox["#", 
            RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], 
           "<>", "\"\<_\>\"", "<>", 
           RowBox[{"ToString", "@", 
            RowBox[{"Round", "@", 
             SubscriptBox["#", 
              RowBox[{
              "\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]]}]}]}], 
          ",", 
          SubscriptBox["#", 
           RowBox[{"\[LeftDoubleBracket]", "9", "\[RightDoubleBracket]"}]]}], 
         "}"}], "&"}], "/@", 
       RowBox[{"Select", "[", 
        RowBox[{"longe", ",", 
         RowBox[{
          RowBox[{
           RowBox[{"MemberQ", "[", 
            RowBox[{"quissa", ",", 
             RowBox[{"First", "@", "#"}]}], "]"}], "&&", 
           "\[IndentingNewLine]", 
           RowBox[{"deb", "\[LessEqual]", 
            SubscriptBox["#", 
             RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], 
            "\[LessEqual]", "fin"}]}], "&"}]}], "]"}]}], ",", 
      RowBox[{
       RowBox[{"-", 
        RowBox[{"Last", "@", "#"}]}], "&"}]}], "]"}]}], ";", " ", 
   RowBox[{"a", "=", 
    RowBox[{"bojo", "[", 
     RowBox[{"tab", ",", "1", ",", "3"}], "]"}]}], " ", 
   RowBox[{"(*", " ", 
    RowBox[{
     RowBox[{"using", " ", "happy"}], ",", " ", 
     RowBox[{
     "expectancy", " ", "at", " ", "birth", " ", "and", " ", "at", " ", 
      "65"}]}], " ", "*)"}], ";", " ", 
   RowBox[{"welf", "=", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       SubscriptBox["a", 
        RowBox[{"\[LeftDoubleBracket]", 
         RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]], ",", 
       RowBox[{"Range", "@", 
        RowBox[{"Length", "@", "a"}]}]}], "}"}], "\[Transpose]"}]}], ";", 
   "  ", 
   RowBox[{"gni2", "=", 
    RowBox[{
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        RowBox[{
         SubscriptBox["#", 
          RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], 
         "<>", "\"\<_\>\"", "<>", 
         RowBox[{"ToString", "@", 
          RowBox[{"Round", "@", 
           SubscriptBox["#", 
            RowBox[{
            "\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]]}]}]}], 
        ",", 
        RowBox[{"10", "^", 
         SubscriptBox["#", 
          RowBox[{"\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]]}]}],
        "}"}], "&"}], "/@", 
     RowBox[{"Select", "[", 
      RowBox[{"gni1", ",", 
       RowBox[{
        RowBox[{"deb", "\[LessEqual]", 
         SubscriptBox["#", 
          RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], 
         "\[LessEqual]", "fin"}], "&"}]}], "]"}]}]}], ";", 
   RowBox[{"popo", "=", 
    RowBox[{
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        RowBox[{
         SubscriptBox["#", 
          RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], 
         "<>", "\"\<_\>\"", "<>", 
         RowBox[{"ToString", "@", 
          RowBox[{"Round", "@", 
           SubscriptBox["#", 
            RowBox[{
            "\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]]}]}]}], 
        ",", 
        SubscriptBox["#", 
         RowBox[{"\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]]}], 
       "}"}], "&"}], "/@", 
     RowBox[{"Select", "[", 
      RowBox[{"popu", ",", 
       RowBox[{
        RowBox[{"deb", "\[LessEqual]", 
         SubscriptBox["#", 
          RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], 
         "\[LessEqual]", "fin"}], "&"}]}], "]"}]}]}], ";", 
   RowBox[{"inko", "=", 
    RowBox[{"SortBy", "[", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          SubscriptBox["#", 
           RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], 
          ",", 
          RowBox[{
           RowBox[{"Log", "[", 
            RowBox[{"2", ",", 
             RowBox[{
              SubscriptBox["#", 
               RowBox[{
               "\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], "/", 
              SubscriptBox["#", 
               RowBox[{
               "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]]}]}], 
            "]"}], "-", "19."}]}], "}"}], "&"}], "/@", 
       RowBox[{"merge", "[", 
        RowBox[{"gni2", ",", "popo"}], "]"}]}], ",", 
      RowBox[{
       RowBox[{"-", 
        RowBox[{"Last", "@", "#"}]}], "&"}]}], "]"}]}], ";", " ", 
   RowBox[{"mony", "=", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       SubscriptBox["inko", 
        RowBox[{"\[LeftDoubleBracket]", 
         RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]], ",", 
       RowBox[{"Range", "@", 
        RowBox[{"Length", "@", "inko"}]}]}], "}"}], "\[Transpose]"}]}], ";", 
   "  ", 
   RowBox[{"final", "=", 
    RowBox[{"Select", "[", 
     RowBox[{
      RowBox[{"merge", "[", 
       RowBox[{"welf", ",", "mony"}], "]"}], ",", 
      RowBox[{
       RowBox[{
        RowBox[{"Last", "@", "#"}], ">", "0"}], "&"}]}], "]"}]}], 
   RowBox[{"(*", " ", 
    RowBox[{"fewer", " ", "countries", " ", "in", " ", 
     RowBox[{"WHR", " ", "!!"}]}], "*)"}], ";"}]}]], "Input",
 CellChangeTimes->{{3.9061299505324297`*^9, 3.9061299535956383`*^9}, {
   3.9061299902646933`*^9, 3.906130005715002*^9}, 3.906130141231887*^9, {
   3.906130195612471*^9, 3.906130197182844*^9}, {3.906130263902535*^9, 
   3.906130294165758*^9}, {3.906130332488503*^9, 3.906130343853532*^9}, {
   3.906130400040077*^9, 3.906130418433744*^9}},
 CellLabel->"In[99]:=",ExpressionUUID->"0e45609b-3578-4acc-9b2e-a9ac08298f22"],

Cell[BoxData[
 RowBox[{
  RowBox[{"g1", "=", 
   RowBox[{"ListPlot", "[", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"Tooltip", "[", 
        RowBox[{
         SubscriptBox["#", 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"{", 
            RowBox[{"3", ",", "2"}], "}"}], "\[RightDoubleBracket]"}]], ",", 
         SubscriptBox["#", 
          RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]]}], 
        "]"}], "&"}], "/@", "final"}], ",", 
     RowBox[{"PlotStyle", "->", "Gray"}]}], "]"}]}], ";", " ", 
  RowBox[{"lm", "=", 
   RowBox[{"LinearModelFit", "[", 
    RowBox[{
     SubscriptBox["final", 
      RowBox[{"\[LeftDoubleBracket]", 
       RowBox[{"All", ",", 
        RowBox[{"{", 
         RowBox[{"3", ",", "2"}], "}"}]}], "\[RightDoubleBracket]"}]], ",", 
     "x", ",", "x"}], "]"}]}], ";", " ", 
  RowBox[{"g2", "=", 
   RowBox[{"Plot", "[", 
    RowBox[{
     RowBox[{"lm", "[", "x", "]"}], ",", 
     RowBox[{"{", 
      RowBox[{"x", ",", "1", ",", 
       RowBox[{"Max", "@", 
        SubscriptBox["final", 
         RowBox[{"\[LeftDoubleBracket]", 
          RowBox[{"All", ",", 
           RowBox[{"{", 
            RowBox[{"2", ",", "3"}], "}"}]}], "\[RightDoubleBracket]"}]]}]}], 
      "}"}], ",", 
     RowBox[{"PlotStyle", "->", "Red"}], ",", 
     RowBox[{"AxesLabel", "->", 
      RowBox[{"{", 
       RowBox[{"\"\<Income rank\>\"", ",", "\"\<Wellbeing rank\>\""}], 
       "}"}]}]}], "]"}]}], ";", " ", 
  RowBox[{"g3", "=", 
   RowBox[{"Show", "[", 
    RowBox[{"g2", ",", "g1", ",", 
     RowBox[{"PlotLabel", "->", 
      RowBox[{"\"\<\!\(\*SuperscriptBox[\(R\), \(2\)]\) = \>\"", "<>", 
       RowBox[{"ToString", "@", 
        RowBox[{"Round", "[", 
         RowBox[{"100", " ", 
          RowBox[{"lm", "[", "\"\<RSquared\>\"", "]"}]}], "]"}]}], "<>", 
       "\"\<%\>\""}]}], ",", 
     RowBox[{"option2", "[", 
      RowBox[{"12", ",", "5"}], "]"}]}], "]"}]}], ";", " ", 
  RowBox[{"Export", "[", 
   RowBox[{
    RowBox[{"path", "<>", "\"\<fig2.pdf\>\""}], ",", "g3"}], "]"}], 
  ";"}]], "Input",
 CellChangeTimes->{{3.90610471928977*^9, 3.9061047577373877`*^9}, {
   3.906104815445549*^9, 3.906104849700959*^9}, 3.9061304805252*^9, {
   3.9061340709674683`*^9, 3.906134071167976*^9}},
 CellLabel->
  "In[100]:=",ExpressionUUID->"5cc02143-cf47-4f76-952e-7be6c1257d99"]
}, Open  ]],

Cell[CellGroupData[{

Cell["ESS", "Subsection",
 CellChangeTimes->{{3.8746528813802357`*^9, 3.874652890384316*^9}, {
   3.875275755553361*^9, 3.875275764757107*^9}, 3.875275826740107*^9, 
   3.8765615823442507`*^9, {3.889274229897923*^9, 3.88927423138132*^9}, {
   3.889675820130479*^9, 3.889675842928904*^9}, {3.8908024561384573`*^9, 
   3.89080246381147*^9}, {3.890884919370634*^9, 3.8908849200010223`*^9}, {
   3.891050187992381*^9, 
   3.891050188416098*^9}},ExpressionUUID->"d0db606b-2327-41b4-9cce-\
8a824875c44e"],

Cell[BoxData[
 RowBox[{
  RowBox[{"Export", "[", 
   RowBox[{
   "\"\<bcn.sh\>\"", ",", 
    "\"\<hdiutil attach '/Users/nboccard/Movies/Amazon Drive/Data/ess.dmg' \
-noautofsck\>\"", ",", "\"\<Text\>\""}], "]"}], ";", "  ", 
  RowBox[{"Run", "[", "\"\<sh bcn.sh\>\"", "]"}], ";"}]], "Input",
 CellChangeTimes->{{3.891050198034329*^9, 3.891050198489593*^9}, {
   3.891050324863928*^9, 3.8910503336931334`*^9}, 3.89105072000119*^9},
 CellLabel->
  "In[278]:=",ExpressionUUID->"b9301dbe-4496-46b6-a9a3-3433be74e5fe"],

Cell[BoxData[
 RowBox[{
  RowBox[{"papi", "=", 
   RowBox[{"Monitor", "[", 
    RowBox[{
     RowBox[{"Table", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"a1", "=", 
         RowBox[{"Import", "[", 
          RowBox[{"\"\</Volumes/ESS/ESS\>\"", "<>", 
           RowBox[{"ToString", "@", "j"}], "<>", "\"\</\>\"", "<>", 
           "\[IndentingNewLine]", 
           SubscriptBox[
            RowBox[{"Select", "[", 
             RowBox[{
              RowBox[{"Import", "[", 
               RowBox[{"\"\</Volumes/ESS/ESS\>\"", "<>", 
                RowBox[{"ToString", "@", "j"}]}], "]"}], ",", 
              RowBox[{
               RowBox[{
                RowBox[{"StringTake", "[", 
                 RowBox[{"#", ",", 
                  RowBox[{"-", "3"}]}], "]"}], "==", "\"\<csv\>\""}], "&"}]}],
              "]"}], 
            RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]]}],
           "]"}]}], ";", " ", 
        RowBox[{"u1", "=", 
         RowBox[{"Import", "[", 
          RowBox[{
           RowBox[{"\"\</Volumes/ESS/ESS\>\"", "<>", 
            RowBox[{"ToString", "@", "j"}], "<>", "\"\</\>\"", "<>", 
            "\[IndentingNewLine]", 
            SubscriptBox[
             RowBox[{"Select", "[", 
              RowBox[{
               RowBox[{"Import", "[", 
                RowBox[{"\"\</Volumes/ESS/ESS\>\"", "<>", 
                 RowBox[{"ToString", "@", "j"}]}], "]"}], ",", 
               RowBox[{
                RowBox[{
                 RowBox[{"StringTake", "[", 
                  RowBox[{"#", ",", 
                   RowBox[{"-", "4"}]}], "]"}], "==", "\"\<html\>\""}], 
                "&"}]}], "]"}], 
             RowBox[{
             "\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]]}], ",", 
           "\"\<Text\>\""}], "]"}]}], ";", 
        RowBox[{"u2", "=", 
         SubscriptBox[
          RowBox[{"StringSplit", "[", 
           RowBox[{
            SubscriptBox[
             RowBox[{"StringSplit", "[", 
              RowBox[{"u1", ",", "\"\<source of household income\>\""}], 
              "]"}], 
             RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], 
            ",", "\"\<href\>\""}], "]"}], 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"-", "1"}], "\[RightDoubleBracket]"}]]}], ";", 
        RowBox[{"u3", "=", 
         SubscriptBox[
          RowBox[{"StringSplit", "[", 
           RowBox[{
            SubscriptBox[
             RowBox[{"StringSplit", "[", 
              RowBox[{"u2", ",", "\"\<<span>\>\""}], "]"}], 
             RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], 
            ",", "\"\<<\>\""}], "]"}], 
          RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]]}], 
        ";", " ", 
        RowBox[{"wage", "=", 
         RowBox[{"ToExpression", "@", 
          SubscriptBox[
           RowBox[{"StringSplit", "[", "\[IndentingNewLine]", 
            RowBox[{
             SubscriptBox[
              RowBox[{"StringSplit", "[", 
               RowBox[{
                SubscriptBox[
                 RowBox[{"StringSplit", "[", 
                  RowBox[{"u1", ",", "\"\<Wages or salaries\>\""}], "]"}], 
                 RowBox[{
                 "\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], 
                ",", "\"\<nowrap\\\">\>\""}], "]"}], 
              RowBox[{"\[LeftDoubleBracket]", 
               RowBox[{"-", "1"}], "\[RightDoubleBracket]"}]], ",", 
             "\"\<<\>\""}], "]"}], 
           RowBox[{
           "\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]]}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"jobless", "=", 
         RowBox[{"ToExpression", "@", 
          SubscriptBox[
           RowBox[{"StringSplit", "[", 
            RowBox[{
             SubscriptBox[
              RowBox[{"StringSplit", "[", 
               RowBox[{
                SubscriptBox[
                 RowBox[{"StringSplit", "[", 
                  RowBox[{
                   SubscriptBox[
                    RowBox[{"StringSplit", "[", 
                    RowBox[{
                    "u1", ",", "\[IndentingNewLine]", 
                    "\"\<source of household income\>\""}], "]"}], 
                    RowBox[{
                    "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]], 
                   ",", "\"\<Unemployment\>\""}], "]"}], 
                 RowBox[{
                 "\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], 
                ",", "\"\<nowrap\\\">\>\""}], "]"}], 
              RowBox[{"\[LeftDoubleBracket]", 
               RowBox[{"-", "1"}], "\[RightDoubleBracket]"}]], ",", 
             "\"\<<\>\""}], "]"}], 
           RowBox[{
           "\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]]}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"u2", "=", 
         SubscriptBox[
          RowBox[{"StringSplit", "[", 
           RowBox[{
            SubscriptBox[
             RowBox[{"StringSplit", "[", 
              RowBox[{"u1", ",", "\"\<Highest level of education\>\""}], 
              "]"}], 
             RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], 
            ",", "\"\<href\>\""}], "]"}], 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"-", "1"}], "\[RightDoubleBracket]"}]]}], ";", 
        RowBox[{"edu", "=", 
         SubscriptBox[
          RowBox[{"StringSplit", "[", 
           RowBox[{
            SubscriptBox[
             RowBox[{"StringSplit", "[", 
              RowBox[{"u2", ",", "\"\<<span>\>\""}], "]"}], 
             RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], 
            ",", "\"\<<\>\""}], "]"}], 
          RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]]}], 
        ";", 
        RowBox[{"a2", "=", 
         RowBox[{
          RowBox[{
           SubscriptBox[
            RowBox[{"Position", "[", 
             RowBox[{
              RowBox[{"First", "@", "a1"}], ",", "#"}], "]"}], 
            RowBox[{"\[LeftDoubleBracket]", 
             RowBox[{"1", ",", "1"}], "\[RightDoubleBracket]"}]], "&"}], "/@", 
          RowBox[{"{", 
           RowBox[{
           "u3", ",", "\"\<happy\>\"", ",", "\"\<health\>\"", ",", 
            "\"\<stflife\>\"", ",", "\"\<eduyrs\>\"", ",", "\"\<pspwght\>\"", 
            ",", "\"\<pweight\>\""}], "}"}]}]}], ";", 
        RowBox[{"a9", "=", 
         RowBox[{"Rest", "@", 
          RowBox[{"a1", "[", 
           RowBox[{"[", 
            RowBox[{"All", ",", "a2"}], "]"}], "]"}]}]}], ";", "  ", 
        RowBox[{"a3", "=", 
         RowBox[{
          RowBox[{
           RowBox[{"{", 
            RowBox[{
             SubscriptBox["#", 
              RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]],
              ",", 
             RowBox[{
              FractionBox[
               RowBox[{
                SubscriptBox["#", 
                 RowBox[{
                 "\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], "-",
                 "1"}], "9"], "+", 
              FractionBox[
               RowBox[{"5", "-", 
                SubscriptBox["#", 
                 RowBox[{
                 "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]]}], 
               "4"], "+", 
              FractionBox[
               RowBox[{
                SubscriptBox["#", 
                 RowBox[{
                 "\[LeftDoubleBracket]", "4", "\[RightDoubleBracket]"}]], "-",
                 "1"}], "9"]}], 
             RowBox[{"(*", "*)"}], ",", 
             SubscriptBox["#", 
              RowBox[{"\[LeftDoubleBracket]", "5", "\[RightDoubleBracket]"}]],
              ",", 
             RowBox[{"Round", "[", 
              RowBox[{"1000", " ", 
               SubscriptBox["#", 
                RowBox[{
                "\[LeftDoubleBracket]", "7", "\[RightDoubleBracket]"}]], " ", 
               
               SubscriptBox["#", 
                RowBox[{
                "\[LeftDoubleBracket]", "6", "\[RightDoubleBracket]"}]]}], 
              "]"}]}], "}"}], "&"}], "/@", "\[IndentingNewLine]", 
          RowBox[{"Select", "[", 
           RowBox[{"a9", ",", 
            RowBox[{
             RowBox[{
              RowBox[{"1", "\[LessEqual]", 
               SubscriptBox["#", 
                RowBox[{
                "\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], 
               "\[LessEqual]", "7"}], "&&", 
              RowBox[{"1", "\[LessEqual]", 
               SubscriptBox["#", 
                RowBox[{
                "\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], 
               "\[LessEqual]", "10"}], "&&", 
              RowBox[{"1", "\[LessEqual]", 
               SubscriptBox["#", 
                RowBox[{
                "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]], 
               "\[LessEqual]", "5"}], "&&", 
              RowBox[{"1", "\[LessEqual]", 
               SubscriptBox["#", 
                RowBox[{
                "\[LeftDoubleBracket]", "4", "\[RightDoubleBracket]"}]], 
               "\[LessEqual]", "10"}]}], "&"}]}], "]"}]}]}], ";", " ", 
        RowBox[{"a4", "=", 
         RowBox[{
          RowBox[{
           RowBox[{"Flatten", "@", "#"}], "&"}], "/@", 
          RowBox[{"proctot", "[", 
           RowBox[{"a3", ",", 
            RowBox[{"{", 
             RowBox[{"1", ",", "2"}], "}"}], ",", "4"}], "]"}]}]}], ";", " ", 
        
        RowBox[{"a5", "=", 
         RowBox[{"proctot", "[", 
          RowBox[{"a4", ",", "2", ",", "3"}], "]"}]}], ";", " ", 
        "\[IndentingNewLine]", " ", 
        RowBox[{"a6", "=", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{
            SubscriptBox["a5", 
             RowBox[{"\[LeftDoubleBracket]", 
              RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]], ",", 
            RowBox[{"Accumulate", "[", 
             RowBox[{
              RowBox[{"N", "@", 
               SubscriptBox["a5", 
                RowBox[{"\[LeftDoubleBracket]", 
                 RowBox[{"All", ",", "2"}], "\[RightDoubleBracket]"}]]}], "/", 
              RowBox[{"Last", "@", 
               RowBox[{"Total", "@", "a5"}]}]}], "]"}]}], "}"}], 
          "\[Transpose]"}]}], ";", 
        RowBox[{"d", "=", 
         RowBox[{
          SubscriptBox[
           RowBox[{"Select", "[", 
            RowBox[{"a6", ",", 
             RowBox[{
              RowBox[{
               RowBox[{"Last", "@", "#"}], ">", ".975"}], "&"}]}], "]"}], 
           RowBox[{"\[LeftDoubleBracket]", 
            RowBox[{"1", ",", "1"}], "\[RightDoubleBracket]"}]], "-", 
          SubscriptBox[
           RowBox[{"Select", "[", 
            RowBox[{"a6", ",", 
             RowBox[{
              RowBox[{
               RowBox[{"Last", "@", "#"}], ">", ".025"}], "&"}]}], "]"}], 
           RowBox[{"\[LeftDoubleBracket]", 
            RowBox[{"1", ",", "1"}], "\[RightDoubleBracket]"}]]}]}], ";", " ", 
        RowBox[{"a5", "=", 
         RowBox[{"Select", "[", 
          RowBox[{"a4", ",", 
           RowBox[{
            RowBox[{
             RowBox[{"First", "@", "#"}], "==", "wage"}], "&"}]}], "]"}]}], 
        ";", 
        RowBox[{"a", "=", 
         FractionBox[
          RowBox[{"Total", "[", 
           RowBox[{
            SubscriptBox["a5", 
             RowBox[{"\[LeftDoubleBracket]", 
              RowBox[{"All", ",", "3"}], "\[RightDoubleBracket]"}]], 
            SubscriptBox["a5", 
             RowBox[{"\[LeftDoubleBracket]", 
              RowBox[{"All", ",", "2"}], "\[RightDoubleBracket]"}]]}], "]"}], 
          
          RowBox[{"N", "@", 
           RowBox[{"Total", "[", 
            SubscriptBox["a5", 
             RowBox[{"\[LeftDoubleBracket]", 
              RowBox[{"All", ",", "3"}], "\[RightDoubleBracket]"}]], 
            "]"}]}]]}], ";", " ", 
        RowBox[{"a5", "=", 
         RowBox[{"Select", "[", 
          RowBox[{"a4", ",", 
           RowBox[{
            RowBox[{
             RowBox[{"First", "@", "#"}], "==", "jobless"}], "&"}]}], "]"}]}],
         ";", " ", 
        RowBox[{"b", "=", 
         FractionBox[
          RowBox[{"Total", "[", 
           RowBox[{
            SubscriptBox["a5", 
             RowBox[{"\[LeftDoubleBracket]", 
              RowBox[{"All", ",", "3"}], "\[RightDoubleBracket]"}]], 
            SubscriptBox["a5", 
             RowBox[{"\[LeftDoubleBracket]", 
              RowBox[{"All", ",", "2"}], "\[RightDoubleBracket]"}]]}], "]"}], 
          
          RowBox[{"N", "@", 
           RowBox[{"Total", "[", 
            SubscriptBox["a5", 
             RowBox[{"\[LeftDoubleBracket]", 
              RowBox[{"All", ",", "3"}], "\[RightDoubleBracket]"}]], 
            "]"}]}]]}], ";", 
        RowBox[{"b1", "=", 
         RowBox[{"Select", "[", 
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{"Flatten", "@", "#"}], "&"}], "/@", 
            RowBox[{"proctot", "[", 
             RowBox[{"a3", ",", 
              RowBox[{"{", 
               RowBox[{"3", ",", "2"}], "}"}], ",", "4"}], "]"}]}], ",", 
           RowBox[{
            RowBox[{
             SubscriptBox["#", 
              RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]],
              "<", "77"}], "&"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
        RowBox[{"a5", "=", 
         RowBox[{"proctot", "[", 
          RowBox[{"b1", ",", "2", ",", "3"}], "]"}]}], ";", " ", 
        RowBox[{"a6", "=", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{
            SubscriptBox["a5", 
             RowBox[{"\[LeftDoubleBracket]", 
              RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]], ",", 
            RowBox[{"Accumulate", "[", 
             RowBox[{
              RowBox[{"N", "@", 
               SubscriptBox["a5", 
                RowBox[{"\[LeftDoubleBracket]", 
                 RowBox[{"All", ",", "2"}], "\[RightDoubleBracket]"}]]}], "/", 
              RowBox[{"Last", "@", 
               RowBox[{"Total", "@", "a5"}]}]}], "]"}]}], "}"}], 
          "\[Transpose]"}]}], ";", 
        RowBox[{"d", "=", 
         RowBox[{
          SubscriptBox[
           RowBox[{"Select", "[", 
            RowBox[{"a6", ",", 
             RowBox[{
              RowBox[{
               RowBox[{"Last", "@", "#"}], ">", ".975"}], "&"}]}], "]"}], 
           RowBox[{"\[LeftDoubleBracket]", 
            RowBox[{"1", ",", "1"}], "\[RightDoubleBracket]"}]], "-", 
          SubscriptBox[
           RowBox[{"Select", "[", 
            RowBox[{"a6", ",", 
             RowBox[{
              RowBox[{
               RowBox[{"Last", "@", "#"}], ">", ".025"}], "&"}]}], "]"}], 
           RowBox[{"\[LeftDoubleBracket]", 
            RowBox[{"1", ",", "1"}], "\[RightDoubleBracket]"}]]}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"b3", "=", 
         RowBox[{"Table", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"b2", "=", 
             RowBox[{"Select", "[", 
              RowBox[{"b1", ",", 
               RowBox[{
                RowBox[{
                 RowBox[{"First", "@", "#"}], "==", "j"}], "&"}]}], "]"}]}], 
            ";", " ", 
            RowBox[{"{", 
             RowBox[{"j", ",", 
              FractionBox[
               RowBox[{"Total", "[", 
                RowBox[{
                 SubscriptBox["b2", 
                  RowBox[{"\[LeftDoubleBracket]", 
                   RowBox[{"All", ",", "3"}], "\[RightDoubleBracket]"}]], 
                 SubscriptBox["b2", 
                  RowBox[{"\[LeftDoubleBracket]", 
                   RowBox[{"All", ",", "2"}], "\[RightDoubleBracket]"}]]}], 
                "]"}], 
               RowBox[{"Total", "[", 
                SubscriptBox["b2", 
                 RowBox[{"\[LeftDoubleBracket]", 
                  RowBox[{"All", ",", "3"}], "\[RightDoubleBracket]"}]], 
                "]"}]]}], "}"}]}], ",", 
           RowBox[{"{", 
            RowBox[{"j", ",", "5", ",", "20"}], "}"}]}], "]"}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"f", "=", 
         SubscriptBox[
          RowBox[{"LinearModelFit", "[", 
           RowBox[{"b3", ",", "x", ",", "x"}], "]"}], 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"1", ",", "2", ",", "2"}], "\[RightDoubleBracket]"}]]}], 
        ";", " ", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"2000", "+", 
           RowBox[{"2", "j"}]}], ",", 
          FractionBox[
           RowBox[{"a", "-", "b"}], 
           RowBox[{".01", " ", "d"}]], ",", 
          FractionBox[
           RowBox[{"10", 
            RowBox[{"(*", " ", 
             RowBox[{"years", " ", "of", " ", "schooling"}], " ", "*)"}], " ",
             "f"}], 
           RowBox[{".01", " ", "d"}]]}], "}"}]}], ",", 
       RowBox[{"{", 
        RowBox[{"j", ",", "10"}], "}"}]}], "]"}], ",", "j"}], "]"}]}], 
  ";"}]], "Input",
 CellChangeTimes->{{3.891050618832973*^9, 3.8910506459892263`*^9}, 
   3.891052303104103*^9, {3.891052763592782*^9, 3.891052773641294*^9}, {
   3.891053879200642*^9, 3.891053923591042*^9}, 3.891054304602785*^9, {
   3.891054385825144*^9, 3.8910544024472*^9}, {3.891054687409038*^9, 
   3.891054723446258*^9}, {3.891054786304737*^9, 3.8910548316368027`*^9}, {
   3.8910548861672297`*^9, 3.8910548889253407`*^9}, {3.891055141652329*^9, 
   3.891055145375154*^9}, {3.891056170755865*^9, 3.8910561807357903`*^9}, {
   3.8910563027093563`*^9, 3.891056303852697*^9}, 3.891057164923164*^9, {
   3.891058535246893*^9, 3.891058536761076*^9}, {3.891272429787643*^9, 
   3.891272431176186*^9}, {3.891272802439045*^9, 3.891272834827793*^9}, {
   3.891273161709057*^9, 3.891273161963154*^9}, {3.891274209992124*^9, 
   3.8912742865773783`*^9}, {3.891274506044936*^9, 3.891274511187347*^9}, {
   3.891275131466041*^9, 3.8912751394263906`*^9}, {3.891275230603527*^9, 
   3.891275233078096*^9}, {3.891276062550848*^9, 3.891276065118299*^9}, {
   3.8912761320105553`*^9, 3.89127613376376*^9}, {3.8912762432616463`*^9, 
   3.8912762454042788`*^9}, {3.891276558300548*^9, 3.8912765630424643`*^9}, {
   3.891276861686997*^9, 3.8912768665733757`*^9}, {3.891322378498499*^9, 
   3.8913223812574987`*^9}, {3.89132306322488*^9, 3.8913230738131533`*^9}, 
   3.9059997206486597`*^9, {3.9061362104703417`*^9, 3.906136238076373*^9}, {
   3.906137051065834*^9, 3.906137061751513*^9}, {3.9061371992668247`*^9, 
   3.906137202733595*^9}, {3.906137269795573*^9, 3.906137315152473*^9}, {
   3.906137423345058*^9, 3.906137465994768*^9}, 
   3.9061784892082853`*^9},ExpressionUUID->"466e0c08-cc99-487b-b913-\
d0697cb4055f"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"Print", "[", 
   RowBox[{
   "\"\<Upon getting a job, your happiness+health+satisfaction score moves up \
1 bin among a total of \>\"", "<>", 
    RowBox[{"ToString", "@", 
     RowBox[{"Round", "[", 
      RowBox[{"100", "/", 
       SubscriptBox[
        RowBox[{"Mean", "[", "papi", "]"}], 
        RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]]}], 
      "]"}]}]}], "]"}], ";", " ", 
  RowBox[{"Print", "[", "\[IndentingNewLine]", 
   RowBox[{
   "\"\<Upon getting 10 more years of education, your HHS score moves up 1 \
bin among a total of \>\"", "<>", 
    RowBox[{"ToString", "@", 
     RowBox[{"Round", "[", 
      RowBox[{"100", "/", 
       RowBox[{"Last", "@", 
        RowBox[{"Mean", "@", 
         RowBox[{"Select", "[", 
          RowBox[{"papi", ",", 
           RowBox[{
            RowBox[{
             RowBox[{"Last", "@", "#"}], ">", "0"}], "&"}]}], "]"}]}]}]}], 
      "]"}]}]}], "]"}], ";"}]], "Input",
 CellChangeTimes->{{3.891057171419857*^9, 3.891057174747058*^9}, {
  3.8912734108980627`*^9, 3.891273413854889*^9}, {3.891277512484074*^9, 
  3.891277532754519*^9}, {3.906136404929186*^9, 3.906136408312739*^9}, {
  3.9061364961938753`*^9, 3.906136520891724*^9}, {3.906136732429447*^9, 
  3.9061367380591784`*^9}, {3.906136798142253*^9, 3.906136802758079*^9}, {
  3.906137471630228*^9, 3.9061375261669607`*^9}},
 CellLabel->
  "In[280]:=",ExpressionUUID->"993e427a-7871-4802-948a-4456845cbdbc"],

Cell[CellGroupData[{

Cell[BoxData["\<\"Upon getting a job, your happiness+health+satisfaction \
score moves up 1 bin among a total of 7\"\>"], "Print",
 CellChangeTimes->{{3.891053836958661*^9, 3.891053873718212*^9}, 
   3.891053939813755*^9, 3.891054141612754*^9, {3.891054293086133*^9, 
   3.8910543166301613`*^9}, {3.8910543963449183`*^9, 3.89105441250568*^9}, 
   3.891055183357959*^9, {3.89105628510767*^9, 3.8910563088585253`*^9}, 
   3.8910572717665367`*^9, 3.891058709453506*^9, 3.8912734046430902`*^9, 
   3.8912751443978977`*^9, 3.8912774665479393`*^9, 3.8912775331409197`*^9, 
   3.8913223547879467`*^9, {3.891322489400234*^9, 3.8913225014345627`*^9}, 
   3.891323185599979*^9, 3.906003288638197*^9, 3.906136409519566*^9, {
   3.906136514432522*^9, 3.906136521462284*^9}, {3.906136735910664*^9, 
   3.906136738577559*^9}, {3.9061367996479177`*^9, 3.906136803575363*^9}, 
   3.90613746100355*^9, {3.906137515847131*^9, 3.906137527788272*^9}, 
   3.9061778591629953`*^9},
 CellLabel->
  "During evaluation of \
In[280]:=",ExpressionUUID->"1339e62e-9840-49c7-ab12-d5d8f2c3fda4"],

Cell[BoxData["\<\"Upon getting 10 more years of education, your HHS score \
moves up 1 bin among a total of 8\"\>"], "Print",
 CellChangeTimes->{{3.891053836958661*^9, 3.891053873718212*^9}, 
   3.891053939813755*^9, 3.891054141612754*^9, {3.891054293086133*^9, 
   3.8910543166301613`*^9}, {3.8910543963449183`*^9, 3.89105441250568*^9}, 
   3.891055183357959*^9, {3.89105628510767*^9, 3.8910563088585253`*^9}, 
   3.8910572717665367`*^9, 3.891058709453506*^9, 3.8912734046430902`*^9, 
   3.8912751443978977`*^9, 3.8912774665479393`*^9, 3.8912775331409197`*^9, 
   3.8913223547879467`*^9, {3.891322489400234*^9, 3.8913225014345627`*^9}, 
   3.891323185599979*^9, 3.906003288638197*^9, 3.906136409519566*^9, {
   3.906136514432522*^9, 3.906136521462284*^9}, {3.906136735910664*^9, 
   3.906136738577559*^9}, {3.9061367996479177`*^9, 3.906136803575363*^9}, 
   3.90613746100355*^9, {3.906137515847131*^9, 3.906137527788272*^9}, 
   3.9061778591639423`*^9},
 CellLabel->
  "During evaluation of \
In[280]:=",ExpressionUUID->"31e44a1c-7c86-4999-b098-ade921b9e3c4"]
}, Open  ]]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Eurobarometer", "Subsection",
 CellChangeTimes->{{3.8746528813802357`*^9, 3.874652890384316*^9}, {
   3.875275755553361*^9, 3.875275764757107*^9}, 3.875275826740107*^9, 
   3.8765615823442507`*^9, {3.889274229897923*^9, 3.88927423138132*^9}, {
   3.889675820130479*^9, 3.889675842928904*^9}, {3.8908024561384573`*^9, 
   3.89080246381147*^9}, {3.890884919370634*^9, 3.8908849200010223`*^9}, {
   3.891050187992381*^9, 3.891050188416098*^9}, {3.891078158132844*^9, 
   3.891078161064097*^9}},ExpressionUUID->"4178a837-8633-429b-80ae-\
ef83257e5376"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{"Eurobarometers", " ", ",", " ", 
    RowBox[{"96.3", " ", 
     RowBox[{"(", "2022", ")"}]}], ",", " ", 
    RowBox[{
     RowBox[{
      RowBox[{"97.5", " ", 
       RowBox[{"(", 
        RowBox[{"2022", "b"}], ")"}]}], " ", "&"}], " ", "98.2", " ", 
     RowBox[{"(", "2023", ")"}], "\[IndentingNewLine]", "d70", " ", "LIFE", 
     " ", "SATISFACTION", " ", "1", " ", "good", " ", "to", " ", "4", " ", 
     "bad"}], ",", " ", 
    RowBox[{"qa1_", "4", " ", 
     RowBox[{"SITUATION", ":", 
      RowBox[{
      "JOB", " ", "PERSONAL", " ", "1", " ", "good", " ", "to", " ", "4", " ",
        "bad"}]}]}], ",", " ", 
    RowBox[{
     RowBox[{
      RowBox[{"d7", " ", "marital", " ", "status", " ", "11"}], "-", 
      RowBox[{"14", " ", "divorced", " ", "or", " ", "widow"}]}], " ", "<", 
     RowBox[{"5", " ", "couple"}]}], ",", " ", 
    RowBox[{"w92", "-", 
     RowBox[{"WEIGHT", " ", "TOTAL"}]}], ",", " ", 
    RowBox[{
     RowBox[{"d73_", "4"}], "-", 
     RowBox[{"DIRECTION", " ", "THINGS", " ", "ARE", " ", "GOING", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"1", " ", "ok"}], ",", " ", 
        RowBox[{"2", " ", "no"}]}], ")"}]}]}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"qa2_", "1"}], "-", 
     RowBox[{"EXPECTATIONS", ":", 
      RowBox[{"LIFE", " ", "IN", " ", "GENERAL", " ", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{"1", " ", "better"}], ",", " ", 
         RowBox[{"2", " ", "worse"}]}], ")"}]}]}]}]}], " ", "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{
     RowBox[{
      RowBox[{"97.3", " ", 
       RowBox[{"(", 
        RowBox[{"2022", "c"}], ")"}]}], " ", "&"}], " ", "95.1", " ", "only", 
     " ", "d7"}], ",", " ", "d70", ",", " ", 
    RowBox[{"d73_", "4"}]}], " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"94.2", " ", 
     RowBox[{"(", "2020", ")"}], " ", "nothing"}], ",", " ", 
    RowBox[{"93.2", " ", 
     RowBox[{"(", "2020", ")"}], " ", "d7"}], ",", " ", "d70"}], " ", "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{
     RowBox[{
      RowBox[{"94.1", " ", 
       RowBox[{"(", "2020", ")"}]}], "&"}], " ", "92.2", " ", 
     RowBox[{"(", "2019", ")"}], " ", "d7"}], ",", " ", "d70", ",", " ", 
    RowBox[{
     RowBox[{"d73_", "1"}], "-", 
     RowBox[{"DIRECTION", " ", "THINGS", " ", "ARE", " ", "GOING"}], "-", 
     RowBox[{"IN", " ", 
      RowBox[{"(", 
       RowBox[{"OUR", " ", "COUNTRY"}], ")"}], "\[IndentingNewLine]", 
      "qc2ab_", "7"}], "-", 
     RowBox[{"PERSONAL", " ", "VALUES", " ", "PORTRAIT"}], "-", 
     RowBox[{
     "IMPORTANT", " ", "TO", " ", "MAKE", " ", "OWN", " ", "DECISIONS", " ", 
      "ABOUT", " ", "LIFE"}]}]}], "  ", "*)"}], " ", 
  RowBox[{
   RowBox[{"a", "=", 
    RowBox[{
     RowBox[{
      RowBox[{
      "\"\<use \\\"/Volumes/barometer/\>\"", "<>", "#", "<>", 
       "\[IndentingNewLine]", 
       "\"\<.dta\\\"\\n export delimited d70 qa2_1 qa1_4 d73_4 d7 w92 using \
\\\"/Users/Shared/CCleaner/baro\>\"", "<>", "#", "<>", 
       "\"\<.csv\\\", nolabel replace\\n clear \\n\>\""}], "&"}], "/@", 
     RowBox[{"{", 
      RowBox[{"\"\<96.3\>\"", ",", "\"\<97.5\>\"", ",", "\"\<98.2\>\""}], 
      "}"}]}]}], ";", " ", 
   RowBox[{"Export", "[", 
    RowBox[{"\"\<baro.do\>\"", ",", 
     RowBox[{"StringJoin", "@", "a"}], ",", "\"\<Text\>\""}], "]"}], ";", " ", 
   RowBox[{"Export", "[", 
    RowBox[{
    "\"\<bcn.sh\>\"", ",", " ", "\[IndentingNewLine]", 
     "\"\</Volumes/Stata14/StataMP.app/Contents/MacOS/StataMP -e do \
/Users/Shared/CCleaner/baro.do\>\"", ",", "\"\<Text\>\""}], "]"}], ";", "  ", 
   
   RowBox[{"Run", "[", "\"\<sh bcn.sh\>\"", "]"}], ";"}], " "}]], "Input",
 CellChangeTimes->{
  3.891078221874508*^9, {3.905969170944304*^9, 3.9059692236662903`*^9}, {
   3.905996517992324*^9, 3.905996537026684*^9}, {3.906138879298513*^9, 
   3.906138886777708*^9}, 
   3.9061775996976233`*^9},ExpressionUUID->"e8914080-4e64-49dc-85e0-\
960cc0eac250"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"Print", "@", 
   RowBox[{"First", "@", 
    RowBox[{"Import", "[", "\"\<baro98.2.csv\>\"", "]"}]}]}], 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"life", " ", "satisfaction"}], ",", " ", "expectations", ",", " ", 
    RowBox[{"good", " ", "job"}], ",", " ", "direction", ",", " ", "married", 
    ",", " ", "weight"}], " ", "*)"}], ";"}]], "Input",
 CellLabel->
  "In[423]:=",ExpressionUUID->"1e73ae78-85e7-4671-b8c0-3bebc2f71f81"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"\<\"d70\"\>", ",", "\<\"qa2_1\"\>", ",", "\<\"qa1_4\"\>", 
   ",", "\<\"d73_4\"\>", ",", "\<\"d7\"\>", ",", "\<\"w92\"\>"}], 
  "}"}]], "Print",
 CellChangeTimes->{3.9061389456403503`*^9},
 CellLabel->
  "During evaluation of \
In[423]:=",ExpressionUUID->"47977794-f3f3-495a-b20d-470c6a211d4a"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"e1", "=", 
   RowBox[{"Flatten", "[", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"Rest", "@", 
        RowBox[{"Import", "[", 
         RowBox[{"\"\<baro\>\"", "<>", "#", "<>", "\"\<.csv\>\""}], "]"}]}], 
       "&"}], "/@", 
      RowBox[{"{", 
       RowBox[{"\"\<96.3\>\"", ",", "\"\<97.5\>\"", ",", "\"\<98.2\>\""}], 
       "}"}]}], ",", "1"}], "]"}]}], ";", " ", 
  RowBox[{"e2", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"5", "-", 
        SubscriptBox["#", 
         RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]]}], 
       ",", 
       RowBox[{"5", "-", 
        SubscriptBox["#", 
         RowBox[{"\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]]}], 
       ",", 
       SubscriptBox["#", 
        RowBox[{"\[LeftDoubleBracket]", 
         RowBox[{"-", "1"}], "\[RightDoubleBracket]"}]]}], "}"}], "&"}], "/@", 
    RowBox[{"Select", "[", 
     RowBox[{"e1", ",", 
      RowBox[{
       RowBox[{
        RowBox[{"1", "\[LessEqual]", 
         SubscriptBox["#", 
          RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], 
         "\[LessEqual]", "4"}], "&&", 
        RowBox[{"1", "\[LessEqual]", 
         SubscriptBox["#", 
          RowBox[{"\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]], 
         "\[LessEqual]", "4"}]}], "&"}]}], "]"}]}]}], ";", 
  RowBox[{"e3", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"Flatten", "@", "#"}], "&"}], "/@", 
    RowBox[{"proctot", "[", 
     RowBox[{"e2", ",", 
      RowBox[{"{", 
       RowBox[{"1", ",", "2"}], "}"}], ",", "3"}], "]"}]}]}], ";", "  ", 
  RowBox[{"e4", "=", 
   RowBox[{"Table", "[", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"{", 
        RowBox[{"a", ",", "b"}], "}"}], "=", 
       RowBox[{"Total", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"{", 
           RowBox[{
            RowBox[{
             SubscriptBox["#", 
              RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]],
              " ", 
             SubscriptBox["#", 
              RowBox[{
              "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]]}], ",", 
            
            SubscriptBox["#", 
             RowBox[{
             "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]]}], "}"}],
           " ", "&"}], "/@", 
         RowBox[{"Select", "[", 
          RowBox[{"e3", ",", 
           RowBox[{
            RowBox[{
             RowBox[{"First", "@", "#"}], "==", "i"}], "&"}]}], "]"}]}], 
        "]"}]}], ";", " ", 
      RowBox[{"a", "/", "b"}]}], ",", 
     RowBox[{"{", 
      RowBox[{"i", ",", "4"}], "}"}]}], "]"}]}], ";", " ", 
  RowBox[{"Print", "[", 
   RowBox[{
   "\"\<happiness ratio between people satisfied with their job and those not \
\>\"", ",", 
    FractionBox[
     RowBox[{"Last", "@", "e4"}], 
     RowBox[{"First", "@", "e4"}]]}], "]"}], ";"}]], "Input",
 CellChangeTimes->{{3.9061376945156593`*^9, 3.906137779666741*^9}, 
   3.906138192348505*^9, {3.906138266353189*^9, 3.906138331873804*^9}, {
   3.906138380598678*^9, 3.90613840229464*^9}, {3.906138499515894*^9, 
   3.9061385731097507`*^9}, 3.906138944131207*^9},
 CellLabel->
  "In[424]:=",ExpressionUUID->"22a0dab5-650c-4908-916c-a8545286e093"],

Cell[BoxData[
 InterpretationBox[
  RowBox[{"\<\"happiness ratio between people satisfied with their job and \
those not \"\>", "\[InvisibleSpace]", "1.9092532286782478`"}],
  SequenceForm[
  "happiness ratio between people satisfied with their job and those not ", 
   1.9092532286782478`],
  Editable->False]], "Print",
 CellChangeTimes->{{3.906138520906131*^9, 3.9061385491467867`*^9}, 
   3.906138948754834*^9},
 CellLabel->
  "During evaluation of \
In[424]:=",ExpressionUUID->"aa7f099f-2c82-4b3d-8982-22d47acb617c"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"e2", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       SubscriptBox["#", 
        RowBox[{"\[LeftDoubleBracket]", 
         RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]], ",", 
       RowBox[{"5", "-", 
        SubscriptBox["#", 
         RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]]}], 
       ",", 
       SubscriptBox["#", 
        RowBox[{"\[LeftDoubleBracket]", 
         RowBox[{"-", "1"}], "\[RightDoubleBracket]"}]]}], "}"}], "&"}], "/@", 
    RowBox[{"Select", "[", 
     RowBox[{"e1", ",", 
      RowBox[{
       RowBox[{
        RowBox[{"1", "\[LessEqual]", 
         SubscriptBox["#", 
          RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], 
         "\[LessEqual]", "4"}], "&&", 
        RowBox[{"1", "\[LessEqual]", 
         SubscriptBox["#", 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]], "\[LessEqual]", 
         "14"}]}], "&"}]}], "]"}]}]}], ";", 
  RowBox[{"e3", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"Flatten", "@", "#"}], "&"}], "/@", 
    RowBox[{"proctot", "[", 
     RowBox[{"e2", ",", 
      RowBox[{"{", 
       RowBox[{"1", ",", "2"}], "}"}], ",", "3"}], "]"}]}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{" ", 
  RowBox[{
   RowBox[{"a5", "=", 
    RowBox[{"Select", "[", 
     RowBox[{"e3", ",", 
      RowBox[{
       RowBox[{
        RowBox[{"First", "@", "#"}], "<", "5"}], "&"}]}], "]"}]}], ";", 
   RowBox[{"a", "=", 
    FractionBox[
     RowBox[{"Total", "[", 
      RowBox[{
       SubscriptBox["a5", 
        RowBox[{"\[LeftDoubleBracket]", 
         RowBox[{"All", ",", "3"}], "\[RightDoubleBracket]"}]], 
       SubscriptBox["a5", 
        RowBox[{"\[LeftDoubleBracket]", 
         RowBox[{"All", ",", "2"}], "\[RightDoubleBracket]"}]]}], "]"}], 
     RowBox[{"N", "@", 
      RowBox[{"Total", "[", 
       SubscriptBox["a5", 
        RowBox[{"\[LeftDoubleBracket]", 
         RowBox[{"All", ",", "3"}], "\[RightDoubleBracket]"}]], "]"}]}]]}], 
   ";"}]}], "\[IndentingNewLine]", 
 RowBox[{" ", 
  RowBox[{
   RowBox[{"a5", "=", 
    RowBox[{"Select", "[", 
     RowBox[{"e3", ",", 
      RowBox[{
       RowBox[{
        RowBox[{"First", "@", "#"}], ">", "10"}], "&"}]}], "]"}]}], ";", " ", 
   
   RowBox[{"b", "=", 
    FractionBox[
     RowBox[{"Total", "[", 
      RowBox[{
       SubscriptBox["a5", 
        RowBox[{"\[LeftDoubleBracket]", 
         RowBox[{"All", ",", "3"}], "\[RightDoubleBracket]"}]], 
       SubscriptBox["a5", 
        RowBox[{"\[LeftDoubleBracket]", 
         RowBox[{"All", ",", "2"}], "\[RightDoubleBracket]"}]]}], "]"}], 
     RowBox[{"N", "@", 
      RowBox[{"Total", "[", 
       SubscriptBox["a5", 
        RowBox[{"\[LeftDoubleBracket]", 
         RowBox[{"All", ",", "3"}], "\[RightDoubleBracket]"}]], "]"}]}]]}], 
   ";", 
   RowBox[{"Print", "[", 
    RowBox[{
    "\"\<happiness ratio between people living in couple vs. divorced \>\"", 
     ",", 
     RowBox[{"a", "/", "b"}]}], "]"}]}]}]}], "Input",
 CellChangeTimes->{{3.891084127690159*^9, 3.891084157153639*^9}, {
   3.8910841982091017`*^9, 3.891084213939477*^9}, 3.89108663299787*^9, 
   3.8910867737210503`*^9, {3.906138613726552*^9, 3.906138761923759*^9}, 
   3.9061388975358477`*^9, {3.906138960100957*^9, 3.906138980136231*^9}},
 CellLabel->
  "In[429]:=",ExpressionUUID->"539f0f08-865f-4f4c-8ddb-47d0906b2fdf"],

Cell[BoxData[
 InterpretationBox[
  RowBox[{"\<\"happiness ratio between people living in couple vs. divorced \
\"\>", "\[InvisibleSpace]", "1.0591617957261241`"}],
  SequenceForm[
  "happiness ratio between people living in couple vs. divorced ", 
   1.0591617957261241`],
  Editable->False]], "Print",
 CellChangeTimes->{3.906138983128211*^9},
 CellLabel->
  "During evaluation of \
In[429]:=",ExpressionUUID->"8db98f25-007a-4034-9c59-bb632156a0fc"]
}, Open  ]]
}, Closed]],

Cell[CellGroupData[{

Cell["WVS", "Subsection",
 CellChangeTimes->{{3.8746528813802357`*^9, 3.874652890384316*^9}, {
   3.875275755553361*^9, 3.875275764757107*^9}, 3.875275826740107*^9, 
   3.8765615823442507`*^9, {3.889274229897923*^9, 3.88927423138132*^9}, {
   3.889675820130479*^9, 3.889675842928904*^9}, {3.8908024561384573`*^9, 
   3.89080246381147*^9}, {3.890884919370634*^9, 
   3.8908849200010223`*^9}},ExpressionUUID->"819b65b6-4a33-46c9-8256-\
ee46797f5f02"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
  "piti", "=", "\"\<~/Movies/Amazon Drive/Data/World Values Survey/\>\""}], 
  ";", 
  RowBox[{"(*", " ", 
   RowBox[{"human", " ", "value", " ", "types"}], " ", "*)"}], " ", 
  RowBox[{"w1", "=", 
   RowBox[{"Rest", "@", 
    RowBox[{"Import", "[", 
     RowBox[{"piti", "<>", "\"\<Schwartz.csv.bz2\>\""}], "]"}]}]}], ";", 
  RowBox[{"w4", "=", 
   RowBox[{"Table", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"w2", "=", 
       RowBox[{
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{"1", "\[LessEqual]", 
              SubscriptBox["#", 
               RowBox[{"\[LeftDoubleBracket]", 
                RowBox[{"6", "+", "i"}], "\[RightDoubleBracket]"}]], 
              "\[LessEqual]", "6"}], ",", 
             FractionBox[
              RowBox[{"6", "-", 
               SubscriptBox["#", 
                RowBox[{"\[LeftDoubleBracket]", 
                 RowBox[{"6", "+", "i"}], "\[RightDoubleBracket]"}]]}], 
              "5."]}], "]"}], ",", "\[IndentingNewLine]", 
           RowBox[{"Mean", "@", 
            RowBox[{"Select", "[", 
             RowBox[{
              RowBox[{"{", 
               RowBox[{
                RowBox[{"If", "[", 
                 RowBox[{
                  RowBox[{"1", "\[LessEqual]", 
                   SubscriptBox["#", 
                    RowBox[{
                    "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]], 
                   "\[LessEqual]", "4"}], ",", 
                  FractionBox[
                   RowBox[{"4", "-", 
                    SubscriptBox["#", 
                    RowBox[{
                    "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]]}],
                    "3."]}], "]"}], ",", 
                RowBox[{"If", "[", 
                 RowBox[{
                  RowBox[{"1", "\[LessEqual]", 
                   SubscriptBox["#", 
                    RowBox[{
                    "\[LeftDoubleBracket]", "4", "\[RightDoubleBracket]"}]], 
                   "\[LessEqual]", "5"}], ",", 
                  FractionBox[
                   RowBox[{"5", "-", 
                    SubscriptBox["#", 
                    RowBox[{
                    "\[LeftDoubleBracket]", "4", "\[RightDoubleBracket]"}]]}],
                    "4."]}], "]"}], ",", 
                RowBox[{"If", "[", 
                 RowBox[{
                  RowBox[{"1", "\[LessEqual]", 
                   SubscriptBox["#", 
                    RowBox[{
                    "\[LeftDoubleBracket]", "5", "\[RightDoubleBracket]"}]], 
                   "\[LessEqual]", "10"}], ",", 
                  FractionBox[
                   RowBox[{
                    SubscriptBox["#", 
                    RowBox[{
                    "\[LeftDoubleBracket]", "5", "\[RightDoubleBracket]"}]], 
                    "-", "1"}], "9."]}], "]"}], ",", 
                RowBox[{"If", "[", 
                 RowBox[{
                  RowBox[{"1", "\[LessEqual]", 
                   SubscriptBox["#", 
                    RowBox[{
                    "\[LeftDoubleBracket]", "6", "\[RightDoubleBracket]"}]], 
                   "\[LessEqual]", "10"}], ",", 
                  FractionBox[
                   RowBox[{
                    SubscriptBox["#", 
                    RowBox[{
                    "\[LeftDoubleBracket]", "6", "\[RightDoubleBracket]"}]], 
                    "-", "1"}], "9."]}], "]"}]}], "}"}], ",", 
              RowBox[{
               RowBox[{"NumberQ", "@", "#"}], "&"}]}], "]"}]}]}], "}"}], 
         "&"}], "/@", "w1"}]}], ";", " ", 
      RowBox[{"w3", "=", 
       RowBox[{"Select", "[", 
        RowBox[{"w2", ",", 
         RowBox[{
          RowBox[{
           RowBox[{
            SubscriptBox["#", 
             RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], 
            
            SubscriptBox["#", 
             RowBox[{
             "\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]]}], ">", 
           "0"}], "&"}]}], "]"}]}], ";", " ", 
      RowBox[{"d", "=", 
       RowBox[{"First", "@", 
        RowBox[{"Differences", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"Quantile", "[", 
            RowBox[{
             SubscriptBox["w3", 
              RowBox[{"\[LeftDoubleBracket]", 
               RowBox[{"All", ",", "2"}], "\[RightDoubleBracket]"}]], ",", 
             "#"}], "]"}], "&"}], "/@", 
          RowBox[{"{", 
           RowBox[{".05", ",", ".95"}], "}"}]}], "]"}]}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"{", 
       RowBox[{"i", ",", 
        RowBox[{
         SubscriptBox[
          RowBox[{"LinearModelFit", "[", 
           RowBox[{
            RowBox[{"procmean", "[", 
             RowBox[{"w3", ",", "1", ",", "2"}], "]"}], ",", "x", ",", "x"}], 
           "]"}], 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"1", ",", "2", ",", "2"}], "\[RightDoubleBracket]"}]], "/",
          "d"}]}], "}"}]}], ",", 
     RowBox[{"{", 
      RowBox[{"i", ",", "10"}], "}"}]}], "]"}]}], ";", 
  RowBox[{"sz", "=", 
   RowBox[{"{", 
    RowBox[{
    "\"\<creative\>\"", ",", "\"\<rich\>\"", ",", "\"\<safety\>\"", ",", 
     "\"\<fun\>\"", ",", "\"\<virtuous\>\"", ",", "\"\<success\>\"", ",", 
     "\"\<excitment\>\"", ",", "\"\<conformity\>\"", ",", "\"\<ecology\>\"", 
     ",", "\"\<tradition\>\""}], "}"}]}], ";", "  ", 
  RowBox[{"w5", "=", 
   RowBox[{"SortBy", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"{", 
       RowBox[{"sz", ",", 
        SubscriptBox["w4", 
         RowBox[{"\[LeftDoubleBracket]", 
          RowBox[{"All", ",", "2"}], "\[RightDoubleBracket]"}]]}], "}"}], 
      "\[Transpose]"}], ",", 
     RowBox[{
      RowBox[{"Last", "@", "#"}], "&"}]}], "]"}]}], ";", 
  RowBox[{"w6", "=", 
   RowBox[{
    RowBox[{
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        RowBox[{"First", "@", "#"}], ",", 
        RowBox[{"Round", "[", 
         RowBox[{"100", 
          RowBox[{"(", 
           RowBox[{
            RowBox[{"Last", "@", "#"}], "-", 
            RowBox[{"Median", "@", 
             SubscriptBox["w5", 
              RowBox[{"\[LeftDoubleBracket]", 
               RowBox[{"All", ",", "2"}], "\[RightDoubleBracket]"}]]}]}], 
           ")"}]}], "]"}]}], "}"}], "&"}], "/@", "w5"}], "//", 
    "TableForm"}]}]}]], "Input",
 CellChangeTimes->{{3.891341883203321*^9, 3.89134194111077*^9}, {
   3.8913419768079853`*^9, 3.8913420104050922`*^9}, {3.8913420512131987`*^9, 
   3.891342080832519*^9}, {3.891342124595645*^9, 3.891342138357769*^9}, {
   3.891342180012402*^9, 3.891342220240652*^9}, {3.8913422550484343`*^9, 
   3.891342299732773*^9}, {3.891343333026141*^9, 3.8913433495989933`*^9}, {
   3.891343477621945*^9, 3.891343477950563*^9}, {3.891343547270011*^9, 
   3.891343552823947*^9}, {3.891344717797331*^9, 3.8913447233281097`*^9}, {
   3.891345716241646*^9, 3.891345716661212*^9}, {3.891489002486376*^9, 
   3.891489006607442*^9}, 
   3.906139808614273*^9},ExpressionUUID->"24f212e8-0e58-4675-9a12-\
b3c2d1a62bca"],

Cell[BoxData[
 TagBox[GridBox[{
    {"\<\"rich\"\>", 
     RowBox[{"-", "8"}]},
    {"\<\"tradition\"\>", 
     RowBox[{"-", "8"}]},
    {"\<\"conformity\"\>", 
     RowBox[{"-", "7"}]},
    {"\<\"safety\"\>", 
     RowBox[{"-", "7"}]},
    {"\<\"excitment\"\>", 
     RowBox[{"-", "1"}]},
    {"\<\"success\"\>", "1"},
    {"\<\"ecology\"\>", "2"},
    {"\<\"virtuous\"\>", "3"},
    {"\<\"fun\"\>", "4"},
    {"\<\"creative\"\>", "7"}
   },
   GridBoxAlignment->{"Columns" -> {{Left}}, "Rows" -> {{Baseline}}},
   GridBoxSpacings->{"Columns" -> {
       Offset[0.27999999999999997`], {
        Offset[2.0999999999999996`]}, 
       Offset[0.27999999999999997`]}, "Rows" -> {
       Offset[0.2], {
        Offset[0.4]}, 
       Offset[0.2]}}],
  Function[BoxForm`e$, 
   TableForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{
  3.8913441124854527`*^9, {3.891344724422422*^9, 3.891344871955213*^9}},
 CellLabel->
  "Out[317]//TableForm=",ExpressionUUID->"381c9b4d-d0f1-48d6-a51e-\
8170539da4d4"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"kor", "=", 
   RowBox[{"Table", "[", 
    RowBox[{
     RowBox[{"Last", "@", 
      RowBox[{"First", "@", 
       RowBox[{"Correlation", "@", 
        RowBox[{"N", "@", 
         SubscriptBox[
          RowBox[{"Select", "[", 
           RowBox[{"w1", ",", 
            RowBox[{
             RowBox[{
              RowBox[{"1", "\[LessEqual]", 
               SubscriptBox["#", 
                RowBox[{"\[LeftDoubleBracket]", 
                 RowBox[{"6", "+", "i"}], "\[RightDoubleBracket]"}]], 
               "\[LessEqual]", "6"}], "&&", 
              RowBox[{"1", "\[LessEqual]", 
               SubscriptBox["#", 
                RowBox[{"\[LeftDoubleBracket]", 
                 RowBox[{"6", "+", "j"}], "\[RightDoubleBracket]"}]], 
               "\[LessEqual]", "6"}]}], "&"}]}], "]"}], 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"All", ",", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{"6", "+", "i"}], ",", 
              RowBox[{"6", "+", "j"}]}], "}"}]}], 
           "\[RightDoubleBracket]"}]]}]}]}]}], ",", 
     RowBox[{"{", 
      RowBox[{"i", ",", "9"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"j", ",", 
       RowBox[{"i", "+", "1"}], ",", "10"}], "}"}]}], "]"}]}], ";", 
  RowBox[{"Mean", "@", 
   RowBox[{"Flatten", "@", "kor"}]}]}]], "Input",
 CellChangeTimes->{{3.8913443460085382`*^9, 3.891344422083963*^9}, {
  3.89134445261852*^9, 3.8913445010900707`*^9}, {3.891344619699399*^9, 
  3.891344631305944*^9}, {3.89134572257508*^9, 
  3.891345722921918*^9}},ExpressionUUID->"2b36b88c-697d-47fd-9308-\
287dcb8db14e"],

Cell[BoxData["0.2455099419555198`"], "Output",
 CellChangeTimes->{
  3.891344375642675*^9, {3.89134440777043*^9, 3.891344416103138*^9}, {
   3.891344453151833*^9, 3.891344515368688*^9}, {3.8913446431332483`*^9, 
   3.8913446617974873`*^9}},
 CellLabel->
  "Out[303]=",ExpressionUUID->"971f8555-7ba9-48bd-8dda-22884064019c"]
}, Open  ]],

Cell[BoxData[
 RowBox[{"ListLogPlot", "@", 
  RowBox[{"Sort", "@", 
   RowBox[{"Tally", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"Round", "[", 
       RowBox[{"10", " ", 
        RowBox[{"Mean", "@", 
         RowBox[{"Select", "[", 
          RowBox[{"#", ",", 
           RowBox[{
            RowBox[{"1", "\[LessEqual]", "#", "\[LessEqual]", "6"}], "&"}]}], 
          "]"}]}]}], "]"}], "&"}], "/@", 
     SubscriptBox["w1", 
      RowBox[{"\[LeftDoubleBracket]", 
       RowBox[{"All", ",", 
        RowBox[{"6", "+", 
         RowBox[{"Range", "@", "10"}]}]}], "\[RightDoubleBracket]"}]]}], 
    "]"}]}]}]], "Input",
 CellChangeTimes->{{3.891343679473504*^9, 3.891343866918848*^9}, {
  3.8913438973327913`*^9, 3.891343956789106*^9}},
 CellLabel->
  "In[270]:=",ExpressionUUID->"c4d0e28f-2b8b-488e-a00a-afa2c645e1b7"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"w2", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       FractionBox[
        RowBox[{"6", "-", 
         RowBox[{"Mean", "@", 
          RowBox[{"Select", "[", 
           RowBox[{
            SubscriptBox["#", 
             RowBox[{"\[LeftDoubleBracket]", 
              RowBox[{"6", "+", 
               RowBox[{"Range", "@", "10"}]}], "\[RightDoubleBracket]"}]], 
            ",", 
            RowBox[{
             RowBox[{"1", "\[LessEqual]", "#", "\[LessEqual]", "6"}], "&"}]}],
            "]"}]}]}], "5."], ",", "\[IndentingNewLine]", 
       RowBox[{"Mean", "@", 
        RowBox[{"Select", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{"1", "\[LessEqual]", 
               SubscriptBox["#", 
                RowBox[{
                "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]], 
               "\[LessEqual]", "4"}], ",", 
              FractionBox[
               RowBox[{"4", "-", 
                SubscriptBox["#", 
                 RowBox[{
                 "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]]}], 
               "3."]}], "]"}], ",", 
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{"1", "\[LessEqual]", 
               SubscriptBox["#", 
                RowBox[{
                "\[LeftDoubleBracket]", "4", "\[RightDoubleBracket]"}]], 
               "\[LessEqual]", "5"}], ",", 
              FractionBox[
               RowBox[{"5", "-", 
                SubscriptBox["#", 
                 RowBox[{
                 "\[LeftDoubleBracket]", "4", "\[RightDoubleBracket]"}]]}], 
               "4."]}], "]"}], ",", 
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{"1", "\[LessEqual]", 
               SubscriptBox["#", 
                RowBox[{
                "\[LeftDoubleBracket]", "5", "\[RightDoubleBracket]"}]], 
               "\[LessEqual]", "10"}], ",", 
              FractionBox[
               RowBox[{
                SubscriptBox["#", 
                 RowBox[{
                 "\[LeftDoubleBracket]", "5", "\[RightDoubleBracket]"}]], "-",
                 "1"}], "9."]}], "]"}], ",", 
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{"1", "\[LessEqual]", 
               SubscriptBox["#", 
                RowBox[{
                "\[LeftDoubleBracket]", "6", "\[RightDoubleBracket]"}]], 
               "\[LessEqual]", "10"}], ",", 
              FractionBox[
               RowBox[{
                SubscriptBox["#", 
                 RowBox[{
                 "\[LeftDoubleBracket]", "6", "\[RightDoubleBracket]"}]], "-",
                 "1"}], "9."]}], "]"}]}], "}"}], ",", 
          RowBox[{
           RowBox[{"NumberQ", "@", "#"}], "&"}]}], "]"}]}]}], "}"}], "&"}], "/@",
     "w1"}]}], ";", " ", 
  RowBox[{"w3", "=", 
   RowBox[{"Select", "[", 
    RowBox[{"w2", ",", 
     RowBox[{
      RowBox[{
       RowBox[{
        SubscriptBox["#", 
         RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], 
        SubscriptBox["#", 
         RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]]}], 
       ">", "0"}], "&"}]}], "]"}]}], ";", "  ", 
  RowBox[{"a", "=", 
   RowBox[{"procmean", "[", 
    RowBox[{"w3", ",", "1", ",", "2"}], "]"}]}], ";", " ", 
  RowBox[{"h", "=", 
   RowBox[{
    SubscriptBox[
     RowBox[{"LinearModelFit", "[", 
      RowBox[{"a", ",", "x", ",", "x"}], "]"}], 
     RowBox[{"\[LeftDoubleBracket]", 
      RowBox[{"1", ",", "2", ",", "2"}], "\[RightDoubleBracket]"}]], "/", 
    "d"}]}]}]], "Input",
 CellChangeTimes->{{3.8913425040817003`*^9, 3.891342518554668*^9}, {
   3.891342568877296*^9, 3.891342584862441*^9}, {3.891342630213841*^9, 
   3.891342660338228*^9}, 3.891343571017777*^9, {3.891344047711769*^9, 
   3.891344067151189*^9}, {3.8913441610437517`*^9, 3.891344167975898*^9}, {
   3.891344220352151*^9, 3.891344223474249*^9}},
 CellLabel->
  "In[279]:=",ExpressionUUID->"2c24ae30-30cf-48d7-8028-feafc5f9aecc"],

Cell[BoxData["0.2572365493852399`"], "Output",
 CellChangeTimes->{
  3.89134357331607*^9, {3.891344054204535*^9, 3.891344069325218*^9}, 
   3.891344167553925*^9, 3.8913442265968933`*^9},
 CellLabel->
  "Out[279]=",ExpressionUUID->"7f84a292-cf45-4918-8f54-752117c940ef"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"w1", "=", 
    RowBox[{"Rest", "@", 
     RowBox[{"Import", "[", 
      RowBox[{"piti", "<>", "\"\<WVS7happy.csv.bz2\>\""}], "]"}]}]}], ";"}], 
  RowBox[{"(*", " ", 
   RowBox[{"iso3", ",", " ", "weight", ",", " ", 
    RowBox[{"happiness", " ", "1", " ", "best", " ", "4", " ", "worst"}], ",",
     " ", 
    RowBox[{"health", " ", "1", " ", "best", " ", "5", " ", "worst"}], ",", 
    " ", 
    RowBox[{"freedom", " ", "10", " ", "best", " ", "1", " ", "worst"}], ",", 
    " ", 
    RowBox[{
    "life", " ", "satisfaction", " ", "10", " ", "best", " ", "1", " ", 
     "worst"}], ",", " ", 
    RowBox[{
    "money", " ", "satisfaction", " ", "10", " ", "best", " ", "1", " ", 
     "worst"}], ",", " ", 
    RowBox[{
    "education", " ", "0", " ", "mini", " ", "to", " ", "8", " ", "maxi"}], 
    ",", " ", 
    RowBox[{
    "Scale", " ", "of", " ", "incomes", " ", "1", " ", "lowest", " ", "10", 
     " ", "highest"}]}], " ", "\[IndentingNewLine]", "*)"}]}]], "Input",
 CellChangeTimes->{{3.8913392025407543`*^9, 3.891339269111644*^9}, {
   3.891339473886318*^9, 3.891339483328328*^9}, 
   3.906139805704303*^9},ExpressionUUID->"c294f6bf-9087-4717-814e-\
16da652e3f75"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"w2", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"0", "\[LessEqual]", 
          SubscriptBox["#", 
           RowBox[{"\[LeftDoubleBracket]", 
            RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]], "\[LessEqual]", 
          "8"}], ",", 
         RowBox[{"1", "+", 
          SubscriptBox["#", 
           RowBox[{"\[LeftDoubleBracket]", 
            RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]]}]}], "]"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"Mean", "@", 
        RowBox[{"Select", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{"1", "\[LessEqual]", 
               SubscriptBox["#", 
                RowBox[{
                "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]], 
               "\[LessEqual]", "4"}], ",", 
              FractionBox[
               RowBox[{"4", "-", 
                SubscriptBox["#", 
                 RowBox[{
                 "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]]}], 
               "3."]}], "]"}], ",", 
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{"1", "\[LessEqual]", 
               SubscriptBox["#", 
                RowBox[{
                "\[LeftDoubleBracket]", "4", "\[RightDoubleBracket]"}]], 
               "\[LessEqual]", "5"}], ",", 
              FractionBox[
               RowBox[{"5", "-", 
                SubscriptBox["#", 
                 RowBox[{
                 "\[LeftDoubleBracket]", "4", "\[RightDoubleBracket]"}]]}], 
               "4."]}], "]"}], ",", 
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{"1", "\[LessEqual]", 
               SubscriptBox["#", 
                RowBox[{
                "\[LeftDoubleBracket]", "5", "\[RightDoubleBracket]"}]], 
               "\[LessEqual]", "10"}], ",", 
              FractionBox[
               RowBox[{
                SubscriptBox["#", 
                 RowBox[{
                 "\[LeftDoubleBracket]", "5", "\[RightDoubleBracket]"}]], "-",
                 "1"}], "9."]}], "]"}], ",", 
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{"1", "\[LessEqual]", 
               SubscriptBox["#", 
                RowBox[{
                "\[LeftDoubleBracket]", "6", "\[RightDoubleBracket]"}]], 
               "\[LessEqual]", "10"}], ",", 
              FractionBox[
               RowBox[{
                SubscriptBox["#", 
                 RowBox[{
                 "\[LeftDoubleBracket]", "6", "\[RightDoubleBracket]"}]], "-",
                 "1"}], "9."]}], "]"}]}], "}"}], ",", 
          RowBox[{
           RowBox[{"NumberQ", "@", "#"}], "&"}]}], "]"}]}]}], "}"}], "&"}], "/@",
     "w1"}]}], ";", " ", 
  RowBox[{"w3", "=", 
   RowBox[{"Select", "[", 
    RowBox[{"w2", ",", 
     RowBox[{
      RowBox[{
       RowBox[{
        SubscriptBox["#", 
         RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], 
        SubscriptBox["#", 
         RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]]}], 
       ">", "0"}], "&"}]}], "]"}]}], ";", 
  RowBox[{"(*", " ", 
   RowBox[{"happiness", " ", "step", " ", "in", " ", "%"}], " ", "*)"}], 
  RowBox[{"d", "=", 
   RowBox[{"First", "@", 
    RowBox[{"Differences", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"Quantile", "[", 
        RowBox[{
         SubscriptBox["w3", 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"All", ",", "2"}], "\[RightDoubleBracket]"}]], ",", "#"}], 
        "]"}], "&"}], "/@", 
      RowBox[{"{", 
       RowBox[{".05", ",", ".95"}], "}"}]}], "]"}]}]}], ";", 
  RowBox[{"900", " ", 
   RowBox[{
    SubscriptBox[
     RowBox[{"LinearModelFit", "[", 
      RowBox[{
       RowBox[{"procmean", "[", 
        RowBox[{"w3", ",", "1", ",", "2"}], "]"}], ",", "x", ",", "x"}], 
      "]"}], 
     RowBox[{"\[LeftDoubleBracket]", 
      RowBox[{"1", ",", "2", ",", "2"}], "\[RightDoubleBracket]"}]], "/", 
    "d"}]}]}]], "Input",
 CellChangeTimes->{
  3.8913401792112083`*^9, {3.891340352496273*^9, 3.891340377221326*^9}, {
   3.891340559791793*^9, 3.891340606545003*^9}, {3.8913406493768167`*^9, 
   3.891340694510352*^9}, {3.8913411002836437`*^9, 3.891341145699149*^9}},
 CellLabel->
  "In[201]:=",ExpressionUUID->"dcc61ead-7b7e-42fb-9b38-af7527373bb6"],

Cell[BoxData["12.72976217035863`"], "Output",
 CellChangeTimes->{3.891341147360178*^9},
 CellLabel->
  "Out[201]=",ExpressionUUID->"64439df8-f346-4603-abb0-ade773126ce5"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"w1", "=", 
   RowBox[{"Rest", "@", 
    RowBox[{"Import", "[", 
     RowBox[{"piti", "<>", "\"\<WVS6happy.csv.bz2\>\""}], "]"}]}]}], ";", 
  RowBox[{"(*", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"V2", " ", "country", " ", "numeric", " ", "code"}], ",", " ", 
    RowBox[{"V258", " ", "weight"}], ",", " ", 
    RowBox[{"V10", " ", "happy", " ", "1", "to4"}], ",", " ", 
    RowBox[{"V11", " ", "health", " ", "1", "to4"}], ",", " ", 
    RowBox[{"V55", " ", "freedom", " ", "1", "to10"}], ",", " ", 
    RowBox[{"V23", " ", "life", " ", "good", " ", "1", "to10"}], ",", " ", 
    RowBox[{"V59", " ", "mony", " ", "good", " ", "1", "to10"}], ",", " ", 
    RowBox[{"V239", " ", "decile"}]}], "\[IndentingNewLine]", "*)"}], 
  RowBox[{"w2", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"1", "\[LessEqual]", 
          SubscriptBox["#", 
           RowBox[{"\[LeftDoubleBracket]", 
            RowBox[{"-", "1"}], "\[RightDoubleBracket]"}]], "\[LessEqual]", 
          "10"}], ",", 
         SubscriptBox["#", 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"-", "1"}], "\[RightDoubleBracket]"}]]}], "]"}], ",", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"1", "\[LessEqual]", 
          SubscriptBox["#", 
           RowBox[{"\[LeftDoubleBracket]", 
            RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]], "\[LessEqual]", 
          "9"}], ",", 
         SubscriptBox["#", 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]]}], "]"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"100", " ", 
        RowBox[{"Mean", "@", 
         RowBox[{"Select", "[", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{"1", "\[LessEqual]", 
                SubscriptBox["#", 
                 RowBox[{
                 "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]], 
                "\[LessEqual]", "4"}], ",", 
               FractionBox[
                RowBox[{"4", "-", 
                 SubscriptBox["#", 
                  RowBox[{
                  "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]]}], 
                "3."]}], "]"}], ",", 
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{"1", "\[LessEqual]", 
                SubscriptBox["#", 
                 RowBox[{
                 "\[LeftDoubleBracket]", "4", "\[RightDoubleBracket]"}]], 
                "\[LessEqual]", "4"}], ",", 
               FractionBox[
                RowBox[{"4", "-", 
                 SubscriptBox["#", 
                  RowBox[{
                  "\[LeftDoubleBracket]", "4", "\[RightDoubleBracket]"}]]}], 
                "3."]}], "]"}], ",", 
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{"1", "\[LessEqual]", 
                SubscriptBox["#", 
                 RowBox[{
                 "\[LeftDoubleBracket]", "5", "\[RightDoubleBracket]"}]], 
                "\[LessEqual]", "10"}], ",", 
               FractionBox[
                RowBox[{
                 SubscriptBox["#", 
                  RowBox[{
                  "\[LeftDoubleBracket]", "5", "\[RightDoubleBracket]"}]], 
                 "-", "1"}], "9."]}], "]"}], ",", 
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{"1", "\[LessEqual]", 
                SubscriptBox["#", 
                 RowBox[{
                 "\[LeftDoubleBracket]", "6", "\[RightDoubleBracket]"}]], 
                "\[LessEqual]", "10"}], ",", 
               FractionBox[
                RowBox[{
                 SubscriptBox["#", 
                  RowBox[{
                  "\[LeftDoubleBracket]", "6", "\[RightDoubleBracket]"}]], 
                 "-", "1"}], "9."]}], "]"}], ",", 
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{"1", "\[LessEqual]", 
                SubscriptBox["#", 
                 RowBox[{
                 "\[LeftDoubleBracket]", "7", "\[RightDoubleBracket]"}]], 
                "\[LessEqual]", "10"}], ",", 
               FractionBox[
                RowBox[{
                 SubscriptBox["#", 
                  RowBox[{
                  "\[LeftDoubleBracket]", "7", "\[RightDoubleBracket]"}]], 
                 "-", "1"}], "9."]}], "]"}]}], "}"}], ",", 
           RowBox[{
            RowBox[{"NumberQ", "@", "#"}], "&"}]}], "]"}]}]}]}], "}"}], "&"}],
     "/@", "w1"}]}], ";", 
  RowBox[{"w3", "=", 
   RowBox[{"Select", "[", 
    RowBox[{"w2", ",", 
     RowBox[{
      RowBox[{
       RowBox[{
        SubscriptBox["#", 
         RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], 
        SubscriptBox["#", 
         RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]]}], 
       ">", "0"}], "&"}]}], "]"}]}], ";", " ", 
  RowBox[{
   RowBox[{"r", "[", "2", "]"}], "=", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"procmean", "[", 
      RowBox[{"w3", ",", "1", ",", "3"}], "]"}], ",", 
     RowBox[{"procmean", "[", 
      RowBox[{"w3", ",", "2", ",", "3"}], "]"}]}], "}"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.8908851112065163`*^9, 3.890885111915557*^9}, {
   3.8908870695316668`*^9, 3.8908870908248777`*^9}, {3.890887489303067*^9, 
   3.8908875161580553`*^9}, {3.890887618933918*^9, 3.8908876193647423`*^9}, {
   3.89088919050745*^9, 3.8908892080347357`*^9}, {3.890889260368746*^9, 
   3.890889279385282*^9}, {3.890890317679597*^9, 3.890890350173337*^9}, {
   3.890902620684431*^9, 3.8909026323793716`*^9}, {3.8909032620042067`*^9, 
   3.890903283867476*^9}, {3.8909033377666683`*^9, 3.890903410228429*^9}, {
   3.890903456026864*^9, 3.89090353804275*^9}, {3.890903846451972*^9, 
   3.890903871189788*^9}, 3.890905005936267*^9, {3.890926163848637*^9, 
   3.890926164034369*^9}, {3.8909269871536016`*^9, 3.890927016329751*^9}, {
   3.8909271507758093`*^9, 3.8909271647681637`*^9}},
 CellLabel->
  "In[129]:=",ExpressionUUID->"52ffd214-a198-4036-9679-7665c5e2d0dc"],

Cell[BoxData[
 RowBox[{
  RowBox[{"w1", "=", 
   RowBox[{"Rest", "@", 
    RowBox[{"Import", "[", 
     RowBox[{"piti", "<>", "\"\<WVS5happy.csv.bz2\>\""}], "]"}]}]}], ";", 
  RowBox[{"w2", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"1", "\[LessEqual]", 
          SubscriptBox["#", 
           RowBox[{"\[LeftDoubleBracket]", 
            RowBox[{"-", "1"}], "\[RightDoubleBracket]"}]], "\[LessEqual]", 
          "10"}], ",", 
         SubscriptBox["#", 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"-", "1"}], "\[RightDoubleBracket]"}]]}], "]"}], ",", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"1", "\[LessEqual]", 
          SubscriptBox["#", 
           RowBox[{"\[LeftDoubleBracket]", 
            RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]], "\[LessEqual]", 
          "9"}], ",", 
         SubscriptBox["#", 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]]}], "]"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"100", " ", 
        RowBox[{"Mean", "@", 
         RowBox[{"Select", "[", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{"1", "\[LessEqual]", 
                SubscriptBox["#", 
                 RowBox[{
                 "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]], 
                "\[LessEqual]", "4"}], ",", 
               FractionBox[
                RowBox[{"4", "-", 
                 SubscriptBox["#", 
                  RowBox[{
                  "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]]}], 
                "3."]}], "]"}], ",", 
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{"1", "\[LessEqual]", 
                SubscriptBox["#", 
                 RowBox[{
                 "\[LeftDoubleBracket]", "4", "\[RightDoubleBracket]"}]], 
                "\[LessEqual]", "5"}], ",", 
               FractionBox[
                RowBox[{"5", "-", 
                 SubscriptBox["#", 
                  RowBox[{
                  "\[LeftDoubleBracket]", "4", "\[RightDoubleBracket]"}]]}], 
                "4."]}], "]"}], ",", 
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{"1", "\[LessEqual]", 
                SubscriptBox["#", 
                 RowBox[{
                 "\[LeftDoubleBracket]", "5", "\[RightDoubleBracket]"}]], 
                "\[LessEqual]", "10"}], ",", 
               FractionBox[
                RowBox[{
                 SubscriptBox["#", 
                  RowBox[{
                  "\[LeftDoubleBracket]", "5", "\[RightDoubleBracket]"}]], 
                 "-", "1"}], "9."]}], "]"}], ",", 
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{"1", "\[LessEqual]", 
                SubscriptBox["#", 
                 RowBox[{
                 "\[LeftDoubleBracket]", "6", "\[RightDoubleBracket]"}]], 
                "\[LessEqual]", "10"}], ",", 
               FractionBox[
                RowBox[{
                 SubscriptBox["#", 
                  RowBox[{
                  "\[LeftDoubleBracket]", "6", "\[RightDoubleBracket]"}]], 
                 "-", "1"}], "9."]}], "]"}], ",", 
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{"1", "\[LessEqual]", 
                SubscriptBox["#", 
                 RowBox[{
                 "\[LeftDoubleBracket]", "7", "\[RightDoubleBracket]"}]], 
                "\[LessEqual]", "10"}], ",", 
               FractionBox[
                RowBox[{
                 SubscriptBox["#", 
                  RowBox[{
                  "\[LeftDoubleBracket]", "7", "\[RightDoubleBracket]"}]], 
                 "-", "1"}], "9."]}], "]"}]}], "}"}], ",", 
           RowBox[{
            RowBox[{"NumberQ", "@", "#"}], "&"}]}], "]"}]}]}]}], "}"}], "&"}],
     "/@", "w1"}]}], ";", 
  RowBox[{"w3", "=", 
   RowBox[{"Select", "[", 
    RowBox[{"w2", ",", 
     RowBox[{
      RowBox[{
       RowBox[{
        SubscriptBox["#", 
         RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], 
        SubscriptBox["#", 
         RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]]}], 
       ">", "0"}], "&"}]}], "]"}]}], ";", " ", 
  RowBox[{
   RowBox[{"r", "[", "3", "]"}], "=", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"procmean", "[", 
      RowBox[{"w3", ",", "1", ",", "3"}], "]"}], ",", 
     RowBox[{"procmean", "[", 
      RowBox[{"w3", ",", "2", ",", "3"}], "]"}]}], "}"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.890904887864882*^9, 3.890904910345785*^9}, {
   3.890904966962686*^9, 3.890904970361415*^9}, 3.890905004016801*^9, {
   3.890926158890279*^9, 3.890926159039669*^9}, {3.890927027008513*^9, 
   3.89092702864158*^9}, {3.89092717394488*^9, 3.890927190851487*^9}},
 CellLabel->
  "In[130]:=",ExpressionUUID->"6d5699c6-d380-4db1-b5e6-03168965052d"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"w1", "=", 
   RowBox[{"Rest", "@", 
    RowBox[{"Import", "[", 
     RowBox[{"piti", "<>", "\"\<WVS4happy.csv.bz2\>\""}], "]"}]}]}], ";", " ", 
  RowBox[{"w2", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"1", "\[LessEqual]", 
          SubscriptBox["#", 
           RowBox[{"\[LeftDoubleBracket]", 
            RowBox[{"-", "1"}], "\[RightDoubleBracket]"}]], "\[LessEqual]", 
          "10"}], ",", 
         SubscriptBox["#", 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"-", "1"}], "\[RightDoubleBracket]"}]]}], "]"}], ",", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"1", "\[LessEqual]", 
          SubscriptBox["#", 
           RowBox[{"\[LeftDoubleBracket]", 
            RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]], "\[LessEqual]", 
          "9"}], ",", 
         SubscriptBox["#", 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]]}], "]"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"100", " ", 
        RowBox[{"Mean", "@", 
         RowBox[{"Select", "[", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{"1", "\[LessEqual]", 
                SubscriptBox["#", 
                 RowBox[{
                 "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]], 
                "\[LessEqual]", "4"}], ",", 
               FractionBox[
                RowBox[{"4", "-", 
                 SubscriptBox["#", 
                  RowBox[{
                  "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]]}], 
                "3."]}], "]"}], ",", 
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{"1", "\[LessEqual]", 
                SubscriptBox["#", 
                 RowBox[{
                 "\[LeftDoubleBracket]", "4", "\[RightDoubleBracket]"}]], 
                "\[LessEqual]", "5"}], ",", 
               FractionBox[
                RowBox[{"5", "-", 
                 SubscriptBox["#", 
                  RowBox[{
                  "\[LeftDoubleBracket]", "4", "\[RightDoubleBracket]"}]]}], 
                "4."]}], "]"}], ",", 
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{"1", "\[LessEqual]", 
                SubscriptBox["#", 
                 RowBox[{
                 "\[LeftDoubleBracket]", "5", "\[RightDoubleBracket]"}]], 
                "\[LessEqual]", "10"}], ",", 
               FractionBox[
                RowBox[{
                 SubscriptBox["#", 
                  RowBox[{
                  "\[LeftDoubleBracket]", "5", "\[RightDoubleBracket]"}]], 
                 "-", "1"}], "9."]}], "]"}], ",", 
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{"1", "\[LessEqual]", 
                SubscriptBox["#", 
                 RowBox[{
                 "\[LeftDoubleBracket]", "6", "\[RightDoubleBracket]"}]], 
                "\[LessEqual]", "10"}], ",", 
               FractionBox[
                RowBox[{
                 SubscriptBox["#", 
                  RowBox[{
                  "\[LeftDoubleBracket]", "6", "\[RightDoubleBracket]"}]], 
                 "-", "1"}], "9."]}], "]"}], ",", 
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{"1", "\[LessEqual]", 
                SubscriptBox["#", 
                 RowBox[{
                 "\[LeftDoubleBracket]", "7", "\[RightDoubleBracket]"}]], 
                "\[LessEqual]", "10"}], ",", 
               FractionBox[
                RowBox[{
                 SubscriptBox["#", 
                  RowBox[{
                  "\[LeftDoubleBracket]", "7", "\[RightDoubleBracket]"}]], 
                 "-", "1"}], "9."]}], "]"}]}], "}"}], ",", 
           RowBox[{
            RowBox[{"NumberQ", "@", "#"}], "&"}]}], "]"}]}]}]}], "}"}], "&"}],
     "/@", "w1"}]}], ";", 
  RowBox[{"w3", "=", 
   RowBox[{"Select", "[", 
    RowBox[{"w2", ",", 
     RowBox[{
      RowBox[{
       RowBox[{
        SubscriptBox["#", 
         RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], 
        SubscriptBox["#", 
         RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], 
        SubscriptBox["#", 
         RowBox[{"\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]]}], 
       ">", "0"}], "&"}]}], "]"}]}], ";", " ", 
  RowBox[{
   RowBox[{"r", "[", "4", "]"}], "=", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"procmean", "[", 
      RowBox[{"w3", ",", "1", ",", "3"}], "]"}], ",", 
     RowBox[{"procmean", "[", 
      RowBox[{"w3", ",", "2", ",", "3"}], "]"}]}], "}"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.890905411361258*^9, 3.8909054139812183`*^9}, {
  3.8909261523913813`*^9, 3.890926156094336*^9}, {3.890927201511064*^9, 
  3.890927222213752*^9}, {3.890927587482745*^9, 3.890927596971635*^9}, {
  3.8909276389116488`*^9, 3.890927642698031*^9}},
 CellLabel->
  "In[131]:=",ExpressionUUID->"bc582a80-5c01-47dc-a5b3-a23c06305997"],

Cell[BoxData["6.790123456790123`"], "Output",
 CellChangeTimes->{{3.890927510895123*^9, 3.890927546152491*^9}, {
   3.890927660053349*^9, 3.890927675810145*^9}, {3.890927843138637*^9, 
   3.8909278490088673`*^9}, 3.890928101009652*^9, 3.891334326052446*^9},
 CellLabel->
  "Out[132]=",ExpressionUUID->"a92e7594-949d-4d4d-a907-80782b821bce"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
   "happiness", " ", "jump", " ", "over", " ", "full", " ", "income", " ", 
    "progress"}], " ", "*)"}], 
  RowBox[{
   RowBox[{
    RowBox[{"a1", "=", 
     RowBox[{"procmean", "[", 
      RowBox[{
       RowBox[{"Flatten", "[", 
        RowBox[{
         RowBox[{
          RowBox[{
           RowBox[{"First", "@", 
            RowBox[{"r", "@", "#"}]}], "&"}], "/@", 
          RowBox[{"{", 
           RowBox[{"1", ",", "2", ",", "3", ",", "4"}], "}"}]}], ",", "1"}], 
        "]"}], ",", "1", ",", "2"}], "]"}]}], ";", 
    RowBox[{"9", " ", 
     SubscriptBox[
      RowBox[{"LinearModelFit", "[", 
       RowBox[{"a1", ",", "x", ",", "x"}], "]"}], 
      RowBox[{"\[LeftDoubleBracket]", 
       RowBox[{"1", ",", "2", ",", "2"}], "\[RightDoubleBracket]"}]]}]}], 
   "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{
    "happiness", " ", "jump", " ", "over", " ", "full", " ", "educational", 
     " ", "progress"}], " ", "*)"}], 
   RowBox[{
    RowBox[{"a2", "=", 
     RowBox[{"procmean", "[", 
      RowBox[{
       RowBox[{"Flatten", "[", 
        RowBox[{
         RowBox[{
          RowBox[{
           RowBox[{"Last", "@", 
            RowBox[{"r", "@", "#"}]}], "&"}], "/@", 
          RowBox[{"{", 
           RowBox[{"1", ",", "2", ",", "3", ",", "4"}], "}"}]}], ",", "1"}], 
        "]"}], ",", "1", ",", "2"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{"8", " ", 
    SubscriptBox[
     RowBox[{"LinearModelFit", "[", 
      RowBox[{"a2", ",", "x", ",", "x"}], "]"}], 
     RowBox[{"\[LeftDoubleBracket]", 
      RowBox[{"1", ",", "2", ",", "2"}], 
      "\[RightDoubleBracket]"}]]}]}]}]], "Input",
 CellChangeTimes->{{3.89092795111023*^9, 3.890928030310483*^9}, {
  3.890928109594737*^9, 3.89092815434975*^9}},
 CellLabel->
  "In[133]:=",ExpressionUUID->"642f3511-24c4-4922-82d6-d7b019b808c1"],

Cell[BoxData["22.27361519132404`"], "Output",
 CellChangeTimes->{{3.890927976941512*^9, 3.890928030892313*^9}, 
   3.8909281556047163`*^9, 3.891334326193869*^9},
 CellLabel->
  "Out[133]=",ExpressionUUID->"9a6f9f57-4023-482b-a1f2-18180dc3306e"],

Cell[BoxData["12.36279407588086`"], "Output",
 CellChangeTimes->{{3.890927976941512*^9, 3.890928030892313*^9}, 
   3.8909281556047163`*^9, 3.891334326195711*^9},
 CellLabel->
  "Out[135]=",ExpressionUUID->"1f9ded59-5b24-4118-95ee-32d107578703"]
}, Open  ]],

Cell[BoxData[{
 RowBox[{"ListPlot", "[", 
  RowBox[{"a1", ",", 
   RowBox[{"option1", "[", "\"\<\>\"", "]"}], ",", 
   RowBox[{"PlotLabel", "->", "\"\<Income\>\""}]}], 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{"ListPlot", "[", 
  RowBox[{"a2", ",", 
   RowBox[{"option1", "[", "\"\<\>\"", "]"}], ",", 
   RowBox[{"PlotLabel", "->", "\"\<Education\>\""}]}], "]"}]}], "Input",
 CellChangeTimes->{{3.890905022505835*^9, 3.890905027624606*^9}, {
  3.890905473394251*^9, 3.8909054820949497`*^9}, {3.8909272272265873`*^9, 
  3.8909272745370007`*^9}, {3.890927885165299*^9, 3.890927949718545*^9}, {
  3.890928011023876*^9, 3.890928013985909*^9}},
 CellLabel->
  "In[136]:=",ExpressionUUID->"f0318c33-da61-4f59-ab1b-191816f61488"]
}, Closed]],

Cell[CellGroupData[{

Cell["Kahneman Killingsworth", "Subsection",
 CellChangeTimes->{{3.8746528813802357`*^9, 3.874652890384316*^9}, {
   3.875275755553361*^9, 3.875275764757107*^9}, 3.875275826740107*^9, 
   3.8765615823442507`*^9, {3.889274229897923*^9, 3.88927423138132*^9}, {
   3.889675820130479*^9, 3.889675842928904*^9}, {3.8908024561384573`*^9, 
   3.89080246381147*^9}},ExpressionUUID->"7a440a24-ef44-4145-949c-\
067a081d9a70"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{"Export", "[", 
    RowBox[{
     RowBox[{"path", "<>", "\"\<data/kaneman.csv.bz2\>\""}], ",", 
     RowBox[{"Import", "[", "\"\<kaneman.csv\>\"", "]"}]}], "]"}], "*)"}], 
  RowBox[{
   RowBox[{"k0", "=", 
    RowBox[{
     RowBox[{"Import", "[", 
      RowBox[{"path", "<>", "\"\<data/kaneman.csv.bz2\>\""}], "]"}], "/.", 
     " ", 
     RowBox[{"625000", "->", "400000."}]}]}], ";", " ", 
   RowBox[{"Print", "@", 
    RowBox[{"First", "@", "k0"}]}], ";", "  ", 
   RowBox[{
    RowBox[{
     RowBox[{
      RowBox[{"Quantile", "[", 
       RowBox[{
        RowBox[{"Rest", "@", 
         SubscriptBox["k0", 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]]}], ",", 
        "#"}], "]"}], "&"}], "/@", 
     RowBox[{"{", 
      RowBox[{"0", ",", "1"}], "}"}]}], "+", 
    RowBox[{
     FractionBox["2.5", "100"], 
     RowBox[{"{", 
      RowBox[{"1", ",", 
       RowBox[{"-", "1"}]}], "}"}], 
     RowBox[{"(*", " ", 
      RowBox[{"range", " ", "of", " ", "wellbeing"}], " ", 
      "*)"}]}]}]}]}]], "Input",
 CellChangeTimes->{{3.8908024664242773`*^9, 3.890802520581337*^9}, {
   3.8908025629252357`*^9, 3.8908025688129263`*^9}, {3.89080378187084*^9, 
   3.890803782058086*^9}, {3.890803826065835*^9, 3.8908038347150793`*^9}, {
   3.890804136969614*^9, 3.8908041408013697`*^9}, {3.890804258960949*^9, 
   3.890804284753173*^9}, {3.8908058430615797`*^9, 3.8908058603073997`*^9}, {
   3.8908067838712397`*^9, 3.8908067979907427`*^9}, {3.8908068528070498`*^9, 
   3.890806858117463*^9}, {3.890806955830113*^9, 3.8908069619817123`*^9}, {
   3.890807163008163*^9, 3.8908071635254717`*^9}, 3.890807548337365*^9, {
   3.890807710798791*^9, 3.890807798046915*^9}, {3.890807835360178*^9, 
   3.890807839463067*^9}, {3.8908822329074783`*^9, 3.890882234667754*^9}, {
   3.906140356291239*^9, 3.906140362090444*^9}, {3.906140431838472*^9, 
   3.906140448521411*^9}, {3.90614051337646*^9, 3.906140518559259*^9}, {
   3.9061723625931273`*^9, 3.9061724030596523`*^9}, {3.9061724447720013`*^9, 
   3.9061724452184057`*^9}, {3.906172479338628*^9, 3.90617249633502*^9}, {
   3.906172542315248*^9, 3.9061725706337223`*^9}, {3.906172745627146*^9, 
   3.906172746214663*^9}, {3.906172777554921*^9, 3.906172957325292*^9}, {
   3.90617330148495*^9, 3.9061733141889153`*^9}, {3.9061738566905603`*^9, 
   3.906173860836954*^9}, {3.9061744007014027`*^9, 3.906174402392211*^9}},
 CellLabel->
  "In[167]:=",ExpressionUUID->"b9f0ec00-b090-4a80-b748-dc06c39ef92d"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"\<\"wellbeing\"\>", ",", "\<\"income\"\>"}], "}"}]], "Print",
 CellChangeTimes->{{3.906172841659768*^9, 3.906172851787672*^9}, {
   3.906172921021533*^9, 3.9061729579572906`*^9}, 3.906173861527894*^9, 
   3.906174403456691*^9},
 CellLabel->
  "During evaluation of \
In[167]:=",ExpressionUUID->"b27cfff1-4d79-4d77-8367-5321f4f23070"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"3.393`", ",", "99.975`"}], "}"}]], "Output",
 CellChangeTimes->{3.9061738615389*^9, 3.906174403470078*^9},
 CellLabel->
  "Out[167]=",ExpressionUUID->"51ef1c98-a045-4ad1-9311-e44ef6808590"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"k1", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"First", "@", "#"}], ",", 
       RowBox[{"Log", "[", 
        RowBox[{"2.", ",", 
         RowBox[{"Last", "@", "#"}]}], "]"}]}], "}"}], "&"}], "/@", 
    RowBox[{"Rest", "@", "k0"}]}]}], ";", " ", 
  RowBox[{"k2", "=", 
   RowBox[{"procmean", "[", 
    RowBox[{"k1", ",", "2", ",", "1"}], "]"}]}], ";", " ", 
  RowBox[{"k8", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"First", "@", "#"}], ",", 
       RowBox[{"100", 
        RowBox[{"(", 
         RowBox[{
          FractionBox[
           RowBox[{"Last", "@", "#"}], 
           SubscriptBox["k2", 
            RowBox[{"\[LeftDoubleBracket]", 
             RowBox[{"1", ",", "2"}], "\[RightDoubleBracket]"}]]], "-", "1"}],
          ")"}]}]}], "}"}], "&"}], "/@", "k2"}]}], 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{
     RowBox[{"14", " ", "levels", " ", "of", " ", "log"}], "-", "income"}], 
    ",", " ", 
    RowBox[{"happy", " ", "premium", " ", "in", " ", "%"}]}], " ", "*)"}], 
  ";", 
  RowBox[{"k3", "=", 
   RowBox[{
    RowBox[{"Table", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"a", "=", 
        SubscriptBox[
         RowBox[{"Select", "[", 
          RowBox[{"k1", ",", 
           RowBox[{
            RowBox[{
             RowBox[{"Last", "@", "#"}], "==", 
             SubscriptBox["k2", 
              RowBox[{"\[LeftDoubleBracket]", 
               RowBox[{"i", ",", "1"}], "\[RightDoubleBracket]"}]]}], "&"}]}],
           "]"}], 
         RowBox[{"\[LeftDoubleBracket]", 
          RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]]}], ";", " ", 
       RowBox[{
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           SubscriptBox["k2", 
            RowBox[{"\[LeftDoubleBracket]", 
             RowBox[{"i", ",", "1"}], "\[RightDoubleBracket]"}]], ",", 
           RowBox[{"Quantile", "[", 
            RowBox[{"a", ",", "#"}], "]"}]}], "\[IndentingNewLine]", "}"}], 
         "&"}], "/@", 
        FractionBox[
         RowBox[{
          RowBox[{"2", " ", 
           RowBox[{"Range", "@", "5"}]}], "-", "1"}], "10"]}]}], ",", 
      RowBox[{"{", 
       RowBox[{"i", ",", 
        RowBox[{"Length", "@", "k2"}]}], "}"}]}], "]"}], "\[Transpose]"}]}], 
  RowBox[{"(*", " ", 
   RowBox[{
   "happiness", " ", "quintile", " ", "in", " ", "each", " ", "income", " ", 
    "class"}], " ", "*)"}], ";", " ", 
  RowBox[{"k4", "=", 
   RowBox[{"Table", "[", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"First", "@", "#"}], ",", 
         RowBox[{"100", 
          RowBox[{"(", 
           RowBox[{
            FractionBox[
             RowBox[{"Last", "@", "#"}], 
             SubscriptBox["k3", 
              RowBox[{"\[LeftDoubleBracket]", 
               RowBox[{"i", ",", "1", ",", "2"}], "\[RightDoubleBracket]"}]]],
             "-", "1"}], ")"}]}]}], "}"}], "&"}], "/@", 
      SubscriptBox["k3", 
       RowBox[{"\[LeftDoubleBracket]", "i", "\[RightDoubleBracket]"}]]}], ",", 
     RowBox[{"{", 
      RowBox[{"i", ",", 
       RowBox[{"Length", "@", "k3"}]}], "}"}]}], "]"}]}], ";", 
  RowBox[{"tito", "=", 
   RowBox[{"{", 
    RowBox[{
    "\"\<average\>\"", ",", "\"\<miserable\>\"", ",", "\"\<sad\>\"", ",", 
     "\"\<median\>\"", ",", "\"\<happy\>\"", ",", "\"\<joyous\>\""}], "}"}]}],
   ";", " ", 
  RowBox[{"a", "=", 
   RowBox[{"Prepend", "[", 
    RowBox[{"k4", ",", "k8"}], "]"}]}], ";", 
  RowBox[{
  "Print", "@", 
   "\"\<doubling income makes happiness move one ladder up among\>\""}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"Table", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       SubscriptBox["tito", 
        RowBox[{"\[LeftDoubleBracket]", "i", "\[RightDoubleBracket]"}]], ",", 
       
       RowBox[{"ToString", "[", 
        RowBox[{
         SubscriptBox["a", 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"i", ",", 
            RowBox[{"-", "1"}], ",", "2"}], "\[RightDoubleBracket]"}]], "/", 
         SubscriptBox[
          RowBox[{"LinearModelFit", "[", 
           RowBox[{
            SubscriptBox["a", 
             RowBox[{"\[LeftDoubleBracket]", "i", "\[RightDoubleBracket]"}]], 
            ",", "x", ",", "x"}], "]"}], 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"1", ",", "2", ",", "2"}], "\[RightDoubleBracket]"}]]}], 
        "]"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"i", ",", "6"}], "}"}]}], "]"}], "\[Transpose]"}], "//", 
  "TableForm"}]}], "Input",
 CellChangeTimes->{
  3.9061743431602793`*^9, {3.906174380489366*^9, 3.906174382521525*^9}, 
   3.906174643758765*^9, {3.906174695367003*^9, 3.9061747011402493`*^9}},
 CellLabel->
  "In[191]:=",ExpressionUUID->"eed763af-1936-4a00-8325-e2e92dc84a9c"],

Cell[BoxData["\<\"doubling income makes happiness move one ladder up \
among\"\>"], "Print",
 CellChangeTimes->{3.90617438359307*^9, 3.906174703296133*^9},
 CellLabel->
  "During evaluation of \
In[191]:=",ExpressionUUID->"9a914586-715e-4c57-be3b-72a83c5108ac"],

Cell[BoxData[
 TagBox[GridBox[{
    {"\<\"average\"\>", "\<\"miserable\"\>", "\<\"sad\"\>", "\<\"median\"\>", \
"\<\"happy\"\>", "\<\"joyous\"\>"},
    {"\<\"4.75378\"\>", "\<\"4.43018\"\>", "\<\"4.82926\"\>", \
"\<\"4.66209\"\>", "\<\"5.01813\"\>", "\<\"5.14885\"\>"}
   },
   GridBoxAlignment->{"Columns" -> {{Left}}, "Rows" -> {{Baseline}}},
   GridBoxSpacings->{"Columns" -> {
       Offset[0.27999999999999997`], {
        Offset[2.0999999999999996`]}, 
       Offset[0.27999999999999997`]}, "Rows" -> {
       Offset[0.2], {
        Offset[0.4]}, 
       Offset[0.2]}}],
  Function[BoxForm`e$, 
   TableForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{3.906174703311968*^9},
 CellLabel->
  "Out[192]//TableForm=",ExpressionUUID->"58373f65-a77b-4ccf-99e6-\
2063bb885713"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"tik", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{
        RowBox[{"Log", "[", 
         RowBox[{"10.", ",", "#"}], "]"}], "+", "3.01"}], ",", 
       RowBox[{"ToString", "@", "#"}]}], "}"}], "&"}], "/@", 
    RowBox[{"{", 
     RowBox[{"15", ",", "30", ",", "60", ",", "90", ",", "180", ",", "360"}], 
     "}"}]}]}], ";", 
  RowBox[{"g1", "=", 
   RowBox[{"ListPlot", "[", 
    RowBox[{"a", ",", 
     RowBox[{"AxesLabel", "->", 
      RowBox[{"{", 
       RowBox[{"\"\<k$\>\"", ",", "\"\<%\>\""}], "}"}]}], ",", 
     RowBox[{"PlotStyle", "->", "color"}], ",", 
     RowBox[{"Ticks", "->", 
      RowBox[{"{", 
       RowBox[{"tik", ",", "Automatic"}], "}"}]}], ",", 
     RowBox[{"option1", "[", "tito", "]"}]}], "]"}]}], ";", 
  RowBox[{"Show", "[", 
   RowBox[{"g1", ",", 
    RowBox[{"option2", "[", 
     RowBox[{"12", ",", "4"}], "]"}], ",", 
    RowBox[{
    "PlotLabel", "->", 
     "\"\<Emotional well-being growth with income per quintiles\>\""}]}], 
   "]"}]}]], "Input",
 CellChangeTimes->{
  3.906172516522263*^9, 3.906172970123543*^9, {3.9061745871049747`*^9, 
   3.906174592513755*^9}, {3.9061746564939613`*^9, 3.906174663858222*^9}, 
   3.906174700028013*^9},
 CellLabel->
  "In[193]:=",ExpressionUUID->"3d958a25-73e5-4b84-b9aa-ef562c2ab57b"]
}, Closed]],

Cell[CellGroupData[{

Cell["US GSS", "Subsection",
 CellChangeTimes->{{3.8746528813802357`*^9, 3.874652890384316*^9}, {
   3.875275755553361*^9, 3.875275764757107*^9}, 3.875275826740107*^9, 
   3.8765615823442507`*^9, {3.889274229897923*^9, 3.88927423138132*^9}, {
   3.889675820130479*^9, 3.889675842928904*^9}, {3.89087845559553*^9, 
   3.890878473375339*^9}},ExpressionUUID->"d70983b3-1bda-4058-b1ec-\
1ac8e20c4520"],

Cell[BoxData[
 RowBox[{" ", 
  RowBox[{
   RowBox[{"Export", "[", 
    RowBox[{
    "\"\<bcn.sh\>\"", ",", " ", "\[IndentingNewLine]", 
     "\"\<curl \
'https://gssdataexplorer.norc.org/config/variable_details_autocomplete.json' \
-H 'User-Agent: Mozilla/5.0 (Windows NT 10.0; rv:102.0) Gecko/20100101 \
Firefox/102.0' -H 'Accept: \
text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/\
*;q=0.8' -H 'Accept-Language: en-US,en;q=0.5' -H 'Accept-Encoding: gzip, \
deflate, br' -H 'Connection: keep-alive' -H 'Upgrade-Insecure-Requests: 1' -H \
'Sec-Fetch-Dest: document' -H 'Sec-Fetch-Mode: navigate' -H 'Sec-Fetch-Site: \
none' -H 'Sec-Fetch-User: ?1' -H 'Pragma: no-cache' -H 'Cache-Control: \
no-cache' -o labels.json\>\"", ",", "\"\<Text\>\""}], "]"}], ";", " ", 
   RowBox[{"Run", "[", "\"\<sh bcn.sh\>\"", "]"}], ";", "  ", 
   RowBox[{"Export", "[", 
    RowBox[{
     RowBox[{"path", "<>", "\"\<data/GSS_labels.csv.bz2\>\""}], ",", 
     RowBox[{
      RowBox[{
       SubscriptBox["#", 
        RowBox[{"\[LeftDoubleBracket]", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"1", ",", "2", ",", "3", ",", "5"}], "}"}], ",", "2"}], 
         "\[RightDoubleBracket]"}]], "&"}], "/@", 
      SubscriptBox[
       RowBox[{"Import", "[", "\"\<labels.json\>\"", "]"}], 
       RowBox[{"\[LeftDoubleBracket]", 
        RowBox[{"1", ",", "2"}], "\[RightDoubleBracket]"}]]}]}], "]"}], ";", 
   " ", 
   RowBox[{"DeleteFile", "@", "\"\<labels.json\>\""}], ";", 
   RowBox[{"Export", "[", 
    RowBox[{
    "\"\<bcn.sh\>\"", ",", " ", 
     "\"\<curl 'https://gss.norc.org/documents/stata/GSS_stata.zip' -o \
gss.zip \nunzip 'gss.zip'\>\"", ",", "\"\<Text\>\""}], "]"}], ";", " ", 
   RowBox[{"Run", "[", "\"\<sh bcn.sh\>\"", "]"}], ";", "  ", 
   RowBox[{"qui", "=", 
    SubscriptBox[
     RowBox[{"Select", "[", 
      RowBox[{
       RowBox[{"Import", "[", "\"\<gss.zip\>\"", "]"}], ",", 
       RowBox[{
        RowBox[{
         RowBox[{"StringTake", "[", 
          RowBox[{"#", ",", 
           RowBox[{"-", "3"}]}], "]"}], "==", "\"\<dta\>\""}], "&"}]}], "]"}], 
     RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]]}], ";"}],
   " "}]], "Input",
 CellChangeTimes->{
  3.891226858044517*^9, {3.891227082687089*^9, 3.891227097266877*^9}, {
   3.906176090705402*^9, 3.906176107322528*^9}, 3.9061767814898987`*^9, {
   3.906177098631177*^9, 3.906177110969805*^9}, {3.90617749894308*^9, 
   3.9061774993751993`*^9}, {3.906179064886331*^9, 3.9061790781198683`*^9}},
 CellLabel->
  "In[297]:=",ExpressionUUID->"68a8050e-f28e-4da5-9275-049be67dfa2c"],

Cell[BoxData[
 RowBox[{
  RowBox[{"keys", "=", 
   RowBox[{"{", 
    RowBox[{
    "\"\<year\>\"", ",", "\"\<realinc\>\"", ",", "\"\<happy\>\"", ",", 
     "\"\<life\>\"", ",", "\"\<health\>\"", ",", "\"\<region\>\"", ",", 
     "\"\<ethnic\>\"", ",", "\"\<trust\>\""}], "}"}]}], ";", 
  RowBox[{"labels", "=", 
   RowBox[{"Import", "[", 
    RowBox[{"path", "<>", "\"\<data/GSS_labels.csv.bz2\>\""}], "]"}]}], ";", 
  RowBox[{"v2", "=", 
   RowBox[{"Table", "[", " ", 
    RowBox[{
     RowBox[{
      RowBox[{"v1", "=", 
       SubscriptBox[
        RowBox[{"Select", "[", 
         RowBox[{"labels", ",", 
          RowBox[{
           RowBox[{
            SubscriptBox["#", 
             RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], 
            "==", 
            SubscriptBox["keys", 
             RowBox[{
             "\[LeftDoubleBracket]", "i", "\[RightDoubleBracket]"}]]}], 
           "&"}]}], "]"}], 
        RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]]}], 
      ";", " ", 
      RowBox[{"a", "=", 
       RowBox[{"Import", "[", 
        RowBox[{
         RowBox[{
         "\"\<https://3ilfsaj2lj.execute-api.us-east-1.amazonaws.com/prod/\
variables/guest-details/\>\"", "<>", 
          RowBox[{"ToString", "@", 
           SubscriptBox["v1", 
            RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]]}],
           "<>", "\"\<?workspace_id=NaN\>\""}], ",", "\"\<json\>\""}], 
        "]"}]}], ";", " ", 
      RowBox[{"b", "=", 
       SubscriptBox["a", 
        RowBox[{"\[LeftDoubleBracket]", 
         RowBox[{"1", ",", "2", ",", "3", ",", "2"}], 
         "\[RightDoubleBracket]"}]]}], ";", 
      RowBox[{"d", "=", 
       RowBox[{"b", "[", 
        RowBox[{"[", 
         RowBox[{
          SubscriptBox[
           RowBox[{"Position", "[", 
            RowBox[{"b", ",", "\"\<summary_by_year\>\""}], "]"}], 
           RowBox[{"\[LeftDoubleBracket]", 
            RowBox[{"1", ",", "1"}], "\[RightDoubleBracket]"}]], ",", "2"}], 
         "]"}], "]"}]}], ";", 
      RowBox[{"a", "=", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          SubscriptBox[
           RowBox[{"Select", "[", 
            RowBox[{
             RowBox[{"Flatten", "@", "d"}], ",", 
             RowBox[{
              RowBox[{
               SubscriptBox["#", 
                RowBox[{
                "\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], 
               "==", "\"\<code_id\>\""}], "&"}]}], "]"}], 
           RowBox[{"\[LeftDoubleBracket]", 
            RowBox[{"All", ",", "2"}], "\[RightDoubleBracket]"}]], ",", 
          SubscriptBox[
           RowBox[{"Select", "[", 
            RowBox[{
             RowBox[{"Flatten", "@", "d"}], ",", 
             RowBox[{
              RowBox[{
               SubscriptBox["#", 
                RowBox[{
                "\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], 
               "==", "\"\<code_label\>\""}], "&"}]}], "]"}], 
           RowBox[{"\[LeftDoubleBracket]", 
            RowBox[{"All", ",", "2"}], "\[RightDoubleBracket]"}]]}], "}"}], 
        "\[Transpose]"}]}], ";", 
      RowBox[{"Append", "[", 
       RowBox[{"v1", ",", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"Length", "@", "a"}], ">", "0"}], ",", "a", ",", 
          "\"\<n.a.\>\""}], "]"}]}], "]"}]}], ",", 
     RowBox[{"{", 
      RowBox[{"i", ",", 
       RowBox[{"Length", "@", "keys"}]}], "}"}]}], "]"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.906179104444606*^9, 3.906179112876766*^9}, 
   3.906179276073141*^9},ExpressionUUID->"b91a74c2-668e-4599-b876-\
07fe061c2d1d"],

Cell[BoxData[
 RowBox[{
  RowBox[{"Export", "[", 
   RowBox[{"\"\<pew.do\>\"", ",", "\[IndentingNewLine]", 
    RowBox[{
    "\"\<set maxvar 7000\\n use \\\"/Users/Shared/CCleaner/\>\"", "<>", "qui",
      "<>", "\"\<\\\"\\n export delimited \>\"", "<>", 
     RowBox[{"StringJoin", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"#", "<>", "\"\< \>\""}], "&"}], "/@", "keys"}], "]"}], "<>", 
     "\"\<using \\\"/Users/Shared/CCleaner/myGSS.csv\\\", nolabel replace\\n \
exit, clear\>\""}], ",", "\"\<Text\>\""}], "]"}], ";", " ", 
  RowBox[{"Export", "[", 
   RowBox[{
   "\"\<bcn.sh\>\"", ",", " ", 
    "\"\</Volumes/Stata14/StataMP.app/Contents/MacOS/StataMP -e do \
/Users/Shared/CCleaner/pew.do\>\"", ",", "\"\<Text\>\""}], "]"}], ";", "  ", 
  RowBox[{"Run", "[", "\"\<sh bcn.sh\>\"", "]"}], ";", "  ", 
  RowBox[{"Export", "[", 
   RowBox[{
    RowBox[{"path", "<>", "\"\<data/myGSS.csv.bz2\>\""}], ",", 
    RowBox[{"Import", "[", "\"\<myGSS.csv\>\"", "]"}]}], "]"}], 
  ";"}]], "Input",
 CellChangeTimes->{{3.906179147663101*^9, 3.906179160003462*^9}, {
  3.906179392951373*^9, 
  3.906179394338264*^9}},ExpressionUUID->"907b8b70-83ae-444d-a46e-\
d5eae8f74be1"],

Cell[CellGroupData[{

Cell["Trust vs . Ethnicity ", "Subsubsection",
 CellChangeTimes->{{3.890878458411165*^9, 3.8908784641101427`*^9}, 
   3.8911745900357533`*^9},ExpressionUUID->"d4574813-667f-4317-b18b-\
86f59dd3de29"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"t1", "=", 
   RowBox[{"Import", "[", 
    RowBox[{"path", "<>", "\"\<data/myGSS.csv.bz2\>\""}], "]"}]}], ";", " ", 
  RowBox[{"keys", "=", 
   RowBox[{"{", 
    RowBox[{"\"\<ethnic\>\"", ",", "\"\<trust\>\""}], "}"}]}], ";", " ", 
  RowBox[{"a", "=", 
   RowBox[{
    RowBox[{
     SubscriptBox[
      RowBox[{"Position", "[", 
       RowBox[{
        RowBox[{"First", "@", "t1"}], ",", "#"}], "]"}], 
      RowBox[{"\[LeftDoubleBracket]", 
       RowBox[{"1", ",", "1"}], "\[RightDoubleBracket]"}]], "&"}], "/@", 
    "keys"}]}], ";", " ", 
  RowBox[{"t2", "=", 
   RowBox[{"Rest", "@", 
    SubscriptBox["t1", 
     RowBox[{"\[LeftDoubleBracket]", 
      RowBox[{"All", ",", "a"}], "\[RightDoubleBracket]"}]]}]}], ";", " ", 
  RowBox[{
   RowBox[{"Flatten", "[", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"Take", "[", 
        RowBox[{"#", ",", "7"}], "]"}], "&"}], "/@", 
      SubscriptBox[
       RowBox[{"Select", "[", 
        RowBox[{"v2", ",", 
         RowBox[{
          RowBox[{"MemberQ", "[", 
           RowBox[{"keys", ",", 
            SubscriptBox["#", 
             RowBox[{
             "\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]]}], "]"}],
           "&"}]}], "]"}], 
       RowBox[{"\[LeftDoubleBracket]", 
        RowBox[{"All", ",", 
         RowBox[{"-", "1"}]}], "\[RightDoubleBracket]"}]]}], ",", "1"}], 
    "]"}], "//", "TableForm"}]}]], "Input",
 CellChangeTimes->{{3.8912603005581617`*^9, 3.891260309262498*^9}, {
   3.8912603619719067`*^9, 3.891260365013836*^9}, {3.9061789575104628`*^9, 
   3.906178988619734*^9}, {3.906179443702798*^9, 3.906179449014058*^9}, {
   3.906179493075632*^9, 3.90617952321772*^9}, {3.906179707254863*^9, 
   3.9061797175905323`*^9}, {3.9061797701786423`*^9, 3.906179773486397*^9}, {
   3.906179839942464*^9, 3.906179840393241*^9}, {3.906180946232583*^9, 
   3.9061809467086573`*^9}, 3.9061809777673693`*^9, {3.906181235175518*^9, 
   3.906181248630205*^9}, {3.906181507948555*^9, 
   3.9061815165638723`*^9}},ExpressionUUID->"b87b1932-5292-4ea7-bfd7-\
a6d1585d3ae5"],

Cell[BoxData[
 TagBox[GridBox[{
    {"\<\"-100\"\>", "\<\".i:  Inapplicable\"\>"},
    {"\<\"-99\"\>", "\<\".n:  No answer\"\>"},
    {"\<\"-97\"\>", "\<\".s:  Skipped on Web\"\>"},
    {"\<\"-95\"\>", "\<\".u:  Uncodable\"\>"},
    {"\<\"1\"\>", "\<\"Africa\"\>"},
    {"\<\"2\"\>", "\<\"Austria\"\>"},
    {"\<\"3\"\>", "\<\"Canada (french)\"\>"},
    {"\<\"-100\"\>", "\<\".i:  Inapplicable\"\>"},
    {"\<\"-99\"\>", "\<\".n:  No answer\"\>"},
    {"\<\"-98\"\>", "\<\".d:  Do not Know/Cannot Choose\"\>"},
    {"\<\"-70\"\>", "\<\".y:  Not available in this year\"\>"},
    {"\<\"1\"\>", "\<\"Can trust\"\>"},
    {"\<\"2\"\>", "\<\"Can't be too careful\"\>"},
    {"\<\"3\"\>", "\<\"Depends\"\>"}
   },
   GridBoxAlignment->{"Columns" -> {{Left}}, "Rows" -> {{Baseline}}},
   GridBoxSpacings->{"Columns" -> {
       Offset[0.27999999999999997`], {
        Offset[2.0999999999999996`]}, 
       Offset[0.27999999999999997`]}, "Rows" -> {
       Offset[0.2], {
        Offset[0.4]}, 
       Offset[0.2]}}],
  Function[BoxForm`e$, 
   TableForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{{3.9061796810203114`*^9, 3.906179751560295*^9}, {
   3.906179827456833*^9, 3.90617983101717*^9}, 3.9061800623685427`*^9, 
   3.906180094029045*^9, 3.906180947599842*^9, 3.9061809790269403`*^9, {
   3.9061812364408216`*^9, 3.906181249374061*^9}},
 CellLabel->
  "Out[449]//TableForm=",ExpressionUUID->"8a55a5e6-5ea2-431d-b16d-\
b7c96b51e2b3"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"a1", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"ToString", "@", 
        RowBox[{"First", "@", "#"}]}], ",", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"Last", "@", "#"}], "==", "3"}], ",", ".5", ",", 
         RowBox[{"2", "-", 
          RowBox[{"Last", "@", "#"}]}]}], "]"}]}], "}"}], "&"}], "/@", 
    RowBox[{"Select", "[", " ", 
     RowBox[{"t2", ",", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"First", "@", "#"}], ">", "0"}], "&&", 
        RowBox[{"1", "\[LessEqual]", 
         RowBox[{"Last", "@", "#"}], "\[LessEqual]", "3"}]}], "&"}]}], 
     "]"}]}]}], ";", " ", 
  RowBox[{"Print", "@", 
   RowBox[{"Length", "@", "a1"}]}], ";", " ", 
  RowBox[{"a2", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"Prepend", "[", 
      RowBox[{
       RowBox[{"Rest", "@", "#"}], ",", 
       RowBox[{"ToString", "@", 
        RowBox[{"First", "@", "#"}]}]}], "]"}], "&"}], "/@", 
    RowBox[{"merge", "[", 
     RowBox[{
      RowBox[{"procmean", "[", 
       RowBox[{"a1", ",", "1", ",", "2"}], "]"}], ",", 
      RowBox[{"Tally", "@", 
       SubscriptBox["a1", 
        RowBox[{"\[LeftDoubleBracket]", 
         RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]]}]}], "]"}]}]}],
   ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"swap", "=", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"\"\<Ethiopia\>\"", "\[Rule]", "\"\<Africa\>\""}], ",", 
     RowBox[{"\"\<Kenya\>\"", "\[Rule]", "\"\<Africa\>\""}], ",", 
     RowBox[{"\"\<South Africa\>\"", "\[Rule]", "\"\<Africa\>\""}], ",", 
     RowBox[{"\"\<Uganda\>\"", "\[Rule]", "\"\<Africa\>\""}], ",", 
     RowBox[{"\"\<Other Africa\>\"", "->", "\"\<Africa\>\""}], ",", 
     RowBox[{"\"\<Other Middle East\>\"", "\[Rule]", "\"\<Arabic\>\""}], ",", 
     
     RowBox[{"\"\<Egypt\>\"", "\[Rule]", "\"\<Arabic\>\""}], ",", 
     RowBox[{"\"\<Israel\>\"", "\[Rule]", "\"\<Arabic\>\""}], ",", 
     RowBox[{"\"\<Bangladesh\>\"", "\[Rule]", "\"\<Asia\>\""}], ",", 
     RowBox[{"\"\<Indonesia\>\"", "\[Rule]", "\"\<Asia\>\""}], ",", 
     RowBox[{"\"\<Other Oceania\>\"", "\[Rule]", "\"\<Asia\>\""}], ",", 
     RowBox[{"\"\<Pakistan\>\"", "\[Rule]", "\"\<Asia\>\""}], ",", 
     RowBox[{"\"\<Papua New Guinea\>\"", "\[Rule]", "\"\<Asia\>\""}], ",", 
     RowBox[{"\"\<Samoa\>\"", "\[Rule]", "\"\<Asia\>\""}], ",", 
     RowBox[{"\"\<Vietnam\>\"", "\[Rule]", "\"\<Asia\>\""}], ",", 
     RowBox[{"\"\<Austria\>\"", "\[Rule]", "\"\<Austrian Empire\>\""}], ",", 
     RowBox[{"\"\<Czechoslovakia\>\"", "\[Rule]", "\"\<Austrian Empire\>\""}],
      ",", 
     RowBox[{"\"\<Hungary\>\"", "\[Rule]", "\"\<Austrian Empire\>\""}], ",", 
     RowBox[{"\"\<Other european\>\"", "\[Rule]", "\"\<Balkan\>\""}], ",", 
     RowBox[{"\"\<Romania\>\"", "\[Rule]", "\"\<Balkan\>\""}], ",", 
     RowBox[{"\"\<Yugoslavia\>\"", "\[Rule]", "\"\<Balkan\>\""}], ",", 
     RowBox[{"\"\<Belgium\>\"", "\[Rule]", "\"\<Benelux\>\""}], ",", 
     RowBox[{
     "\"\<Netherlands (dutch/holland)\>\"", "\[Rule]", "\"\<Benelux\>\""}], 
     ",", 
     RowBox[{"\"\<Canada (french)\>\"", "\[Rule]", "\"\<Canada\>\""}], ",", 
     RowBox[{"\"\<Canada (other)\>\"", "\[Rule]", "\"\<Canada\>\""}], ",", 
     RowBox[{"\"\<Belize\>\"", "\[Rule]", "\"\<Caribbean\>\""}], ",", 
     RowBox[{"\"\<Haiti\>\"", "\[Rule]", "\"\<Caribbean\>\""}], ",", 
     RowBox[{"\"\<Other Caribbean\>\"", "->", "\"\<Caribbean\>\""}], ",", 
     RowBox[{"\"\<Jamaica\>\"", "\[Rule]", "\"\<Caribbean\>\""}], ",", 
     RowBox[{
     "\"\<West indies (non-spanish)\>\"", "\[Rule]", "\"\<Caribbean\>\""}], 
     ",", 
     RowBox[{
     "\"\<West indies (not specified)\>\"", "\[Rule]", "\"\<Caribbean\>\""}], 
     ",", 
     RowBox[{
     "\"\<England and wales\>\"", "\[Rule]", "\"\<Great Britain\>\""}], ",", 
     RowBox[{"\"\<Scotland\>\"", "\[Rule]", "\"\<Great Britain\>\""}], ",", 
     RowBox[{"\"\<Portugal\>\"", "\[Rule]", "\"\<Iberia\>\""}], ",", 
     RowBox[{"\"\<Spain\>\"", "\[Rule]", "\"\<Iberia\>\""}], ",", 
     RowBox[{"\"\<Other asian\>\"", "\[Rule]", "\"\<India\>\""}], ",", 
     RowBox[{"\"\<Argentina\>\"", "\[Rule]", "\"\<Latin America\>\""}], ",", 
     RowBox[{"\"\<Bolivia\>\"", "\[Rule]", "\"\<Latin America\>\""}], ",", 
     RowBox[{"\"\<Brazil\>\"", "\[Rule]", "\"\<Latin America\>\""}], ",", 
     RowBox[{"\"\<Chile\>\"", "\[Rule]", "\"\<Latin America\>\""}], ",", 
     RowBox[{"\"\<Colombia\>\"", "\[Rule]", "\"\<Latin America\>\""}], ",", 
     RowBox[{"\"\<Costa Rica\>\"", "\[Rule]", "\"\<Latin America\>\""}], ",", 
     
     RowBox[{
     "\"\<Dominican Republic\>\"", "\[Rule]", "\"\<Latin America\>\""}], ",", 
     
     RowBox[{"\"\<Ecuador\>\"", "\[Rule]", "\"\<Latin America\>\""}], ",", 
     RowBox[{"\"\<El Salvador\>\"", "\[Rule]", "\"\<Latin America\>\""}], ",", 
     RowBox[{"\"\<Guatemala\>\"", "\[Rule]", "\"\<Latin America\>\""}], ",", 
     RowBox[{"\"\<Honduras\>\"", "\[Rule]", "\"\<Latin America\>\""}], ",", 
     RowBox[{
     "\"\<Other Central America\>\"", "\[Rule]", "\"\<Latin America\>\""}], 
     ",", 
     RowBox[{
     "\"\<Other South America\>\"", "\[Rule]", "\"\<Latin America\>\""}], ",", 
     RowBox[{"\"\<Panama\>\"", "\[Rule]", "\"\<Latin America\>\""}], ",", 
     RowBox[{"\"\<Peru\>\"", "\[Rule]", "\"\<Latin America\>\""}], ",", 
     RowBox[{"\"\<Venezuela\>\"", "\[Rule]", "\"\<Latin America\>\""}], ",", 
     RowBox[{"\"\<Other spanish\>\"", "\[Rule]", "\"\<Mexico\>\""}], ",", 
     RowBox[{"\"\<Lithuania\>\"", "\[Rule]", "\"\<Poland\>\""}], ",", 
     RowBox[{"\"\<Denmark\>\"", "\[Rule]", "\"\<Scandinavia\>\""}], ",", 
     RowBox[{"\"\<Finland\>\"", "\[Rule]", "\"\<Scandinavia\>\""}], ",", 
     RowBox[{"\"\<Norway\>\"", "\[Rule]", "\"\<Scandinavia\>\""}], ",", 
     RowBox[{"\"\<Sweden\>\"", "\[Rule]", "\"\<Scandinavia\>\""}], ",", 
     RowBox[{"\"\<American indian\>\"", "\[Rule]", "\"\<USA\>\""}], ",", 
     RowBox[{"\"\<American only\>\"", "\[Rule]", "\"\<USA\>\""}], ",", 
     RowBox[{"\"\<Other North America\>\"", "\[Rule]", "\"\<USA\>\""}], ",", 
     RowBox[{"\"\<Puerto rico\>\"", "\[Rule]", "\"\<USA\>\""}], ",", 
     RowBox[{"Null", "->", "\"\<Other\>\""}]}], "}"}]}], ";", 
  RowBox[{"a3", "=", 
   RowBox[{"merge", "[", 
    RowBox[{"a2", ",", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          RowBox[{"ToString", "@", 
           RowBox[{"First", "@", "#"}]}], ",", 
          RowBox[{"Last", "@", "#"}]}], "}"}], "&"}], "/@", 
       SubscriptBox[
        RowBox[{"Select", "[", 
         RowBox[{"v2", ",", 
          RowBox[{
           RowBox[{"\"\<ethnic\>\"", "==", 
            SubscriptBox["#", 
             RowBox[{
             "\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]]}], 
           "&"}]}], "]"}], 
        RowBox[{"\[LeftDoubleBracket]", 
         RowBox[{"1", ",", 
          RowBox[{"-", "1"}]}], "\[RightDoubleBracket]"}]]}], "/.", 
      "swap"}]}], "]"}]}], ";", 
  RowBox[{"a4", "=", 
   RowBox[{"proctot", "[", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         SubscriptBox["#", 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"-", "1"}], "\[RightDoubleBracket]"}]], ",", 
         RowBox[{
          SubscriptBox["#", 
           RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], 
          SubscriptBox["#", 
           RowBox[{"\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]]}], 
         ",", 
         SubscriptBox["#", 
          RowBox[{"\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]]}], 
        "}"}], "&"}], "/@", "a3"}], ",", "1", ",", 
     RowBox[{"{", 
      RowBox[{"2", ",", "3"}], "}"}]}], "]"}]}], ";", " ", 
  RowBox[{"a5", "=", 
   RowBox[{"SortBy", "[", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         SubscriptBox["#", 
          RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], 
         ",", 
         RowBox[{
          SubscriptBox["#", 
           RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], 
          "/", 
          SubscriptBox["#", 
           RowBox[{"\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]]}], 
         ",", 
         SubscriptBox["#", 
          RowBox[{"\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]]}], 
        "}"}], "&"}], "/@", "a4"}], ",", 
     RowBox[{
      SubscriptBox["#", 
       RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], 
      "&"}]}], "]"}]}], ";", 
  RowBox[{"a6", "=", 
   RowBox[{"Reverse", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        SubscriptBox["#", 
         RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], ",", 
        RowBox[{"Round", "[", 
         RowBox[{"100", 
          FractionBox[
           RowBox[{
            SubscriptBox["#", 
             RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], 
            "-", 
            SubscriptBox["a5", 
             RowBox[{"\[LeftDoubleBracket]", 
              RowBox[{"1", ",", "2"}], "\[RightDoubleBracket]"}]]}], 
           RowBox[{
            SubscriptBox["a5", 
             RowBox[{"\[LeftDoubleBracket]", 
              RowBox[{
               RowBox[{"-", "1"}], ",", "2"}], "\[RightDoubleBracket]"}]], 
            "-", 
            SubscriptBox["a5", 
             RowBox[{"\[LeftDoubleBracket]", 
              RowBox[{"1", ",", "2"}], "\[RightDoubleBracket]"}]]}]]}], "]"}],
         ",", 
        SubscriptBox["#", 
         RowBox[{"\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]]}], 
       "}"}], "&"}], "/@", "a5"}], "]"}]}], ";", 
  RowBox[{
   RowBox[{"Prepend", "[", 
    RowBox[{"a6", ",", 
     RowBox[{"{", 
      RowBox[{"\"\<Area\>\"", ",", "\"\<Trust(%)\>\"", ",", "\"\<Obs\>\""}], 
      "}"}]}], "]"}], "//", "TableForm"}]}]}], "Input",
 CellChangeTimes->{{3.9061799871830797`*^9, 3.906180007223611*^9}, 
   3.906180038517572*^9, {3.906180083998865*^9, 3.906180084361932*^9}, {
   3.906180331154243*^9, 3.9061804698310137`*^9}, {3.906180574338461*^9, 
   3.9061806465742397`*^9}, {3.906180692882792*^9, 3.9061807116193113`*^9}, {
   3.906180769514452*^9, 3.9061807743884478`*^9}, {3.9061808150671377`*^9, 
   3.906180866338931*^9}, {3.906180904385144*^9, 3.9061809661613417`*^9}, {
   3.906181009164741*^9, 3.906181014907668*^9}, {3.906181062605213*^9, 
   3.906181085345503*^9}, {3.906181117039774*^9, 3.906181136129952*^9}, {
   3.906181264406855*^9, 3.9061812888209877`*^9}, {3.906181363025887*^9, 
   3.906181435652473*^9}, 3.906181495573716*^9},
 CellLabel->
  "In[478]:=",ExpressionUUID->"ce6da919-03ff-4dc2-9fb8-a565eb68ec07"],

Cell[BoxData["33627"], "Print",
 CellChangeTimes->{{3.906181364973693*^9, 3.9061814139781923`*^9}, 
   3.9061814486515512`*^9, 3.906181496308734*^9},
 CellLabel->
  "During evaluation of \
In[478]:=",ExpressionUUID->"e6131f9a-ea2c-42e5-8e7e-977d32b04445"]
}, Open  ]],

Cell[BoxData[
 RowBox[{"(*", " ", 
  RowBox[{
   RowBox[{"https", ":"}], "//", 
   RowBox[{
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"www", ".", "wolframcloud", ".", "com"}], "/", "obj"}], "/", 
      RowBox[{"nicolas", ".", "boccard"}]}], "/", "Published"}], "/", 
    RowBox[{"trust_gss", ".", "nb"}]}]}], " ", "*)"}]], "Input",
 CellChangeTimes->{{3.889676003674788*^9, 3.889676005942705*^9}},
 CellLabel->
  "In[206]:=",ExpressionUUID->"b5b9f647-4655-49be-8cbf-28f137284cf7"]
}, Closed]],

Cell[CellGroupData[{

Cell["Happiness ", "Subsubsection",
 CellChangeTimes->{{3.890878458411165*^9, 3.8908784641101427`*^9}, {
  3.890878529160584*^9, 
  3.89087853091146*^9}},ExpressionUUID->"0d715a7e-6286-4354-afc0-\
037e9715f491"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"keys", "=", 
   RowBox[{"{", 
    RowBox[{
    "\"\<year\>\"", ",", "\"\<realinc\>\"", ",", "\"\<happy\>\"", ",", 
     "\"\<life\>\"", ",", "\"\<health\>\""}], "}"}]}], ";", " ", 
  RowBox[{"a", "=", 
   RowBox[{
    RowBox[{
     SubscriptBox[
      RowBox[{"Position", "[", 
       RowBox[{
        RowBox[{"First", "@", "t1"}], ",", "#"}], "]"}], 
      RowBox[{"\[LeftDoubleBracket]", 
       RowBox[{"1", ",", "1"}], "\[RightDoubleBracket]"}]], "&"}], "/@", 
    "keys"}]}], ";", " ", 
  RowBox[{"a1", "=", 
   RowBox[{"Rest", "@", 
    SubscriptBox["t1", 
     RowBox[{"\[LeftDoubleBracket]", 
      RowBox[{"All", ",", "a"}], "\[RightDoubleBracket]"}]]}]}], ";", " ", 
  RowBox[{"Print", "[", 
   RowBox[{
    RowBox[{"Length", "@", "a1"}], ",", " ", "\"\< respondents\>\""}], "]"}], 
  ";", "  ", 
  RowBox[{
   RowBox[{"Flatten", "[", 
    RowBox[{
     SubscriptBox[
      RowBox[{"Select", "[", 
       RowBox[{"v2", ",", 
        RowBox[{
         RowBox[{"MemberQ", "[", 
          RowBox[{"keys", ",", 
           SubscriptBox["#", 
            RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]]}],
           "]"}], "&"}]}], "]"}], 
      RowBox[{"\[LeftDoubleBracket]", 
       RowBox[{"All", ",", 
        RowBox[{"-", "1"}]}], "\[RightDoubleBracket]"}]], ",", "1"}], "]"}], "//",
    "TableForm"}]}]], "Input",
 CellChangeTimes->{{3.89122710573947*^9, 3.891227112766583*^9}, {
   3.891227248993907*^9, 3.891227249087667*^9}, {3.89122728192414*^9, 
   3.89122729430577*^9}, {3.891227490962717*^9, 3.891227492398984*^9}, 
   3.891228231866975*^9, {3.891251460989315*^9, 3.89125146233004*^9}, {
   3.891251506631774*^9, 3.891251507760249*^9}, {3.8912521147971*^9, 
   3.891252116027782*^9}, {3.906175745476323*^9, 3.906175746901744*^9}, {
   3.906181575003727*^9, 3.90618164483209*^9}, {3.906181836537335*^9, 
   3.906181838564662*^9}},
 CellLabel->
  "In[492]:=",ExpressionUUID->"d2777c46-c891-4ef3-8f3f-45e15afa4e02"],

Cell[BoxData[
 InterpretationBox[
  RowBox[{"72390", "\[InvisibleSpace]", "\<\" respondents\"\>"}],
  SequenceForm[72390, " respondents"],
  Editable->False]], "Print",
 CellChangeTimes->{{3.906181827356613*^9, 3.9061818393574266`*^9}},
 CellLabel->
  "During evaluation of \
In[492]:=",ExpressionUUID->"e608854f-7771-4e21-8e05-295d4e9cfd7d"]
}, Open  ]],

Cell[BoxData[{
 RowBox[{
  RowBox[{"yy", "=", 
   SubscriptBox[
    RowBox[{"Tally", "[", 
     SubscriptBox["a1", 
      RowBox[{"\[LeftDoubleBracket]", 
       RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]], "]"}], 
    RowBox[{"\[LeftDoubleBracket]", 
     RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]]}], ";", " ", 
  RowBox[{"a3", "=", 
   RowBox[{"DeleteCases", "[", 
    RowBox[{
     RowBox[{"Table", "[", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{
        RowBox[{"a2", "=", 
         RowBox[{
          RowBox[{
           RowBox[{"{", 
            RowBox[{
             RowBox[{
              RowBox[{"Log", "[", 
               RowBox[{"2.", ",", 
                SubscriptBox["#", 
                 RowBox[{
                 "\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]]}], 
               "]"}], "-", "10"}], 
             RowBox[{"(*", " ", 
              RowBox[{
              "set", " ", "income", " ", "into", " ", "doubling", " ", "bins",
                " ", "starting", " ", "at", " ", "about", " ", "0"}], " ", 
              "*)"}], ",", "\[IndentingNewLine]", 
             RowBox[{
              FractionBox["100", "3."], 
              RowBox[{"(", 
               RowBox[{
                FractionBox[
                 RowBox[{"3", "-", 
                  SubscriptBox["#", 
                   RowBox[{
                   "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]]}], 
                 "2"], 
                RowBox[{"(*", " ", 
                 RowBox[{"happiness", " ", "in", " ", "%"}], " ", "*)"}], "+", 
                FractionBox[
                 RowBox[{"3", "-", 
                  SubscriptBox["#", 
                   RowBox[{
                   "\[LeftDoubleBracket]", "4", "\[RightDoubleBracket]"}]]}], 
                 "2"], "+", 
                FractionBox[
                 RowBox[{"4", "-", 
                  SubscriptBox["#", 
                   RowBox[{
                   "\[LeftDoubleBracket]", "5", "\[RightDoubleBracket]"}]]}], 
                 "3"]}], ")"}]}]}], "}"}], "&"}], "/@", 
          RowBox[{"Select", "[", 
           RowBox[{"a1", ",", 
            RowBox[{
             RowBox[{
              RowBox[{
               RowBox[{"First", "@", "#"}], "==", 
               SubscriptBox["yy", 
                RowBox[{
                "\[LeftDoubleBracket]", "j", "\[RightDoubleBracket]"}]]}], "&&", 
              RowBox[{
               SubscriptBox["#", 
                RowBox[{
                "\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], ">", 
               "0"}], "&&", 
              RowBox[{"0", "<", 
               SubscriptBox["#", 
                RowBox[{
                "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]], "<", 
               "4"}], "&&", 
              RowBox[{"NumberQ", "@", 
               SubscriptBox["#", 
                RowBox[{
                "\[LeftDoubleBracket]", "4", "\[RightDoubleBracket]"}]]}], "&&", 
              RowBox[{"NumberQ", "@", 
               SubscriptBox["#", 
                RowBox[{
                "\[LeftDoubleBracket]", "5", "\[RightDoubleBracket]"}]]}]}], 
             "&"}]}], "]"}]}]}], ";", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"Length", "@", "a2"}], ">", "1"}], ",", 
          RowBox[{
           RowBox[{"m", "=", 
            RowBox[{"Floor", "@", 
             FractionBox[
              RowBox[{"Length", "@", "a2"}], "10."]}]}], ";", " ", 
           RowBox[{"(*", " ", 
            RowBox[{"deciles", " ", "of", " ", "income"}], " ", "*)"}], 
           RowBox[{"{", 
            RowBox[{
             SubscriptBox["yy", 
              RowBox[{"\[LeftDoubleBracket]", "j", "\[RightDoubleBracket]"}]],
              ",", 
             RowBox[{"Table", "[", 
              RowBox[{
               RowBox[{"Mean", "@", 
                RowBox[{"Take", "[", 
                 RowBox[{
                  RowBox[{"Sort", "@", "a2"}], ",", 
                  RowBox[{"{", 
                   RowBox[{
                    RowBox[{"1", "+", 
                    RowBox[{"m", 
                    RowBox[{"(", 
                    RowBox[{"i", "-", "1"}], ")"}]}]}], ",", 
                    RowBox[{"m", " ", "i"}]}], "}"}]}], "]"}]}], ",", 
               RowBox[{"{", 
                RowBox[{"i", ",", "10"}], "}"}]}], "]"}]}], "}"}]}]}], 
         "]"}]}], ",", 
       RowBox[{"{", 
        RowBox[{"j", ",", 
         RowBox[{"Length", "@", "yy"}]}], "}"}]}], "]"}], ",", "Null"}], 
    "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{
     RowBox[{
      RowBox[{"ListPlot", "[", 
       RowBox[{
        RowBox[{"Table", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{
            SubscriptBox["a3", 
             RowBox[{"\[LeftDoubleBracket]", 
              RowBox[{"j", ",", "1"}], "\[RightDoubleBracket]"}]], ",", 
            RowBox[{"2", "^", 
             RowBox[{"(", 
              RowBox[{"10", "+", 
               RowBox[{"First", "@", 
                RowBox[{"Median", "@", 
                 SubscriptBox["a3", 
                  RowBox[{"\[LeftDoubleBracket]", 
                   RowBox[{"j", ",", "2"}], "\[RightDoubleBracket]"}]]}]}]}], 
              ")"}]}]}], "}"}], ",", 
          RowBox[{"{", 
           RowBox[{"j", ",", 
            RowBox[{"Length", "@", "a3"}]}], "}"}]}], "]"}], ",", 
        RowBox[{"PlotLabel", "->", "\"\<median income across time\>\""}]}], 
       "]"}], "\[IndentingNewLine]", "a4"}], "=", 
     RowBox[{"Table", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         SubscriptBox["a3", 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"j", ",", "1"}], "\[RightDoubleBracket]"}]], ",", 
         SubscriptBox[
          RowBox[{"LinearModelFit", "[", 
           RowBox[{
            SubscriptBox["a3", 
             RowBox[{"\[LeftDoubleBracket]", 
              RowBox[{"j", ",", "2"}], "\[RightDoubleBracket]"}]], ",", "x", 
            ",", "x"}], "]"}], 
          RowBox[{"\[LeftDoubleBracket]", 
           RowBox[{"1", ",", "2", ",", "2"}], "\[RightDoubleBracket]"}]]}], 
        "}"}], ",", 
       RowBox[{"{", 
        RowBox[{"j", ",", 
         RowBox[{"Length", "@", "a3"}]}], "}"}]}], "]"}]}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"ListPlot", "[", 
     RowBox[{
      RowBox[{"mooh", "[", 
       RowBox[{"a4", ",", "1"}], "]"}], ",", 
      RowBox[{
      "PlotLabel", "->", 
       "\"\<slope of the income/happiness relationship\>\""}]}], "]"}]}], " ",
    "*)"}]}]}], "Input",
 CellChangeTimes->{{3.890879266016099*^9, 3.890879282544654*^9}, {
   3.890879404002769*^9, 3.8908794360311003`*^9}, {3.890880495889647*^9, 
   3.890880535394073*^9}, {3.8908812467401114`*^9, 3.8908812599562817`*^9}, {
   3.891140963122547*^9, 3.891140990472217*^9}, {3.891174499205515*^9, 
   3.891174505484766*^9}, {3.8912257580913267`*^9, 3.891225804264024*^9}, 
   3.891226059295245*^9, 3.8912283888796797`*^9, {3.8912515321403646`*^9, 
   3.891251576057846*^9}, 3.90617496190819*^9, {3.9061750205601177`*^9, 
   3.9061750360738087`*^9}, {3.906175167386552*^9, 3.9061751698949547`*^9}, {
   3.906175201846261*^9, 3.906175322140329*^9}, {3.906175365408092*^9, 
   3.906175369126564*^9}, {3.906175417065461*^9, 3.9061754557558813`*^9}, {
   3.906175506077314*^9, 3.906175531595375*^9}, {3.906175568639516*^9, 
   3.9061755916368637`*^9}, {3.9061816369663277`*^9, 3.906181673395588*^9}, {
   3.906181894632019*^9, 
   3.9061818997728853`*^9}},ExpressionUUID->"b950dece-be9d-40c6-842d-\
a58276c528d3"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"a4", "=", 
   RowBox[{"Flatten", "[", 
    RowBox[{
     SubscriptBox["a3", 
      RowBox[{"\[LeftDoubleBracket]", 
       RowBox[{"All", ",", "2"}], "\[RightDoubleBracket]"}]], ",", "1"}], 
    "]"}]}], ";", " ", 
  RowBox[{"a5", "=", 
   RowBox[{"SortBy", "[", 
    RowBox[{"a4", ",", 
     RowBox[{
      SubscriptBox["#", 
       RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], 
      "&"}]}], "]"}]}], ";", " ", 
  RowBox[{"a6", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       SubscriptBox["#", 
        RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], ",", 
       
       RowBox[{"100", 
        FractionBox[
         RowBox[{
          SubscriptBox["#", 
           RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], 
          "-", 
          SubscriptBox["a5", 
           RowBox[{"\[LeftDoubleBracket]", 
            RowBox[{"1", ",", "2"}], "\[RightDoubleBracket]"}]]}], 
         RowBox[{
          SubscriptBox["a5", 
           RowBox[{"\[LeftDoubleBracket]", 
            RowBox[{
             RowBox[{"-", "1"}], ",", "2"}], "\[RightDoubleBracket]"}]], "-", 
          
          SubscriptBox["a5", 
           RowBox[{"\[LeftDoubleBracket]", 
            RowBox[{"1", ",", "2"}], "\[RightDoubleBracket]"}]]}]]}]}], "}"}],
      "&"}], "/@", "a5"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"lm", "=", 
   RowBox[{"LinearModelFit", "[", 
    RowBox[{"a6", ",", "x", ",", "x"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Print", "[", 
   RowBox[{"\"\<\!\(\*SuperscriptBox[\(R\), \(2\)]\)=\>\"", ",", 
    RowBox[{"lm", "[", "\"\<RSquared\>\"", "]"}], ",", 
    "\"\<, upon doubling income, you move one happiness bin up from \>\"", 
    ",", 
    RowBox[{"Round", "[", 
     RowBox[{"100", "/", 
      SubscriptBox["lm", 
       RowBox[{"\[LeftDoubleBracket]", 
        RowBox[{"1", ",", "2", ",", "2"}], "\[RightDoubleBracket]"}]]}], 
     "]"}]}], "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"(*", 
   RowBox[{"ListPlot", "[", 
    RowBox[{"a6", ",", 
     RowBox[{"AxesLabel", "->", 
      RowBox[{"{", 
       RowBox[{"\"\<doubling income\>\"", ",", "\"\<% happiness\>\""}], 
       "}"}]}]}], "]"}], "*)"}]}]}], "Input",
 CellChangeTimes->{{3.890880189022883*^9, 3.890880229738863*^9}, {
   3.890880432674024*^9, 3.890880500375514*^9}, {3.8908805460068483`*^9, 
   3.8908805683470287`*^9}, {3.891141036040525*^9, 3.891141038142581*^9}, {
   3.891249784989376*^9, 3.891249793677455*^9}, 3.891249881139804*^9, {
   3.906175363875292*^9, 3.9061753796319532`*^9}, 3.90617541496611*^9, {
   3.906175602403998*^9, 3.9061756530913343`*^9}, 3.906181699797799*^9, 
   3.906181916011409*^9, {3.906182003530512*^9, 3.9061820350650597`*^9}, {
   3.9061821091259403`*^9, 3.906182184246449*^9}},
 CellLabel->
  "In[540]:=",ExpressionUUID->"b9407983-b0a0-47ec-9d93-95cd9001113f"],

Cell[BoxData[
 InterpretationBox[
  RowBox[{"\<\"\\!\\(\\*SuperscriptBox[\\(R\\), \\(2\\)]\\)=\"\>", 
   "\[InvisibleSpace]", "0.7532456285130484`", 
   "\[InvisibleSpace]", "\<\", upon doubling income, you move one happiness \
bin up from \"\>", "\[InvisibleSpace]", "7"}],
  SequenceForm[
  "\!\(\*SuperscriptBox[\(R\), \(2\)]\)=", 0.7532456285130484, 
   ", upon doubling income, you move one happiness bin up from ", 7],
  Editable->False]], "Print",
 CellChangeTimes->{{3.906182134375519*^9, 3.9061821848064613`*^9}},
 CellLabel->
  "During evaluation of \
In[540]:=",ExpressionUUID->"05120c95-a774-45e4-8cdb-da3ad4c13541"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"u1", "=", 
   RowBox[{"Quiet", "@", 
    SubscriptBox[
     RowBox[{
     "Import", "[", "\"\<~/Documents/Social Choice/Happiness/USA.xlsx\>\"", 
      "]"}], 
     RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]]}]}], ";",
   " ", 
  RowBox[{"u9", "=", 
   SubscriptBox["u1", 
    RowBox[{"\[LeftDoubleBracket]", 
     RowBox[{"All", ",", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"-", "1"}], ",", "3", ",", "16", ",", "17", ",", "18"}], 
       "}"}]}], "\[RightDoubleBracket]"}]]}], ";", 
  RowBox[{"Print", "@", 
   RowBox[{"First", "@", "u9"}]}], ";", " ", 
  RowBox[{"u2", "=", 
   RowBox[{"Sort", "@", 
    RowBox[{"Select", "[", 
     RowBox[{"u9", ",", 
      RowBox[{
       RowBox[{
        SubscriptBox["#", 
         RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], ">",
         "0"}], "&"}]}], "]"}]}]}], ";", " ", 
  RowBox[{"u3", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       SubscriptBox["#", 
        RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], ",", 
       
       RowBox[{
        SubscriptBox["#", 
         RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], "/", 
        SubscriptBox["#", 
         RowBox[{"\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]]}]}], 
      "}"}], "&"}], "/@", 
    RowBox[{"proctot", "[", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          SubscriptBox["#", 
           RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], 
          ",", 
          RowBox[{
           SubscriptBox["#", 
            RowBox[{"\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]], 
           SubscriptBox["#", 
            RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]]}],
           ",", 
          SubscriptBox["#", 
           RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]]}], 
         "}"}], "&"}], "/@", "u2"}], ",", "1", ",", 
      RowBox[{"{", 
       RowBox[{"2", ",", "3"}], "}"}]}], "]"}]}]}], 
  RowBox[{"(*", " ", "sun", " ", "*)"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"u4", "=", 
     RowBox[{
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         SubscriptBox["#", 
          RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], 
         ",", 
         RowBox[{
          SubscriptBox["#", 
           RowBox[{"\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]], 
          "/", 
          SubscriptBox["#", 
           RowBox[{
           "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]]}]}], "}"}],
        "&"}], "/@", 
      RowBox[{"proctot", "[", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"{", 
           RowBox[{
            SubscriptBox["#", 
             RowBox[{"\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]], 
            ",", 
            RowBox[{
             FractionBox[
              RowBox[{
               SubscriptBox["#", 
                RowBox[{
                "\[LeftDoubleBracket]", "5", "\[RightDoubleBracket]"}]], "+", 
               
               SubscriptBox["#", 
                RowBox[{
                "\[LeftDoubleBracket]", "4", "\[RightDoubleBracket]"}]]}], 
              "2"], 
             SubscriptBox["#", 
              RowBox[{
              "\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]]}], ",", 
            
            SubscriptBox["#", 
             RowBox[{
             "\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]]}], "}"}],
           "&"}], "/@", "u2"}], ",", "1", ",", 
        RowBox[{"{", 
         RowBox[{"2", ",", "3"}], "}"}]}], "]"}]}]}], ";"}], 
   RowBox[{"(*", " ", "temp", " ", "*)"}], ";", " ", 
   RowBox[{"u5", "=", 
    RowBox[{"merge", "[", 
     RowBox[{"u4", ",", "u3"}], "]"}]}], ";"}], 
  " "}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"u6", "=", 
   RowBox[{"merge", "[", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"Prepend", "[", 
        RowBox[{
         RowBox[{"Rest", "@", "#"}], ",", 
         RowBox[{"ToLowerCase", "@", 
          RowBox[{"First", "@", "#"}]}]}], "]"}], "&"}], "/@", "u5"}], ",", 
     RowBox[{
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"ToLowerCase", "[", 
          RowBox[{
           RowBox[{"Last", "@", "#"}], "/.", 
           RowBox[{
           "\"\<East south atlantic\>\"", "->", 
            "\"\<East South Central\>\""}]}], "]"}], ",", 
         RowBox[{"First", "@", "#"}]}], "}"}], "&"}], "/@", 
      SubscriptBox["v2", 
       RowBox[{"\[LeftDoubleBracket]", 
        RowBox[{"6", ",", 
         RowBox[{"-", "1"}]}], "\[RightDoubleBracket]"}]]}]}], "]"}]}], ";", 
  RowBox[{"u1", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"Most", "@", 
      RowBox[{"ReplacePart", "[", 
       RowBox[{"#", ",", 
        RowBox[{"1", "->", 
         RowBox[{"ToString", "@", 
          SubscriptBox["#", 
           RowBox[{"\[LeftDoubleBracket]", 
            RowBox[{"-", "1"}], "\[RightDoubleBracket]"}]]}]}]}], "]"}]}], 
     "&"}], "/@", "u6"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.891252529693451*^9, 3.891252609751408*^9}, {
  3.891253561306058*^9, 3.891253580349037*^9}, {3.891254890698897*^9, 
  3.891254892458804*^9}, {3.891255007921998*^9, 3.8912550403575974`*^9}, {
  3.891255083849464*^9, 3.891255089615732*^9}, {3.891255806967276*^9, 
  3.8912558162155867`*^9}, {3.891258963390234*^9, 3.891258999852079*^9}},
 CellLabel->
  "In[607]:=",ExpressionUUID->"aba5bac2-a9fb-4ec0-a58e-990c92862cb4"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"\<\"Division\"\>", ",", "\<\"Pop\"\>", ",", "\<\"Sunshine\"\>", 
   ",", "\<\"HighTp\"\>", ",", "\<\"LowTp\"\>"}], "}"}]], "Print",
 CellChangeTimes->{
  3.891258966877537*^9, {3.891258997526471*^9, 3.891259002164316*^9}, 
   3.89125911142699*^9},
 CellLabel->
  "During evaluation of \
In[607]:=",ExpressionUUID->"038e8ef1-44a7-427a-b6e2-d5c0eb963992"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"u2", "=", 
   RowBox[{"Table", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"a2", "=", 
       RowBox[{
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{"ToString", "@", 
            SubscriptBox["#", 
             RowBox[{"\[LeftDoubleBracket]", 
              RowBox[{"-", "1"}], "\[RightDoubleBracket]"}]]}], ",", 
           RowBox[{
            FractionBox["100", "3."], 
            RowBox[{"(", 
             RowBox[{
              FractionBox[
               RowBox[{"3", "-", 
                SubscriptBox["#", 
                 RowBox[{
                 "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]]}], 
               "2"], "+", 
              FractionBox[
               RowBox[{"3", "-", 
                SubscriptBox["#", 
                 RowBox[{
                 "\[LeftDoubleBracket]", "4", "\[RightDoubleBracket]"}]]}], 
               "2"], "+", 
              FractionBox[
               RowBox[{"4", "-", 
                SubscriptBox["#", 
                 RowBox[{
                 "\[LeftDoubleBracket]", "5", "\[RightDoubleBracket]"}]]}], 
               "3"]}], ")"}]}]}], 
          RowBox[{"(*", " ", 
           RowBox[{"happiness", "+", 
            RowBox[{"dull", " ", "life"}], "+", 
            RowBox[{"health", " ", "in", " ", "%"}]}], " ", "*)"}], "}"}], 
         "&"}], "/@", 
        RowBox[{"Select", "[", 
         RowBox[{"a1", ",", 
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{"First", "@", "#"}], "==", 
             SubscriptBox["yy", 
              RowBox[{
              "\[LeftDoubleBracket]", "j", "\[RightDoubleBracket]"}]]}], "&&", 
            RowBox[{"0", "<", 
             SubscriptBox["#", 
              RowBox[{"\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]],
              "<", "4"}], "&&", 
            RowBox[{"0", "<", 
             SubscriptBox["#", 
              RowBox[{"\[LeftDoubleBracket]", "4", "\[RightDoubleBracket]"}]],
              "<", "4"}], "&&", 
            RowBox[{"0", "<", 
             SubscriptBox["#", 
              RowBox[{"\[LeftDoubleBracket]", "5", "\[RightDoubleBracket]"}]],
              "<", "5"}]}], "&"}]}], "]"}]}]}], ";", 
      RowBox[{"procmean", "[", 
       RowBox[{"a2", ",", "1", ",", "2"}], "]"}]}], ",", 
     RowBox[{"{", 
      RowBox[{"j", ",", 
       RowBox[{"Length", "@", "yy"}]}], "}"}]}], "]"}]}], ";", " ", 
  RowBox[{"u3", "=", 
   RowBox[{"procmean", "[", 
    RowBox[{
     RowBox[{"Flatten", "[", 
      RowBox[{
       RowBox[{"Select", "[", 
        RowBox[{"u2", ",", 
         RowBox[{
          RowBox[{
           RowBox[{"Length", "@", "#"}], ">", "1"}], "&"}]}], "]"}], ",", 
       "1"}], "]"}], ",", "1", ",", "2"}], "]"}]}], ";", " ", 
  RowBox[{"u4", "=", 
   RowBox[{"merge", "[", 
    RowBox[{"u1", ",", "u3"}], "]"}]}], ";", " ", 
  RowBox[{"u5", "=", 
   RowBox[{"SortBy", "[", 
    RowBox[{
     RowBox[{"merge", "[", 
      RowBox[{"u4", ",", 
       SubscriptBox["u6", 
        RowBox[{"\[LeftDoubleBracket]", 
         RowBox[{"All", ",", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"-", "1"}], ",", "1"}], "}"}]}], 
         "\[RightDoubleBracket]"}]]}], "]"}], ",", 
     RowBox[{
      SubscriptBox["#", 
       RowBox[{"\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]], 
      "&"}]}], "]"}]}], ";", " ", 
  RowBox[{"ListPlot", "[", 
   RowBox[{
    SubscriptBox["u4", 
     RowBox[{"\[LeftDoubleBracket]", 
      RowBox[{"All", ",", 
       RowBox[{"{", 
        RowBox[{"3", ",", "4"}], "}"}]}], "\[RightDoubleBracket]"}]], ",", 
    RowBox[{
    "PlotLabel", "->", 
     "\"\<Sunshine vs. \!\(\*SuperscriptBox[\(Happiness\), \(*\)]\)\>\""}]}], 
   "]"}]}]], "Input",
 CellChangeTimes->{{3.891255842558663*^9, 3.891255863078939*^9}, 
   3.89125878758531*^9, {3.891258825396891*^9, 3.8912588423784513`*^9}, 
   3.891258887917935*^9, {3.8912590097443533`*^9, 3.891259011673664*^9}, {
   3.891259380061718*^9, 3.891259399653894*^9}, {3.89125943820465*^9, 
   3.891259485511243*^9}, {3.8912602451198072`*^9, 
   3.891260258587797*^9}},ExpressionUUID->"9118d62c-2c45-4964-aa91-\
d7fa18d51883"],

Cell[BoxData[
 RowBox[{
  RowBox[{"DeleteFile", "@", "\"\<gss.zip\>\""}], ";", 
  RowBox[{"DeleteDirectory", "[", 
   RowBox[{
    RowBox[{"First", "@", 
     RowBox[{"StringSplit", "[", 
      RowBox[{"qui", ",", "\"\</\>\""}], "]"}]}], ",", 
    RowBox[{"DeleteContents", "->", "True"}]}], "]"}], ";"}]], "Input",Express\
ionUUID->"72dba470-a605-4d6d-afe7-85c8ccfe17ab"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"Export", "[", 
    RowBox[{
    "\"\<bcn.sh\>\"", ",", 
     "\"\<hdiutil detach /Volumes/Stata14 \\n hdiutil detach \
/Volumes/ess\\nhdiutil detach /Volumes/barometer\>\"", ",", "\"\<Text\>\""}], 
    "]"}], ";", " ", 
   RowBox[{"Run", "[", "\"\<sh bcn.sh\>\"", "]"}], ";"}], " "}]], "Input",
 CellChangeTimes->{{3.90547653900041*^9, 3.90547656268146*^9}, {
   3.905476691988255*^9, 3.905476694480564*^9}, {3.905477471715331*^9, 
   3.905477472968272*^9}, {3.905477525570674*^9, 3.9054775427033978`*^9}, 
   3.905480293547617*^9, 3.906177731972143*^9, {3.90628939688233*^9, 
   3.9062894204630547`*^9}},
 CellLabel->"In[1]:=",ExpressionUUID->"15a03921-19be-40b4-be4c-3a4c8c5e33cb"]
}, Open  ]]
}, Open  ]]
},
WindowSize->{1148, 891},
WindowMargins->{{123, Automatic}, {Automatic, -124}},
PrivateNotebookOptions->{"CloudPublishPath"->"/Published/trust_gss.nb"},
Magnification:>1.25 Inherited,
FrontEndVersion->"13.3 for Mac OS X ARM (64-bit) (June 3, 2023)",
StyleDefinitions->"Default.nb",
ExpressionUUID->"2c3f5a9b-8b86-4e2f-aa75-924f167e0c22"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[558, 20, 3500, 75, 225, "Input",ExpressionUUID->"89034262-cb7d-483a-b5fc-bc39b0eaeeda"],
Cell[4061, 97, 11072, 259, 472, "Input",ExpressionUUID->"f37333ec-05b1-4f81-ae11-fb86c6660cb2"],
Cell[CellGroupData[{
Cell[15158, 360, 648, 10, 67, "Subsection",ExpressionUUID->"d98d3770-6975-4af9-9a23-f6e1d54bb267"],
Cell[15809, 372, 259, 6, 37, "Input",ExpressionUUID->"ea74affc-55d0-449d-8104-f74ca114a351"],
Cell[CellGroupData[{
Cell[16093, 382, 5926, 148, 501, "Input",ExpressionUUID->"8de415d0-8287-476c-8df0-f2400b56a019"],
Cell[22022, 532, 540, 11, 29, "Print",ExpressionUUID->"8cfd1c06-3e30-4c1e-a78b-1b03ec6eda47"]
}, Open  ]],
Cell[22577, 546, 9368, 237, 383, "Input",ExpressionUUID->"49902e36-01f1-478c-a4e5-9872b62ec499"],
Cell[CellGroupData[{
Cell[31970, 787, 2419, 74, 179, "Input",ExpressionUUID->"6aaa8514-80e8-4291-b8da-8ec92508d35f"],
Cell[34392, 863, 322, 6, 42, "Output",ExpressionUUID->"ae087f0d-871a-4730-a0b6-ba3a39b970d7"]
}, Open  ]],
Cell[CellGroupData[{
Cell[34751, 874, 5346, 147, 319, "Input",ExpressionUUID->"1903d55b-9d13-4285-b0e1-b3d3af6d7b14"],
Cell[CellGroupData[{
Cell[40122, 1025, 653, 13, 29, "Print",ExpressionUUID->"b59d9cb2-324c-4475-b1f0-5f930f76f300"],
Cell[40778, 1040, 653, 14, 29, "Print",ExpressionUUID->"71ddc7b3-341b-42ff-a602-5fd3a7fc44c3"]
}, Open  ]]
}, Open  ]],
Cell[41458, 1058, 2259, 65, 102, "Input",ExpressionUUID->"08050419-06ba-44bc-98f9-75c25128fd1c"],
Cell[43720, 1125, 8697, 244, 436, "Input",ExpressionUUID->"3a62be79-cdfc-4b43-b618-cea8906a70e4"],
Cell[CellGroupData[{
Cell[52442, 1373, 3722, 90, 280, "Input",ExpressionUUID->"aeb4a254-107f-4d61-bbbc-dfc6a037fd60"],
Cell[56167, 1465, 702, 11, 78, "Print",ExpressionUUID->"2d98a788-e4c3-4d2b-b2f1-38925785ba00"]
}, Open  ]],
Cell[CellGroupData[{
Cell[56906, 1481, 7125, 203, 350, "Input",ExpressionUUID->"5bd6550a-4da6-4ebb-a959-9b58ad74943b"],
Cell[64034, 1686, 437, 10, 29, "Print",ExpressionUUID->"ba42fc7c-1c5a-4d60-94bb-e80d5e8dc6a9"],
Cell[64474, 1698, 297, 5, 42, "Output",ExpressionUUID->"579de38e-5072-4d3f-81a5-548961ccbacc"]
}, Open  ]],
Cell[CellGroupData[{
Cell[64808, 1708, 3680, 112, 157, "Input",ExpressionUUID->"6569ad35-4fa9-47e4-b6d0-f86dce238bbc"],
Cell[68491, 1822, 498, 12, 29, "Print",ExpressionUUID->"6ce5abf4-7d3c-4ce1-88e9-eb7eee61475a"]
}, Open  ]],
Cell[CellGroupData[{
Cell[69026, 1839, 6194, 167, 447, "Input",ExpressionUUID->"23c57506-8a66-4265-b9fc-1499453dfdb2"],
Cell[CellGroupData[{
Cell[75245, 2010, 1074, 18, 29, "Print",ExpressionUUID->"61088d7d-53c3-47cb-b0fc-7e0e6b1e414b"],
Cell[76322, 2030, 1077, 19, 29, "Print",ExpressionUUID->"e935b419-9b8d-49e4-bd63-e24b15163f61"],
Cell[77402, 2051, 1063, 18, 29, "Print",ExpressionUUID->"f8e5b6f8-b5e8-4b73-8d97-f8e68f9e4e5a"],
Cell[78468, 2071, 1056, 16, 78, "Print",ExpressionUUID->"cc2d54e5-b061-4797-b7b8-a595d6aabbd0"]
}, Open  ]]
}, Open  ]],
Cell[79551, 2091, 14418, 382, 618, "Input",ExpressionUUID->"f6ab6507-f47e-4692-8247-b35bd87f7127"],
Cell[93972, 2475, 9321, 264, 421, "Input",ExpressionUUID->"0e45609b-3578-4acc-9b2e-a9ac08298f22"],
Cell[103296, 2741, 2355, 64, 154, "Input",ExpressionUUID->"5cc02143-cf47-4f76-952e-7be6c1257d99"]
}, Open  ]],
Cell[CellGroupData[{
Cell[105688, 2810, 498, 8, 67, "Subsection",ExpressionUUID->"d0db606b-2327-41b4-9cce-8a824875c44e"],
Cell[106189, 2820, 514, 11, 90, "Input",ExpressionUUID->"b9301dbe-4496-46b6-a9a3-3433be74e5fe"],
Cell[106706, 2833, 18543, 451, 843, "Input",ExpressionUUID->"466e0c08-cc99-487b-b913-d0697cb4055f"],
Cell[CellGroupData[{
Cell[125274, 3288, 1472, 35, 148, "Input",ExpressionUUID->"993e427a-7871-4802-948a-4456845cbdbc"],
Cell[CellGroupData[{
Cell[126771, 3327, 1065, 16, 29, "Print",ExpressionUUID->"1339e62e-9840-49c7-ab12-d5d8f2c3fda4"],
Cell[127839, 3345, 1060, 16, 29, "Print",ExpressionUUID->"31e44a1c-7c86-4999-b098-ade921b9e3c4"]
}, Open  ]]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[128960, 3368, 554, 8, 67, "Subsection",ExpressionUUID->"4178a837-8633-429b-80ae-ef83257e5376"],
Cell[129517, 3378, 4074, 104, 402, "Input",ExpressionUUID->"e8914080-4e64-49dc-85e0-960cc0eac250"],
Cell[CellGroupData[{
Cell[133616, 3486, 469, 11, 64, "Input",ExpressionUUID->"1e73ae78-85e7-4671-b8c0-3bebc2f71f81"],
Cell[134088, 3499, 334, 8, 29, "Print",ExpressionUUID->"47977794-f3f3-495a-b20d-470c6a211d4a"]
}, Open  ]],
Cell[CellGroupData[{
Cell[134459, 3512, 3286, 95, 169, "Input",ExpressionUUID->"22a0dab5-650c-4908-916c-a8545286e093"],
Cell[137748, 3609, 521, 12, 29, "Print",ExpressionUUID->"aa7f099f-2c82-4b3d-8982-22d47acb617c"]
}, Open  ]],
Cell[CellGroupData[{
Cell[138306, 3626, 3416, 98, 227, "Input",ExpressionUUID->"539f0f08-865f-4f4c-8ddb-47d0906b2fdf"],
Cell[141725, 3726, 451, 11, 29, "Print",ExpressionUUID->"8db98f25-007a-4034-9c59-bb632156a0fc"]
}, Open  ]]
}, Closed]],
Cell[CellGroupData[{
Cell[142225, 3743, 448, 7, 46, "Subsection",ExpressionUUID->"819b65b6-4a33-46c9-8256-ee46797f5f02"],
Cell[CellGroupData[{
Cell[142698, 3754, 7075, 181, 364, "Input",ExpressionUUID->"24f212e8-0e58-4675-9a12-b3c2d1a62bca"],
Cell[149776, 3937, 996, 32, 263, "Output",ExpressionUUID->"381c9b4d-d0f1-48d6-a51e-8170539da4d4"]
}, Open  ]],
Cell[CellGroupData[{
Cell[150809, 3974, 1627, 42, 109, "Input",ExpressionUUID->"2b36b88c-697d-47fd-9308-287dcb8db14e"],
Cell[152439, 4018, 323, 6, 42, "Output",ExpressionUUID->"971f8555-7ba9-48bd-8dda-22884064019c"]
}, Open  ]],
Cell[152777, 4027, 827, 23, 40, "Input",ExpressionUUID->"c4d0e28f-2b8b-488e-a00a-afa2c645e1b7"],
Cell[CellGroupData[{
Cell[153629, 4054, 4085, 108, 221, "Input",ExpressionUUID->"2c24ae30-30cf-48d7-8028-feafc5f9aecc"],
Cell[157717, 4164, 269, 5, 42, "Output",ExpressionUUID->"7f84a292-cf45-4918-8f54-752117c940ef"]
}, Open  ]],
Cell[158001, 4172, 1224, 30, 116, "Input",ExpressionUUID->"c294f6bf-9087-4717-814e-16da652e3f75"],
Cell[CellGroupData[{
Cell[159250, 4206, 4450, 121, 205, "Input",ExpressionUUID->"dcc61ead-7b7e-42fb-9b38-af7527373bb6"],
Cell[163703, 4329, 170, 3, 42, "Output",ExpressionUUID->"64439df8-f346-4603-abb0-ade773126ce5"]
}, Open  ]],
Cell[163888, 4335, 6120, 147, 280, "Input",ExpressionUUID->"52ffd214-a198-4036-9679-7665c5e2d0dc"],
Cell[170011, 4484, 5016, 130, 228, "Input",ExpressionUUID->"6d5699c6-d380-4db1-b5e6-03168965052d"],
Cell[CellGroupData[{
Cell[175052, 4618, 5106, 132, 203, "Input",ExpressionUUID->"bc582a80-5c01-47dc-a5b3-a23c06305997"],
Cell[180161, 4752, 340, 5, 42, "Output",ExpressionUUID->"a92e7594-949d-4d4d-a907-80782b821bce"]
}, Open  ]],
Cell[CellGroupData[{
Cell[180538, 4762, 1894, 54, 174, "Input",ExpressionUUID->"642f3511-24c4-4922-82d6-d7b019b808c1"],
Cell[182435, 4818, 244, 4, 42, "Output",ExpressionUUID->"9a6f9f57-4023-482b-a1f2-18180dc3306e"],
Cell[182682, 4824, 244, 4, 42, "Output",ExpressionUUID->"1f9ded59-5b24-4118-95ee-32d107578703"]
}, Open  ]],
Cell[182941, 4831, 723, 15, 64, "Input",ExpressionUUID->"f0318c33-da61-4f59-ab1b-191816f61488"]
}, Closed]],
Cell[CellGroupData[{
Cell[183701, 4851, 415, 6, 46, "Subsection",ExpressionUUID->"7a440a24-ef44-4145-949c-067a081d9a70"],
Cell[CellGroupData[{
Cell[184141, 4861, 2552, 55, 111, "Input",ExpressionUUID->"b9f0ec00-b090-4a80-b748-dc06c39ef92d"],
Cell[186696, 4918, 373, 8, 29, "Print",ExpressionUUID->"b27cfff1-4d79-4d77-8367-5321f4f23070"],
Cell[187072, 4928, 229, 5, 42, "Output",ExpressionUUID->"51ef1c98-a045-4ad1-9311-e44ef6808590"]
}, Open  ]],
Cell[CellGroupData[{
Cell[187338, 4938, 4857, 142, 329, "Input",ExpressionUUID->"eed763af-1936-4a00-8325-e2e92dc84a9c"],
Cell[192198, 5082, 261, 5, 29, "Print",ExpressionUUID->"9a914586-715e-4c57-be3b-72a83c5108ac"],
Cell[192462, 5089, 777, 20, 79, "Output",ExpressionUUID->"58373f65-a77b-4ccf-99e6-2063bb885713"]
}, Open  ]],
Cell[193254, 5112, 1332, 38, 90, "Input",ExpressionUUID->"3d958a25-73e5-4b84-b9aa-ef562c2ab57b"]
}, Closed]],
Cell[CellGroupData[{
Cell[194623, 5155, 397, 6, 46, "Subsection",ExpressionUUID->"d70983b3-1bda-4058-b1ec-1ac8e20c4520"],
Cell[195023, 5163, 2604, 58, 355, "Input",ExpressionUUID->"68a8050e-f28e-4da5-9275-049be67dfa2c"],
Cell[197630, 5223, 3643, 97, 255, "Input",ExpressionUUID->"b91a74c2-668e-4599-b876-07fe061c2d1d"],
Cell[201276, 5322, 1178, 27, 194, "Input",ExpressionUUID->"907b8b70-83ae-444d-a46e-d5eae8f74be1"],
Cell[CellGroupData[{
Cell[202479, 5353, 199, 3, 56, "Subsubsection",ExpressionUUID->"d4574813-667f-4317-b18b-86f59dd3de29"],
Cell[CellGroupData[{
Cell[202703, 5360, 2089, 53, 101, "Input",ExpressionUUID->"b87b1932-5292-4ea7-bfd7-a6d1585d3ae5"],
Cell[204795, 5415, 1434, 33, 353, "Output",ExpressionUUID->"8a55a5e6-5ea2-431d-b16d-b7c96b51e2b3"]
}, Open  ]],
Cell[CellGroupData[{
Cell[206266, 5453, 10699, 242, 736, "Input",ExpressionUUID->"ce6da919-03ff-4dc2-9fb8-a565eb68ec07"],
Cell[216968, 5697, 255, 5, 29, "Print",ExpressionUUID->"e6131f9a-ea2c-42e5-8e7e-977d32b04445"]
}, Open  ]],
Cell[217238, 5705, 495, 13, 37, "Input",ExpressionUUID->"b5b9f647-4655-49be-8cbf-28f137284cf7"]
}, Closed]],
Cell[CellGroupData[{
Cell[217770, 5723, 211, 4, 45, "Subsubsection",ExpressionUUID->"0d715a7e-6286-4354-afc0-037e9715f491"],
Cell[CellGroupData[{
Cell[218006, 5731, 1983, 51, 103, "Input",ExpressionUUID->"d2777c46-c891-4ef3-8f3f-45e15afa4e02"],
Cell[219992, 5784, 342, 8, 29, "Print",ExpressionUUID->"e608854f-7771-4e21-8e05-295d4e9cfd7d"]
}, Open  ]],
Cell[220349, 5795, 7619, 192, 373, "Input",ExpressionUUID->"b950dece-be9d-40c6-842d-a58276c528d3"],
Cell[CellGroupData[{
Cell[227993, 5991, 2937, 76, 179, "Input",ExpressionUUID->"b9407983-b0a0-47ec-9d93-95cd9001113f"],
Cell[230933, 6069, 628, 13, 29, "Print",ExpressionUUID->"05120c95-a774-45e4-8cdb-da3ad4c13541"]
}, Open  ]],
Cell[CellGroupData[{
Cell[231598, 6087, 5588, 162, 260, "Input",ExpressionUUID->"aba5bac2-a9fb-4ec0-a58e-990c92862cb4"],
Cell[237189, 6251, 393, 9, 29, "Print",ExpressionUUID->"038e8ef1-44a7-427a-b6e2-d5c0eb963992"]
}, Open  ]],
Cell[237597, 6263, 4185, 115, 216, "Input",ExpressionUUID->"9118d62c-2c45-4964-aa91-d7fa18d51883"],
Cell[241785, 6380, 372, 9, 37, "Input",ExpressionUUID->"72dba470-a605-4d6d-afe7-85c8ccfe17ab"],
Cell[242160, 6391, 730, 15, 116, "Input",ExpressionUUID->"15a03921-19be-40b4-be4c-3a4c8c5e33cb"]
}, Open  ]]
}, Open  ]]
}
]
*)

